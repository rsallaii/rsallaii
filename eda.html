<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">

<head>

<meta charset="utf-8" />
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="pandoc" />




<title>Diamonds Exploratory Data Analysis</title>

<script src="site_libs/jquery-1.11.3/jquery.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/spacelab.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<script src="site_libs/navigation-1.1/codefolding.js"></script>
<script src="site_libs/navigation-1.1/sourceembed.js"></script>
<link href="site_libs/highlightjs-9.12.0/textmate.css" rel="stylesheet" />
<script src="site_libs/highlightjs-9.12.0/highlight.js"></script>
<link href="site_libs/pagedtable-1.1/css/pagedtable.css" rel="stylesheet" />
<script src="site_libs/pagedtable-1.1/js/pagedtable.js"></script>
<link href="site_libs/font-awesome-5.0.13/css/fa-svg-with-js.css" rel="stylesheet" />
<script src="site_libs/font-awesome-5.0.13/js/fontawesome-all.min.js"></script>
<script src="site_libs/font-awesome-5.0.13/js/fa-v4-shims.min.js"></script>

<style type="text/css">code{white-space: pre;}</style>
<style type="text/css">
  pre:not([class]) {
    background-color: white;
  }
</style>
<script type="text/javascript">
if (window.hljs) {
  hljs.configure({languages: []});
  hljs.initHighlightingOnLoad();
  if (document.readyState && document.readyState === "complete") {
    window.setTimeout(function() { hljs.initHighlighting(); }, 0);
  }
}
</script>



<style type="text/css">
h1 {
  font-size: 34px;
}
h1.title {
  font-size: 38px;
}
h2 {
  font-size: 30px;
}
h3 {
  font-size: 24px;
}
h4 {
  font-size: 18px;
}
h5 {
  font-size: 16px;
}
h6 {
  font-size: 12px;
}
.table th:not([align]) {
  text-align: left;
}
#rmd-source-code {
  display: none;
}
</style>

<link rel="stylesheet" href="styles.css" type="text/css" />

</head>

<body>

<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
code {
  color: inherit;
  background-color: rgba(0, 0, 0, 0.04);
}
img {
  max-width:100%;
  height: auto;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
</style>


<style type="text/css">
/* padding for bootstrap navbar */
body {
  padding-top: 52px;
  padding-bottom: 40px;
}
/* offset scroll position for anchor links (for fixed navbar)  */
.section h1 {
  padding-top: 57px;
  margin-top: -57px;
}

.section h2 {
  padding-top: 57px;
  margin-top: -57px;
}
.section h3 {
  padding-top: 57px;
  margin-top: -57px;
}
.section h4 {
  padding-top: 57px;
  margin-top: -57px;
}
.section h5 {
  padding-top: 57px;
  margin-top: -57px;
}
.section h6 {
  padding-top: 57px;
  margin-top: -57px;
}
</style>

<script>
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark it active
  menuAnchor.parent().addClass('active');

  // if it's got a parent navbar menu mark it active as well
  menuAnchor.closest('li.dropdown').addClass('active');
});
</script>


<div class="container-fluid main-container">

<!-- tabsets -->
<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});
</script>

<!-- code folding -->
<style type="text/css">
.code-folding-btn { margin-bottom: 4px; }
</style>
<script>
$(document).ready(function () {
  window.initializeSourceEmbed("eda.Rmd");
  window.initializeCodeFolding("hide" === "show");
});
</script>






<div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">Renan Sallai Iwayama</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="eda.html">EDA</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="contact.html">
    <span class="fa fa-envelope fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="http://github.com/rsallaii">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="https://www.linkedin.com/in/rsallaii">
    <span class="fa fa-linkedin fa-lg"></span>
     
  </a>
</li>
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div class="fluid-row" id="header">

<div class="btn-group pull-right">
<button type="button" class="btn btn-default btn-xs dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><span>Code</span> <span class="caret"></span></button>
<ul class="dropdown-menu" style="min-width: 50px;">
<li><a id="rmd-show-all-code" href="#">Show All Code</a></li>
<li><a id="rmd-hide-all-code" href="#">Hide All Code</a></li>
<li role="separator" class="divider"></li>
<li><a id="rmd-download-source" href="#">Download Rmd</a></li>
</ul>
</div>



<h1 class="title toc-ignore">Diamonds Exploratory Data Analysis</h1>

</div>

<div id="TOC">
<ul>
<li><a href="#exploratory-data-analysis">Exploratory Data Analysis</a><ul>
<li><a href="#variables">Variables</a></li>
<li><a href="#price">Price</a></li>
<li><a href="#cs">4Cs</a><ul>
<li><a href="#carat">Carat</a></li>
<li><a href="#cut">Cut</a></li>
<li><a href="#color">Color</a></li>
<li><a href="#clarity">Clarity</a></li>
<li><a href="#cs-correlation">4Cs correlation</a></li>
</ul></li>
<li><a href="#others">Others</a></li>
</ul></li>
<li><a href="#linear-regression">Linear Regression</a></li>
<li><a href="#buying-an-engagement-ring">Buying an engagement ring</a></li>
</ul>
</div>

<ul>
<li>Name: Renan Sallai Iwayama</li>
<li>GitHub id: “rsallaii”</li>
</ul>
<style>
.table {
  width: auto;
}
ul, ol {
  padding-left: 18px;
}
pre, code, pre code {
  overflow: auto;
  white-space: pre;
  word-wrap: normal;
  background-color: #ffffff;
}
</style>
<div id="exploratory-data-analysis" class="section level1">
<h1>Exploratory Data Analysis</h1>
<p>Let’s do an Exploratory Data Analysis using the Diamond dataset available in the radiant package.</p>
<p>Diamond dataset contain the prices and other attributes of a sample of 3000 diamonds. The following analysis can be very helpful to understand which diamond properties drive diamond price.</p>
<p>But, what exactly a diamond is?</p>
<div class="figure">
<img src="images/diamonds.jpg" alt="diamonds" />
<p class="caption">diamonds</p>
</div>
<p>Diamond is a solid form of the element carbon with its atoms arranged in a crystal structure called diamond cubic. Diamonds are very rare and can only be created under conditions of high temperature and pressure over time. This extreme condition create a clear and colourless crystalline form of the pure carbon. Because of that, they acquire such a hardness that they can only be scratched only by other diamonds.</p>
<p>obs. Unfortunately, this dataset does not contain information about the country, brand and shape of the diamond that plays an important role in its price. Let’s assume that all diamonds are from the same country, same brand and have the same shape.</p>
<pre class="r"><code>## loading the data.
df &lt;- radiant.data::diamonds</code></pre>
<p>To start let’s explore the data structure and variable types using the function glimpse from dplyr:</p>
<pre class="r"><code>glimpse(df)</code></pre>
<pre><code>Observations: 3,000
Variables: 11
$ price   &lt;int&gt; 580, 650, 630, 706, 1080, 3082, 3328, 4229, 1895, 3546, 752, 13003, 814, 6115, 645, 3749, 2926, 765, 1140, 1158, 521, 6122, 5096, 9465, 3225, 743, 1273, 3830, 16386, 1866, 709, 8167, 658, 4502, 1970, 596, 15938, 18080, 802, 545, ...
$ carat   &lt;dbl&gt; 0.32, 0.34, 0.30, 0.35, 0.40, 0.60, 0.88, 0.93, 0.51, 1.01, 0.30, 2.01, 0.30, 1.00, 0.32, 1.01, 0.81, 0.40, 0.31, 0.40, 0.31, 1.04, 1.21, 1.04, 0.68, 0.33, 0.55, 1.14, 2.02, 0.59, 0.30, 1.22, 0.30, 0.90, 0.61, 0.34, 2.06, 2.32, 0...
$ clarity &lt;fct&gt; VS1, SI1, VS2, VVS2, VS2, VVS1, SI1, SI1, VVS2, SI2, VVS2, VS2, VVS2, VS2, VS1, SI2, SI2, SI1, VVS1, VVS2, SI1, VS2, VS2, VVS2, VVS1, SI1, SI2, SI2, SI1, IF, SI1, VS1, VS2, SI1, VVS2, VS2, SI2, SI1, VS2, VS1, SI1, VS2, SI1, VS2, ...
$ cut     &lt;fct&gt; Ideal, Very Good, Very Good, Ideal, Premium, Ideal, Ideal, Premium, Very Good, Good, Good, Premium, Ideal, Very Good, Premium, Premium, Good, Ideal, Ideal, Ideal, Good, Premium, Premium, Ideal, Good, Premium, Ideal, Premium, Fair...
$ color   &lt;fct&gt; H, G, G, H, F, E, I, E, G, E, D, I, D, D, G, I, D, I, F, E, H, G, J, G, G, E, E, H, D, I, D, H, E, E, H, G, G, H, F, H, F, I, H, E, F, G, I, D, E, H, F, G, F, F, D, G, G, F, G, I, G, H, F, F, G, E, E, E, G, I, E, J, H, G, D, F, D...
$ depth   &lt;dbl&gt; 61.0, 63.4, 63.1, 59.2, 62.6, 62.5, 61.7, 61.4, 63.4, 63.9, 63.6, 59.5, 62.4, 63.4, 61.4, 61.7, 63.6, 61.6, 60.6, 61.7, 64.0, 60.0, 61.9, 61.7, 61.9, 60.2, 62.0, 62.2, 65.0, 61.2, 62.2, 62.6, 61.8, 62.3, 60.5, 61.8, 59.0, 62.6, 6...
$ table   &lt;dbl&gt; 56.0, 57.0, 58.0, 56.0, 58.0, 53.7, 56.0, 57.0, 57.0, 58.0, 55.0, 60.0, 54.0, 57.0, 58.0, 60.0, 55.0, 56.0, 56.0, 55.0, 54.0, 58.0, 59.0, 56.0, 55.0, 58.0, 56.0, 61.0, 55.0, 58.0, 56.0, 56.0, 58.0, 56.0, 57.0, 56.0, 58.0, 57.0, 5...
$ x       &lt;dbl&gt; 4.43, 4.45, 4.27, 4.60, 4.72, 5.35, 6.14, 6.34, 5.09, 6.31, 4.25, 8.26, 4.30, 6.36, 4.36, 6.34, 5.91, 4.74, 4.44, 4.74, 4.31, 6.62, 6.84, 6.50, 5.63, 4.55, 5.27, 6.72, 7.94, 5.38, 4.30, 6.83, 4.26, 6.21, 5.52, 4.48, 8.30, 8.46, 4...
$ y       &lt;dbl&gt; 4.45, 4.42, 4.23, 4.65, 4.68, 5.43, 6.18, 6.23, 5.06, 6.37, 4.31, 8.21, 4.32, 6.32, 4.40, 6.40, 5.86, 4.68, 4.41, 4.76, 4.29, 6.54, 6.77, 6.54, 5.68, 4.49, 5.22, 6.64, 7.84, 5.41, 4.25, 6.87, 4.28, 6.14, 5.54, 4.52, 8.38, 8.52, 4...
$ z       &lt;dbl&gt; 2.71, 2.81, 2.68, 2.74, 2.94, 3.38, 3.80, 3.86, 3.22, 4.05, 2.72, 4.90, 2.69, 4.02, 2.69, 3.93, 3.74, 2.90, 2.68, 2.93, 2.75, 3.95, 4.21, 4.02, 3.50, 2.72, 3.25, 4.16, 5.13, 3.30, 2.66, 4.29, 2.64, 3.85, 3.35, 2.78, 4.92, 5.32, 2...
$ date    &lt;date&gt; 2012-02-26, 2012-02-26, 2012-02-26, 2012-02-26, 2012-02-26, 2012-02-26, 2012-02-26, 2012-02-26, 2012-02-26, 2012-02-26, 2012-02-26, 2012-02-26, 2012-02-26, 2012-02-26, 2012-02-26, 2012-02-26, 2012-02-26, 2012-02-26, 2012-02-26, ...</code></pre>
<div id="variables" class="section level2">
<h2>Variables</h2>
<p>price = price in US dollars ($338-$18,791)</p>
<p>carat = weight of the diamond (0.2-3.00)</p>
<p>clarity = a measurement of how clear the diamond is (I1 (worst), SI2, SI1, VS2, VS1, VVS2, VVS1, IF (best))</p>
<p>cut = quality of the cut (Fair, Good, Very Good, Premium, Ideal)</p>
<p>color = diamond color, from J (worst) to D (best)</p>
<p>depth = total depth percentage = z / mean(x, y) = 2 * z / (x + y) (54.2-70.80)</p>
<p>table = width of top of diamond relative to widest point (50-69)</p>
<p>x = length in mm (3.73-9.42)</p>
<p>y = width in mm (3.71-9.29)</p>
<p>z = depth in mm (2.33-5.58)</p>
<p>date = shipment date</p>
<pre class="r"><code>df &lt;- df %&gt;%
  mutate(year = year(date), month = month(date)) %&gt;%
  mutate(year=as.factor(year),month=as.factor(month))</code></pre>
<p>First, let’s look at the shipment date of the diamonds to understand how many diamonds per month are shipped:</p>
<pre class="r"><code>df %&gt;%
  group_by(year, month) %&gt;%
  summarize(qty=n()) %&gt;%
  ggplot(aes(x=month,y=qty,group=year)) + 
  geom_point(size=3) + 
  geom_line(size=0.5) + 
  facet_wrap(~year,nrow=1) + 
  theme(legend.position=&quot;none&quot;)</code></pre>
<p><img src="eda_files/figure-html/unnamed-chunk-4-1.png" width="75%" /></p>
<p>From this plot we can notice that there is not continuos shippment of diamonds and the quantities over the years/months vary a lot.</p>
<p>Now, let’s create some visualization and statistical analysis to understand how diamond properties affect price.</p>
</div>
<div id="price" class="section level2">
<h2>Price</h2>
<p>The distribution plot of the price shows that the price of diamonds is highly skweed to the right and most of them have a price bellow $5,000.</p>
<pre class="r"><code>visualize(
  df, 
  xvar = &quot;price&quot;,
  type = &quot;dist&quot;, 
  custom = FALSE
)</code></pre>
<p><img src="eda_files/figure-html/unnamed-chunk-5-1.png" width="75%" /></p>
</div>
<div id="cs" class="section level2">
<h2>4Cs</h2>
<p>Accordingly to <a href="https://www.bluenile.com/education/diamonds?track=NavEdu4c">BlueNile</a>, the 4 main properties of a diamond are Carat, Cut, Color and Clarity (4Cs):</p>
<ul>
<li><p>The term <a href="https://www.bluenile.com/education/diamonds/carat-weight">carat</a> actually refers to the diamond’s total weight and not its size.</p></li>
<li><p>The most important of the 4Cs is <a href="https://www.bluenile.com/education/diamonds/cut">cut</a> because it has the greatest influence on a diamond’s sparkle.</p></li>
<li><p>The second most important of the 4Cs is <a href="https://www.bluenile.com/education/diamonds/color">color</a>, which refers to a diamond’s lack of color. The less color, the higher the grade.</p></li>
<li><p>The least important of the 4Cs is usually <a href="https://www.bluenile.com/education/diamonds/clarity">clarity</a> because the tiny imperfections are often microscopic.</p></li>
</ul>
<pre class="r"><code>visualize(
  df, 
  xvar = c(&quot;carat&quot;, &quot;cut&quot;, &quot;color&quot;, &quot;clarity&quot;), 
  type = &quot;dist&quot;, 
  custom = FALSE
)</code></pre>
<p><img src="eda_files/figure-html/unnamed-chunk-6-1.png" width="75%" /></p>
<p>We can see in all the plots that the diamond properties are not evenly distributed. Specially, the carat plot is also very right skweed.</p>
<p>From the sellers perspective it is key to have the optimal range of diamonds that clients are looking forward to buy.</p>
<p>There is a clear trade-off in this decision because the inventory cost of a diamond is very expensive, but at the same time you want to offer as many combinations as possible of the 4Cs to the consumers.</p>
<p>That is one reason that companies like BlueNiles are growing fast with e-commerce.</p>
<div id="carat" class="section level3">
<h3>Carat</h3>
<div class="figure">
<img src="images/diamond_carat.jpg" alt="carat" />
<p class="caption">carat</p>
</div>
<p>Now, let’s check how price is related to carat with a scatter plot:</p>
<pre class="r"><code>visualize(
  diamonds, 
  xvar = &quot;carat&quot;, 
  yvar = &quot;price&quot;, 
  type = &quot;scatter&quot;, 
  nrobs = 1000, 
  check = c(&quot;line&quot;, &quot;loess&quot;), 
  custom = FALSE
)</code></pre>
<p><img src="eda_files/figure-html/unnamed-chunk-7-1.png" width="75%" /></p>
<p>There is a clear positive correlation between price and carat.</p>
<p>However, accordingly to BlueNile educational website “diamond prices increase exponentially with carat weight because the larger the carat, the more rare the diamond.”</p>
<p>That doesn’t seems to be true looking at this plot!</p>
<p>This is happening because there is no control for other specific characteristics of the dimaonds like Cut, Color and Clarity (e.g. Ideal, D, VS2 / 55 observations).</p>
<pre class="r"><code>visualize(
  df, 
  xvar = &quot;carat&quot;, 
  yvar = &quot;price&quot;, 
  type = &quot;scatter&quot;, 
  nrobs = 1000, 
  check = &quot;loess&quot;, 
  data_filter = &quot;color==&#39;D&#39;&amp;cut==&#39;Ideal&#39;&amp;clarity==&#39;VS2&#39;&quot;, 
  custom = FALSE
)</code></pre>
<p><img src="eda_files/figure-html/unnamed-chunk-8-1.png" width="75%" /></p>
<p>The filtered plot above shows that indeed the price grows exponentialy with the increase of carat size for that particular combination of cut, color and clarity (Ideal, D, VS2).</p>
<p>However, to generalize this finding we need to build a linear regression to control for cut, color and clarity.</p>
<p>Anyway, it would be better to find a clear linear relationship between price and carat. The loess line for carat seems to have some curvature and the points do not look randomly scattered around that line. Usually, a linear relationship can be found when a log transformation is applied to variables with skeweed distributions.</p>
<pre class="r"><code>visualize(
  diamonds, 
  xvar = &quot;carat&quot;, 
  yvar = &quot;price&quot;, 
  type = &quot;scatter&quot;, 
  nrobs = 1000, 
  check = &quot;line&quot;, 
  axes = c(&quot;log_x&quot;, &quot;log_y&quot;), 
  custom = FALSE
)</code></pre>
<p><img src="eda_files/figure-html/unnamed-chunk-9-1.png" width="75%" /></p>
<p>Yes, it worked! Now the linear relationship is more clear and we can expect log carat to be a strong predictor of the log of a diamond price.</p>
</div>
<div id="cut" class="section level3">
<h3>Cut</h3>
<div class="figure">
<img src="images/diamond_cut.jpg" alt="cut" />
<p class="caption">cut</p>
</div>
<p>Now, let’s check how log price is related to cut with a box-plot:</p>
<pre class="r"><code>visualize(
  diamonds, 
  xvar = &quot;cut&quot;, 
  yvar = &quot;price&quot;, 
  type = &quot;box&quot;, 
  axes = &quot;log_y&quot;, 
  custom = FALSE
)</code></pre>
<p><img src="eda_files/figure-html/unnamed-chunk-10-1.png" width="75%" /></p>
<p>The box-plot shows that the highest average mean price cames from the worst type of cut. That finding is oposite to my previous expectation. Accordingly to BlueNiles, cut was supposed to be the most important C since it affects the diamond sparkling.</p>
<p>Again, this is happening because there is no control for the other diamonds charateristics like Carat/Color/Clarity. Let’s check the relationship between cut and carat with another box-plot:</p>
<pre class="r"><code>visualize(
  diamonds, 
  xvar = &quot;cut&quot;, 
  yvar = &quot;carat&quot;, 
  type = &quot;box&quot;, 
  axes = &quot;log_y&quot;, 
  custom = FALSE
)</code></pre>
<p><img src="eda_files/figure-html/unnamed-chunk-11-1.png" width="75%" /></p>
<p>Indeed, the Fair cut have the highest mean of log carat. Therefore, diamonds with a lower cut in this dataset might have a higher price not because of the cut, but because of the higher carat size.</p>
<p>Now, let’s perform a Cross-tabs analysis with the categorical variable color:</p>
<pre class="r"><code>result &lt;- cross_tabs(diamonds, var1 = &quot;cut&quot;, var2 = &quot;color&quot;)
summary(result, check = c(&quot;observed&quot;, &quot;expected&quot;))</code></pre>
<pre><code>Cross-tabs
Data     : diamonds 
Variables: cut, color 
Null hyp.: there is no association between cut and color 
Alt. hyp.: there is an association between cut and color 

Observed:
          D     E     F     G     H     I     J     Total
Fair         15    14    17    16    21    11     7   101
Good         35    62    55    40    37    26    20   275
Very Good    77   140   136   131    95    59    39   677
Premium      92   144   119   156   132    83    45   771
Ideal       163   194   238   254   169   105    53 1,176
Total       382   554   565   597   454   284   164 3,000

Expected: (row total x column total) / total
          D        E        F        G        H        I        J        Total   
Fair         12.86    18.65    19.02    20.10    15.28     9.56     5.52   101.00
Good         35.02    50.78    51.79    54.73    41.62    26.03    15.03   275.00
Very Good    86.20   125.02   127.50   134.72   102.45    64.09    37.01   677.00
Premium      98.17   142.38   145.21   153.43   116.68    72.99    42.15   771.00
Ideal       149.74   217.17   221.48   234.02   177.97   111.33    64.29 1,176.00
Total       382.00   554.00   565.00   597.00   454.00   284.00   164.00 3,000.00

Chi-squared: 36.742 df(24), p.value 0.046 

0.0 % of cells have expected values below 5</code></pre>
<pre class="r"><code>plot(result, check = c(&quot;observed&quot;, &quot;expected&quot;), custom = FALSE)</code></pre>
<p><img src="eda_files/figure-html/unnamed-chunk-12-1.png" width="75%" /></p>
<p>Indeed, there is an association with cut and color. We can notice that there are less diamonds with a higher cut and higher color grade than expected (Color grade D is better than color grade J).</p>
<p>Finally, let’s perform a Cross-tabs analysis with the categorical variable clarity:</p>
<pre class="r"><code>result &lt;- cross_tabs(diamonds, var1 = &quot;cut&quot;, var2 = &quot;clarity&quot;)
summary(result, check = c(&quot;observed&quot;, &quot;expected&quot;))</code></pre>
<pre><code>Cross-tabs
Data     : diamonds 
Variables: cut, clarity 
Null hyp.: there is no association between cut and clarity 
Alt. hyp.: there is an association between cut and clarity 

Observed:
          I1    SI2   SI1   VS2   VS1   VVS2  VVS1  IF    Total
Fair         12    28    29    14    13     2     2     1   101
Good          4    62    93    52    33    12    15     4   275
Very Good     6   132   171   131    99    83    40    15   677
Premium      13   157   196   185   120    43    39    18   771
Ideal         5   150   232   279   177   144   128    61 1,176
Total        40   529   721   661   442   284   224    99 3,000

Expected: (row total x column total) / total
          I1       SI2      SI1      VS2      VS1      VVS2     VVS1     IF       Total   
Fair          1.35    17.81    24.27    22.25    14.88     9.56     7.54     3.33   101.00
Good          3.67    48.49    66.09    60.59    40.52    26.03    20.53     9.07   275.00
Very Good     9.03   119.38   162.71   149.17    99.74    64.09    50.55    22.34   677.00
Premium      10.28   135.95   185.30   169.88   113.59    72.99    57.57    25.44   771.00
Ideal        15.68   207.37   282.63   259.11   173.26   111.33    87.81    38.81 1,176.00
Total        40.00   529.00   721.00   661.00   442.00   284.00   224.00    99.00 3,000.00

Chi-squared: 251.740 df(*28*), p.value &lt; .001 

7.5 % of cells have expected values below 5
p.value for chi-squared statistics obtained using simulation (2,000 replicates)</code></pre>
<pre class="r"><code>plot(result, check = c(&quot;observed&quot;, &quot;expected&quot;), custom = FALSE)</code></pre>
<p><img src="eda_files/figure-html/unnamed-chunk-13-1.png" width="75%" /></p>
<p>Indeed, there is an association with cut and clarity. We can notice that there are less diamonds with a higher cut and higher clarity grade than expected (Clarity IF is better than I1).</p>
<p>However, to check if cut, color and clarity are good predictors of log price like carat let’s filter for a specific carat range (e.g. 1 to 1.25) to find out if cut, color and clarity can be good predictors of log price:</p>
<pre class="r"><code>visualize(
  diamonds, 
  xvar = c(&quot;clarity&quot;, &quot;cut&quot;, &quot;color&quot;), 
  yvar = &quot;price&quot;, 
  type = &quot;bar&quot;, 
  axes = &quot;log_y&quot;, 
  data_filter = &quot;carat&gt;=1 &amp; carat &lt;= 1.25&quot;, 
  custom = FALSE
)</code></pre>
<p><img src="eda_files/figure-html/unnamed-chunk-14-1.png" width="75%" /></p>
<p>Indeed, now we can see a positive relationship between these variables and mean log price. However, it seems that clarity is the most important of the Cs and not cut as pointed out by BlueNiles.</p>
</div>
<div id="color" class="section level3">
<h3>Color</h3>
<div class="figure">
<img src="images/diamond_color.jpg" alt="color" />
<p class="caption">color</p>
</div>
<p>Now, let’s explore the color propertie:</p>
<pre class="r"><code>visualize(
  diamonds, 
  xvar = &quot;color&quot;, 
  yvar = &quot;price&quot;, 
  type = &quot;bar&quot;, 
  axes = &quot;log_y&quot;, 
  custom = FALSE
)</code></pre>
<p><img src="eda_files/figure-html/unnamed-chunk-15-1.png" width="75%" /></p>
<p>Similar to cut, color grade is showing a negative relationship with mean log price.</p>
</div>
<div id="clarity" class="section level3">
<h3>Clarity</h3>
<div class="figure">
<img src="images/diamond_Clarity.jpg" alt="clarity" />
<p class="caption">clarity</p>
</div>
<p>Now, let’s explore the clarity propertie:</p>
<pre class="r"><code>visualize(
  diamonds, 
  xvar = &quot;clarity&quot;, 
  yvar = &quot;price&quot;, 
  type = &quot;bar&quot;, 
  axes = &quot;log_y&quot;, 
  custom = FALSE
)</code></pre>
<p><img src="eda_files/figure-html/unnamed-chunk-16-1.png" width="75%" /></p>
<p>Similar to cut and color, clarity grade is showing a negative relationship with mean log price.</p>
</div>
<div id="cs-correlation" class="section level3">
<h3>4Cs correlation</h3>
<p>Now, let’s check the correlation between the price and 4Cs to have a better understand about these variables:</p>
<pre class="r"><code>result &lt;- correlation(
  df, 
  vars = c(&quot;price&quot;,&quot;carat&quot;, &quot;cut&quot;, &quot;color&quot;, &quot;clarity&quot;)
)
summary(result)</code></pre>
<pre><code>Correlation
Data     : df 
Method   : pearson 
Variables: price, carat, cut, color, clarity 
Null hyp.: variables x and y are not correlated
Alt. hyp.: variables x and y are correlated

Correlation matrix:
        price carat cut   color
carat    0.93                  
cut     -0.06 -0.15            
color    0.16  0.27 -0.01      
clarity -0.16 -0.36  0.19  0.01

p.values:
        price carat cut   color
carat   -0.00                  
cut      0.00  0.00            
color    0.00  0.00  0.53      
clarity  0.00  0.00  0.00  0.48</code></pre>
<pre class="r"><code>plot(result, nrobs = -1)</code></pre>
<p><img src="eda_files/figure-html/unnamed-chunk-17-1.png" width="75%" /></p>
<p>Carat have significat correlations with all the other Cs. The correlation with color is positive while with cut and clarity negative. Cut and Clarity also have a significant positive correlation.</p>
</div>
</div>
<div id="others" class="section level2">
<h2>Others</h2>
<p><a href="images/diamond_anatomy.jpg">dimensions</a></p>
<p>We also have available information about depth, table and diamond dimensions.</p>
<p>It is possible to notice that depth and table have a lower variation and looks more like a normal distribution if compared to carat.</p>
<pre class="r"><code>visualize(
  diamonds, 
  xvar = c(&quot;depth&quot;, &quot;table&quot;, &quot;x&quot;, &quot;y&quot;, &quot;z&quot;), 
  type = &quot;dist&quot;, 
  custom = FALSE
)</code></pre>
<p><img src="eda_files/figure-html/unnamed-chunk-18-1.png" width="75%" /></p>
<p>Now, let’s check how these properties are related to price:</p>
<pre class="r"><code>visualize(
  diamonds, 
  xvar = c(&quot;depth&quot;, &quot;table&quot;, &quot;x&quot;, &quot;y&quot;, &quot;z&quot;), 
  yvar = &quot;price&quot;, 
  type = &quot;scatter&quot;, 
  nrobs = 1000, 
  check = &quot;line&quot;, 
  axes = &quot;log_y&quot;, 
  custom = FALSE
)</code></pre>
<p><img src="eda_files/figure-html/unnamed-chunk-19-1.png" width="75%" /></p>
<p>It seems that depth and table are not correlated with log price. On the other had, as I was expecting x, y and z have a positive correlation with log price.</p>
<p>It makes sense that the diamonds dimensions have influence in the price, specially because we discovered that carat (diamond weight) plays an important role in the diamond price and weight is correalted with volume.</p>
<p>However, we need to be cautions with these variables when including them in a predictive model of price because they are going to be very correlated with carat as well.</p>
<pre class="r"><code>result &lt;- correlation(
  df, 
  vars = c(&quot;price&quot;, &quot;carat&quot;, &quot;depth&quot;, &quot;table&quot;, &quot;x&quot;, &quot;y&quot;, &quot;z&quot;), 
  data_filter = &quot;carat&gt;=1 &amp; carat &lt;= 1.25&quot;
)
summary(result)</code></pre>
<pre><code>Correlation
Data     : df 
Method   : pearson 
Filter   : carat&gt;=1 &amp; carat &lt;= 1.25 
Variables: price, carat, depth, table, x, y, z 
Null hyp.: variables x and y are not correlated
Alt. hyp.: variables x and y are correlated

Correlation matrix:
      price carat depth table x     y    
carat  0.27                              
depth -0.11 -0.07                        
table -0.27 -0.11 -0.31                  
x      0.28  0.88 -0.46 -0.07            
y      0.35  0.88 -0.46 -0.09  0.95      
z      0.23  0.85  0.42 -0.36  0.61  0.60

p.values:
      price carat depth table x     y    
carat  0.00                              
depth  0.01  0.07                        
table  0.00  0.01  0.00                  
x      0.00  0.00  0.00  0.08            
y      0.00  0.00  0.00  0.02 -0.00      
z      0.00  0.00  0.00  0.00  0.00  0.00</code></pre>
<pre class="r"><code>plot(result, nrobs = -1)</code></pre>
<p><img src="eda_files/figure-html/unnamed-chunk-20-1.png" width="75%" /></p>
<p>Indeed, the dimensions of a diamond x, y and z are highly correlated with carat and among each other.</p>
<p>That concludes the exploratory data analysis and now it is possible to proceed to the construction of a predictive model of the log price of a diamond using Linear Regression.</p>
</div>
</div>
<div id="linear-regression" class="section level1">
<h1>Linear Regression</h1>
<p>Let’s start the Linear Regression model as simple as possible with just price as the response variable and carat as the explanatory variable.</p>
<pre class="r"><code>result &lt;- regress(df, rvar = &quot;price&quot;, evar = &quot;carat&quot;)
summary(result, sum_check = &quot;rmse&quot;)</code></pre>
<pre><code>Linear regression (OLS)
Data     : df 
Response variable    : price 
Explanatory variables: carat 
Null hyp.: the effect of carat on price is zero
Alt. hyp.: the effect of carat on price is not zero

             coefficient std.error t.value p.value    
 (Intercept)   -2243.850    52.788 -42.507  &lt; .001 ***
 carat          7744.134    57.078 135.675  &lt; .001 ***

Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1

R-squared: 0.86,  Adjusted R-squared: 0.86 
F-statistic: 18407.84 df(1,2998), p.value &lt; .001
Nr obs: 3,000 

Prediction error (RMSE):  1480.587 
Residual st.dev   (RSD):  1481.081 </code></pre>
<pre class="r"><code>plot(result, plots = &quot;dashboard&quot;, nrobs = 1000, custom = FALSE)</code></pre>
<p><img src="eda_files/figure-html/unnamed-chunk-21-1.png" width="75%" /></p>
<p>The carat coefficient of the linear regression indicates that if you increase the carat size of a diamond by 1 unit the price is expected to increase, on average, $7,744. The Intercepet does not have an interpretation because the price would never be negative. This model also have a high R-squared (.86)</p>
<p>However, to draw inferences from this linear regression it is important to check if the linear model assumptions are met with the charts above.</p>
<p>Unfortunately, the residuals are not normally distributed and the residual vs fitted plot shows that we have heteroscedasticity.</p>
<p>As expected before when the scatter plot was created the log-transformation is going to improve our results:</p>
<pre class="r"><code>## transform variable
df &lt;- mutate_ext(diamonds, .vars = vars(price, carat), .funs = log, .ext = &quot;_ln&quot;)
result &lt;- regress(df, rvar = &quot;price_ln&quot;, evar = &quot;carat_ln&quot;)
summary(result, sum_check = &quot;rmse&quot;)</code></pre>
<pre><code>Linear regression (OLS)
Data     : df 
Response variable    : price_ln 
Explanatory variables: carat_ln 
Null hyp.: the effect of carat_ln on price_ln is zero
Alt. hyp.: the effect of carat_ln on price_ln is not zero

             coefficient std.error  t.value p.value    
 (Intercept)       8.450     0.006 1457.046  &lt; .001 ***
 carat_ln          1.672     0.008  205.008  &lt; .001 ***

Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1

R-squared: 0.933,  Adjusted R-squared: 0.933 
F-statistic: 42028.29 df(1,2998), p.value &lt; .001
Nr obs: 3,000 

Prediction error (RMSE):  0.262 
Residual st.dev   (RSD):  0.262 </code></pre>
<pre class="r"><code>plot(result, plots = &quot;dashboard&quot;, nrobs = 1000, custom = FALSE)</code></pre>
<p><img src="eda_files/figure-html/unnamed-chunk-22-1.png" width="672" /></p>
<p>As expected the log transformation worked! Now, the errors distribution are closer to a normal distribution and the residual vs fitted plot doesn’t seem to have heteroscedasticity.</p>
<p>The R-squared also went up to .93.</p>
<p>Now, the interpretation of the coefficient change with the log-log transformation.</p>
<p>For a 1% increase in carats we expect, on average, to see a 1.672% increase in the price of a diamond.</p>
<p>For example, the average price for a carat size of 1 in this dataset would be $5,090 and our prediction would be $4,675.</p>
<p>However, if we look at the price distribution for carat==1 there is still a lot of variability:</p>
<pre class="r"><code>visualize(
  df, 
  xvar = &quot;price&quot;, 
  type = &quot;dist&quot;, 
  data_filter = &quot;carat==1&quot;, 
  custom = FALSE
)</code></pre>
<p><img src="eda_files/figure-html/unnamed-chunk-23-1.png" width="1008" /></p>
<p>Let’s check if we can do even better by adding the other Cs to the model.</p>
<pre class="r"><code>## transform variable
df &lt;- mutate_ext(diamonds, .vars = vars(price, carat), .funs = log, .ext = &quot;_ln&quot;)
result &lt;- regress(df, rvar = &quot;price_ln&quot;, evar = c(&quot;carat_ln&quot;,&quot;cut&quot;,&quot;color&quot;,&quot;clarity&quot;))
summary(result, sum_check = c(&quot;rmse&quot;, &quot;vif&quot;, &quot;confint&quot;))</code></pre>
<pre><code>Linear regression (OLS)
Data     : df 
Response variable    : price_ln 
Explanatory variables: carat_ln, cut, color, clarity 
Null hyp.: the effect of x on price_ln is zero
Alt. hyp.: the effect of x on price_ln is not zero

               coefficient std.error t.value p.value    
 (Intercept)         7.861     0.024 329.199  &lt; .001 ***
 carat_ln            1.882     0.005 400.444  &lt; .001 ***
 cut|Good            0.096     0.016   6.146  &lt; .001 ***
 cut|Very Good       0.124     0.014   8.628  &lt; .001 ***
 cut|Premium         0.149     0.014  10.473  &lt; .001 ***
 cut|Ideal           0.167     0.014  11.864  &lt; .001 ***
 color|E            -0.049     0.009  -5.539  &lt; .001 ***
 color|F            -0.090     0.009 -10.250  &lt; .001 ***
 color|G            -0.161     0.009 -18.291  &lt; .001 ***
 color|H            -0.243     0.009 -26.193  &lt; .001 ***
 color|I            -0.377     0.011 -35.836  &lt; .001 ***
 color|J            -0.489     0.013 -38.828  &lt; .001 ***
 clarity|SI2         0.414     0.022  18.833  &lt; .001 ***
 clarity|SI1         0.579     0.022  26.455  &lt; .001 ***
 clarity|VS2         0.730     0.022  33.135  &lt; .001 ***
 clarity|VS1         0.798     0.022  35.708  &lt; .001 ***
 clarity|VVS2        0.926     0.023  40.141  &lt; .001 ***
 clarity|VVS1        1.011     0.024  43.008  &lt; .001 ***
 clarity|IF          1.102     0.026  43.079  &lt; .001 ***

Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1

R-squared: 0.983,  Adjusted R-squared: 0.983 
F-statistic: 9702.019 df(18,2981), p.value &lt; .001
Nr obs: 3,000 

Prediction error (RMSE):  0.132 
Residual st.dev   (RSD):  0.132 

Variance Inflation Factors
    clarity carat_ln color   cut
VIF   1.341    1.310 1.138 1.114
Rsq   0.254    0.236 0.121 0.103

              coefficient   2.5%  97.5%   +/-
(Intercept)         7.861  7.814  7.908 0.047
carat_ln            1.882  1.872  1.891 0.009
cut|Good            0.096  0.065  0.126 0.031
cut|Very Good       0.124  0.096  0.152 0.028
cut|Premium         0.149  0.121  0.176 0.028
cut|Ideal           0.167  0.139  0.195 0.028
color|E            -0.049 -0.066 -0.032 0.017
color|F            -0.090 -0.108 -0.073 0.017
color|G            -0.161 -0.178 -0.143 0.017
color|H            -0.243 -0.261 -0.225 0.018
color|I            -0.377 -0.398 -0.357 0.021
color|J            -0.489 -0.514 -0.464 0.025
clarity|SI2         0.414  0.371  0.457 0.043
clarity|SI1         0.579  0.536  0.622 0.043
clarity|VS2         0.730  0.687  0.774 0.043
clarity|VS1         0.798  0.754  0.842 0.044
clarity|VVS2        0.926  0.880  0.971 0.045
clarity|VVS1        1.011  0.965  1.057 0.046
clarity|IF          1.102  1.052  1.153 0.050</code></pre>
<pre class="r"><code>plot(result, plots = &quot;dashboard&quot;, nrobs = 1000, custom = FALSE)</code></pre>
<p><img src="eda_files/figure-html/unnamed-chunk-24-1.png" width="672" /></p>
<p>The model is indeed better! The assumptions of the linear model are still satisfied and the R Squared is .983. Now, that we have added more variables it is important to check the Variance Inflation Factor (VIF), specially because we added variables that are correlated as shown previously in the EDA. However, the VIFs are still acceptable (&lt;4 as a rule fo thumb).</p>
<p>We can make the following interpretations of the coefficients:</p>
<p>For a 1% increase in carats we expect, on average, to see a 1.882% increase in the price of a diamond.</p>
<p>Compared to a diamond of clarity I1 we expect, on average, to pay 100x(exp(1.102)-1) = 201% more for a diamond of clarity IF, keeping all other variables in the model constant.</p>
<p>The coefficients for each of the levels of clarity imply that an increase in clarity will increase the price of diamond. Why then did the box-plot of clarity versus price show price decreasing with clarity? As commented before when we look at the box plot we are really seeing the effect of not only improving clarity on price but also the effect of the other diamond characteristics.</p>
<p>The same applies to color and cut:</p>
<p>Compared to a diamond of fair cut we expect, on average, to pay 100x(exp(0.167)-1) = 18% more for a diamond of ideal cut, keeping all other variables in the model constant.</p>
<p>Compared to a diamond of color D we expect, on average, to pay 100x(exp(-0.489)-1) = 38.7% less for a diamond of clarity J, keeping all other variables in the model constant.</p>
<p>Accordingly to BlueNile cut is the most important of the 4Cs, but it doesn’t specify important for what…</p>
<p>The linear regression model shows that at least for price cut is not the most important of the 4Cs and removing carat that is a numerical variable the categorical variables order of importance could be defined using the percentage variation range on price (clarity &gt; color &gt; cut).</p>
<p>With this final model the predicted the price for a diamond of 1 carat, cut = Ideal, color = E and clarity = VS2 would be $8,710. We just have 1 diamond with these 4Cs characteristics and it has a price of $6,043. Buying this diamond would be a great deal since the expected price is more than $2,000 more.&quot;</p>
</div>
<div id="buying-an-engagement-ring" class="section level1">
<h1>Buying an engagement ring</h1>
<div class="figure">
<img src="images/myProposal1.jpg" alt="MyProposal1" />
<p class="caption">MyProposal1</p>
</div>
<p>If you already decided to propose to your special one the natural next step should be figure out which engagement ring to buy. This decision is both emotional and rational. Basicaly you have two major considerations: your special one expectations and your financial situtation.</p>
<p>The previous analysis and model can definetely help you with finding the best trade-off between price and quality as well evaluate good deals available on the market. It is important to have in mind that your special one will love and appreciate the fact that you spent the effort to find the perfect ring. Most women are not looking to bankrupt you with unrealistic requirements.</p>
<p>Just make sure to get some guidance from friends and go on-line to find out more about it. The most important aspect is the surprise that you are going to make and how everything will be set up. Good luck!</p>
<div class="figure">
<img src="images/myProposal2.jpg" alt="MyProposal2" />
<p class="caption">MyProposal2</p>
</div>
</div>

<div id="rmd-source-code">LS0tDQp0aXRsZTogRGlhbW9uZHMgRXhwbG9yYXRvcnkgRGF0YSBBbmFseXNpcw0Kb3V0cHV0Og0KICBodG1sX2RvY3VtZW50Og0KICAgIGhpZ2hsaWdodDogdGV4dG1hdGUNCiAgICB0aGVtZTogc3BhY2VsYWINCiAgICBkZl9wcmludDogcGFnZWQNCiAgICB0b2M6IHllcw0KICAgIGNvZGVfZm9sZGluZzogaGlkZQ0KICAgIGNvZGVfZG93bmxvYWQ6IHRydWUNCi0tLQ0KDQoqIE5hbWU6IFJlbmFuIFNhbGxhaSBJd2F5YW1hDQoqIEdpdEh1YiBpZDogInJzYWxsYWlpIg0KDQpgYGB7ciByX3NldHVwLCBpbmNsdWRlID0gRkFMU0V9DQojIyBpbml0aWFsIHNldHRpbmdzDQprbml0cjo6b3B0c19jaHVuayRzZXQoDQogIGNvbW1lbnQgPSBOQSwNCiAgZWNobyA9IFRSVUUsDQogIGVycm9yID0gVFJVRSwNCiAgY2FjaGUgPSBGQUxTRSwNCiAgbWVzc2FnZSA9IEZBTFNFLA0KICBkcGkgPSA5NiwNCiAgd2FybmluZyA9IEZBTFNFDQopDQoNCiMjIHdpZHRoIHRvIHVzZSB3aGVuIHByaW50aW5nIHRhYmxlcyBldGMuDQpvcHRpb25zKA0KICB3aWR0aCA9IDI1MCwNCiAgc2NpcGVuID0gMTAwLA0KICBtYXgucHJpbnQgPSA1MDAwLA0KICBzdHJpbmdzQXNGYWN0b3JzID0gRkFMU0UNCikNCg0KIyMgbG9hZCByYWRpYW50IHBhY2thZ2VzIGlmIG5lZWRlZA0KaWYgKCFleGlzdHMoInJfZW52aXJvbm1lbnQiKSkgbGlicmFyeShyYWRpYW50KQ0KYGBgDQoNCjxzdHlsZT4NCi50YWJsZSB7DQogIHdpZHRoOiBhdXRvOw0KfQ0KdWwsIG9sIHsNCiAgcGFkZGluZy1sZWZ0OiAxOHB4Ow0KfQ0KcHJlLCBjb2RlLCBwcmUgY29kZSB7DQogIG92ZXJmbG93OiBhdXRvOw0KICB3aGl0ZS1zcGFjZTogcHJlOw0KICB3b3JkLXdyYXA6IG5vcm1hbDsNCiAgYmFja2dyb3VuZC1jb2xvcjogI2ZmZmZmZjsNCn0NCjwvc3R5bGU+DQoNCiMgRXhwbG9yYXRvcnkgRGF0YSBBbmFseXNpcw0KDQpMZXQncyBkbyBhbiBFeHBsb3JhdG9yeSBEYXRhIEFuYWx5c2lzIHVzaW5nIHRoZSBEaWFtb25kIGRhdGFzZXQgYXZhaWxhYmxlIGluIHRoZSByYWRpYW50IHBhY2thZ2UuDQoNCkRpYW1vbmQgZGF0YXNldCBjb250YWluIHRoZSBwcmljZXMgYW5kIG90aGVyIGF0dHJpYnV0ZXMgb2YgYSBzYW1wbGUgb2YgMzAwMCBkaWFtb25kcy4gDQpUaGUgZm9sbG93aW5nIGFuYWx5c2lzIGNhbiBiZSB2ZXJ5IGhlbHBmdWwgdG8gdW5kZXJzdGFuZCB3aGljaCBkaWFtb25kIHByb3BlcnRpZXMgZHJpdmUgZGlhbW9uZCBwcmljZS4NCg0KQnV0LCB3aGF0IGV4YWN0bHkgYSBkaWFtb25kIGlzPw0KDQohW2RpYW1vbmRzXShpbWFnZXMvZGlhbW9uZHMuanBnKQ0KDQpEaWFtb25kIGlzIGEgc29saWQgZm9ybSBvZiB0aGUgZWxlbWVudCBjYXJib24gd2l0aCBpdHMgYXRvbXMgYXJyYW5nZWQgaW4gYSBjcnlzdGFsIHN0cnVjdHVyZSBjYWxsZWQgZGlhbW9uZCBjdWJpYy4gRGlhbW9uZHMgYXJlIHZlcnkgcmFyZSBhbmQgY2FuIG9ubHkgYmUgY3JlYXRlZCB1bmRlciBjb25kaXRpb25zIG9mIGhpZ2ggdGVtcGVyYXR1cmUgYW5kIHByZXNzdXJlIG92ZXIgdGltZS4gVGhpcyBleHRyZW1lIGNvbmRpdGlvbiBjcmVhdGUgYSBjbGVhciBhbmQgY29sb3VybGVzcyBjcnlzdGFsbGluZSBmb3JtIG9mIHRoZSBwdXJlIGNhcmJvbi4gQmVjYXVzZSBvZiB0aGF0LCB0aGV5IGFjcXVpcmUgc3VjaCBhIGhhcmRuZXNzIHRoYXQgdGhleSBjYW4gb25seSBiZSBzY3JhdGNoZWQgb25seSBieSBvdGhlciBkaWFtb25kcy4NCg0Kb2JzLiBVbmZvcnR1bmF0ZWx5LCB0aGlzIGRhdGFzZXQgZG9lcyBub3QgY29udGFpbiBpbmZvcm1hdGlvbiBhYm91dCB0aGUgY291bnRyeSwgYnJhbmQgYW5kIHNoYXBlIG9mIHRoZSBkaWFtb25kIHRoYXQgcGxheXMgYW4gaW1wb3J0YW50IHJvbGUgaW4gaXRzIHByaWNlLiBMZXQncyBhc3N1bWUgdGhhdCBhbGwgZGlhbW9uZHMgYXJlIGZyb20gdGhlIHNhbWUgY291bnRyeSwgc2FtZSBicmFuZCBhbmQgaGF2ZSB0aGUgc2FtZSBzaGFwZS4NCg0KYGBge3J9DQojIyBsb2FkaW5nIHRoZSBkYXRhLg0KZGYgPC0gcmFkaWFudC5kYXRhOjpkaWFtb25kcw0KYGBgDQoNClRvIHN0YXJ0IGxldCdzIGV4cGxvcmUgdGhlIGRhdGEgc3RydWN0dXJlIGFuZCB2YXJpYWJsZSB0eXBlcyB1c2luZyB0aGUgZnVuY3Rpb24gZ2xpbXBzZSBmcm9tIGRwbHlyOg0KDQpgYGB7cn0NCmdsaW1wc2UoZGYpDQpgYGANCiMjIFZhcmlhYmxlcw0KDQpwcmljZSA9IHByaWNlIGluIFVTIGRvbGxhcnMgKGByICIkMzM4LSQxOCw3OTEiYCkNCg0KY2FyYXQgPSB3ZWlnaHQgb2YgdGhlIGRpYW1vbmQgKDAuMi0zLjAwKQ0KDQpjbGFyaXR5ID0gYSBtZWFzdXJlbWVudCBvZiBob3cgY2xlYXIgdGhlIGRpYW1vbmQgaXMgKEkxICh3b3JzdCksIFNJMiwgU0kxLCBWUzIsIFZTMSwgVlZTMiwgVlZTMSwgSUYgKGJlc3QpKQ0KDQpjdXQgPSBxdWFsaXR5IG9mIHRoZSBjdXQgKEZhaXIsIEdvb2QsIFZlcnkgR29vZCwgUHJlbWl1bSwgSWRlYWwpDQoNCmNvbG9yID0gZGlhbW9uZCBjb2xvciwgZnJvbSBKICh3b3JzdCkgdG8gRCAoYmVzdCkNCg0KZGVwdGggPSB0b3RhbCBkZXB0aCBwZXJjZW50YWdlID0geiAvIG1lYW4oeCwgeSkgPSAyICogeiAvICh4ICsgeSkgKDU0LjItNzAuODApDQoNCnRhYmxlID0gd2lkdGggb2YgdG9wIG9mIGRpYW1vbmQgcmVsYXRpdmUgdG8gd2lkZXN0IHBvaW50ICg1MC02OSkNCg0KeCA9IGxlbmd0aCBpbiBtbSAoMy43My05LjQyKQ0KDQp5ID0gd2lkdGggaW4gbW0gKDMuNzEtOS4yOSkNCg0KeiA9IGRlcHRoIGluIG1tICgyLjMzLTUuNTgpDQoNCmRhdGUgPSBzaGlwbWVudCBkYXRlDQoNCmBgYHtyfQ0KZGYgPC0gZGYgJT4lDQogIG11dGF0ZSh5ZWFyID0geWVhcihkYXRlKSwgbW9udGggPSBtb250aChkYXRlKSkgJT4lDQogIG11dGF0ZSh5ZWFyPWFzLmZhY3Rvcih5ZWFyKSxtb250aD1hcy5mYWN0b3IobW9udGgpKQ0KYGBgDQoNCkZpcnN0LCBsZXQncyBsb29rIGF0IHRoZSBzaGlwbWVudCBkYXRlIG9mIHRoZSBkaWFtb25kcyB0byB1bmRlcnN0YW5kIGhvdyBtYW55IGRpYW1vbmRzIHBlciBtb250aCBhcmUgc2hpcHBlZDoNCg0KYGBge3IgZmlnLndpZHRoID0gNywgZmlnLmhlaWdodCA9IDUsIGRwaSA9IDE0NCwgb3V0LndpZHRoID0gJzc1JSd9DQpkZiAlPiUNCiAgZ3JvdXBfYnkoeWVhciwgbW9udGgpICU+JQ0KICBzdW1tYXJpemUocXR5PW4oKSkgJT4lDQogIGdncGxvdChhZXMoeD1tb250aCx5PXF0eSxncm91cD15ZWFyKSkgKyANCiAgZ2VvbV9wb2ludChzaXplPTMpICsgDQogIGdlb21fbGluZShzaXplPTAuNSkgKyANCiAgZmFjZXRfd3JhcCh+eWVhcixucm93PTEpICsgDQogIHRoZW1lKGxlZ2VuZC5wb3NpdGlvbj0ibm9uZSIpDQoNCmBgYA0KDQpGcm9tIHRoaXMgcGxvdCB3ZSBjYW4gbm90aWNlIHRoYXQgdGhlcmUgaXMgbm90IGNvbnRpbnVvcyBzaGlwcG1lbnQgb2YgZGlhbW9uZHMgYW5kIHRoZSBxdWFudGl0aWVzIG92ZXIgdGhlIHllYXJzL21vbnRocyB2YXJ5IGEgbG90Lg0KDQpOb3csIGxldCdzIGNyZWF0ZSBzb21lIHZpc3VhbGl6YXRpb24gYW5kIHN0YXRpc3RpY2FsIGFuYWx5c2lzIHRvIHVuZGVyc3RhbmQgaG93IGRpYW1vbmQgcHJvcGVydGllcyBhZmZlY3QgcHJpY2UuDQoNCiMjIFByaWNlDQoNClRoZSBkaXN0cmlidXRpb24gcGxvdCBvZiB0aGUgcHJpY2Ugc2hvd3MgdGhhdCB0aGUgcHJpY2Ugb2YgZGlhbW9uZHMgaXMgaGlnaGx5IHNrd2VlZCB0byB0aGUgcmlnaHQgYW5kIG1vc3Qgb2YgdGhlbSBoYXZlIGEgcHJpY2UgYmVsbG93ICQ1LDAwMC4NCg0KYGBge3IgZmlnLndpZHRoID0gNywgZmlnLmhlaWdodCA9IDUsIGRwaSA9IDE0NCwgb3V0LndpZHRoID0gJzc1JSd9DQp2aXN1YWxpemUoDQogIGRmLCANCiAgeHZhciA9ICJwcmljZSIsDQogIHR5cGUgPSAiZGlzdCIsIA0KICBjdXN0b20gPSBGQUxTRQ0KKQ0KYGBgDQoNCiMjIDRDcw0KDQpBY2NvcmRpbmdseSB0byBbQmx1ZU5pbGVdKGh0dHBzOi8vd3d3LmJsdWVuaWxlLmNvbS9lZHVjYXRpb24vZGlhbW9uZHM/dHJhY2s9TmF2RWR1NGMpLCB0aGUgNCBtYWluIHByb3BlcnRpZXMgb2YgYSBkaWFtb25kIGFyZSBDYXJhdCwgQ3V0LCBDb2xvciBhbmQgQ2xhcml0eSAoNENzKToNCg0KLSBUaGUgdGVybSBbY2FyYXRdKGh0dHBzOi8vd3d3LmJsdWVuaWxlLmNvbS9lZHVjYXRpb24vZGlhbW9uZHMvY2FyYXQtd2VpZ2h0KSBhY3R1YWxseSByZWZlcnMgdG8gdGhlIGRpYW1vbmQncyB0b3RhbCB3ZWlnaHQgYW5kIG5vdCBpdHMgc2l6ZS4NCg0KLSBUaGUgbW9zdCBpbXBvcnRhbnQgb2YgdGhlIDRDcyBpcyBbY3V0XShodHRwczovL3d3dy5ibHVlbmlsZS5jb20vZWR1Y2F0aW9uL2RpYW1vbmRzL2N1dCkgYmVjYXVzZSBpdCBoYXMgdGhlIGdyZWF0ZXN0IGluZmx1ZW5jZSBvbiBhIGRpYW1vbmQncyBzcGFya2xlLg0KDQotIFRoZSBzZWNvbmQgbW9zdCBpbXBvcnRhbnQgb2YgdGhlIDRDcyBpcyBbY29sb3JdKGh0dHBzOi8vd3d3LmJsdWVuaWxlLmNvbS9lZHVjYXRpb24vZGlhbW9uZHMvY29sb3IpLCB3aGljaCByZWZlcnMgdG8gYSBkaWFtb25kJ3MgbGFjayBvZiBjb2xvci4gVGhlIGxlc3MgY29sb3IsIHRoZSBoaWdoZXIgdGhlIGdyYWRlLg0KDQotIFRoZSBsZWFzdCBpbXBvcnRhbnQgb2YgdGhlIDRDcyBpcyB1c3VhbGx5IFtjbGFyaXR5XShodHRwczovL3d3dy5ibHVlbmlsZS5jb20vZWR1Y2F0aW9uL2RpYW1vbmRzL2NsYXJpdHkpIGJlY2F1c2UgdGhlIHRpbnkgaW1wZXJmZWN0aW9ucyBhcmUgb2Z0ZW4gbWljcm9zY29waWMuDQoNCmBgYHtyIGZpZy53aWR0aCA9IDcsIGZpZy5oZWlnaHQgPSA1LCBkcGkgPSAxNDQsIG91dC53aWR0aCA9ICc3NSUnfQ0KdmlzdWFsaXplKA0KICBkZiwgDQogIHh2YXIgPSBjKCJjYXJhdCIsICJjdXQiLCAiY29sb3IiLCAiY2xhcml0eSIpLCANCiAgdHlwZSA9ICJkaXN0IiwgDQogIGN1c3RvbSA9IEZBTFNFDQopDQpgYGANCg0KV2UgY2FuIHNlZSBpbiBhbGwgdGhlIHBsb3RzIHRoYXQgdGhlIGRpYW1vbmQgcHJvcGVydGllcyBhcmUgbm90IGV2ZW5seSBkaXN0cmlidXRlZC4gU3BlY2lhbGx5LCB0aGUgY2FyYXQgcGxvdCBpcyBhbHNvIHZlcnkgcmlnaHQgc2t3ZWVkLg0KDQpGcm9tIHRoZSBzZWxsZXJzIHBlcnNwZWN0aXZlIGl0IGlzIGtleSB0byBoYXZlIHRoZSBvcHRpbWFsIHJhbmdlIG9mIGRpYW1vbmRzIHRoYXQgY2xpZW50cyBhcmUgbG9va2luZyBmb3J3YXJkIHRvIGJ1eS4gDQoNClRoZXJlIGlzIGEgY2xlYXIgdHJhZGUtb2ZmIGluIHRoaXMgZGVjaXNpb24gYmVjYXVzZSB0aGUgaW52ZW50b3J5IGNvc3Qgb2YgYSBkaWFtb25kIGlzIHZlcnkgZXhwZW5zaXZlLCBidXQgYXQgdGhlIHNhbWUgdGltZSB5b3Ugd2FudCB0byBvZmZlciBhcyBtYW55IGNvbWJpbmF0aW9ucyBhcyBwb3NzaWJsZSBvZiB0aGUgNENzIHRvIHRoZSBjb25zdW1lcnMuIA0KDQpUaGF0IGlzIG9uZSByZWFzb24gdGhhdCBjb21wYW5pZXMgbGlrZSBCbHVlTmlsZXMgYXJlIGdyb3dpbmcgZmFzdCB3aXRoIGUtY29tbWVyY2UuDQoNCiMjIyBDYXJhdA0KDQohW2NhcmF0XShpbWFnZXMvZGlhbW9uZF9jYXJhdC5qcGcpDQoNCk5vdywgbGV0J3MgY2hlY2sgaG93IHByaWNlIGlzIHJlbGF0ZWQgdG8gY2FyYXQgd2l0aCBhIHNjYXR0ZXIgcGxvdDoNCg0KYGBge3IgZmlnLndpZHRoID0gNywgZmlnLmhlaWdodCA9IDUsIGRwaSA9IDE0NCwgb3V0LndpZHRoID0gJzc1JSd9DQp2aXN1YWxpemUoDQogIGRpYW1vbmRzLCANCiAgeHZhciA9ICJjYXJhdCIsIA0KICB5dmFyID0gInByaWNlIiwgDQogIHR5cGUgPSAic2NhdHRlciIsIA0KICBucm9icyA9IDEwMDAsIA0KICBjaGVjayA9IGMoImxpbmUiLCAibG9lc3MiKSwgDQogIGN1c3RvbSA9IEZBTFNFDQopDQpgYGANCg0KVGhlcmUgaXMgYSBjbGVhciBwb3NpdGl2ZSBjb3JyZWxhdGlvbiBiZXR3ZWVuIHByaWNlIGFuZCBjYXJhdC4NCg0KSG93ZXZlciwgYWNjb3JkaW5nbHkgdG8gQmx1ZU5pbGUgZWR1Y2F0aW9uYWwgd2Vic2l0ZSAiZGlhbW9uZCBwcmljZXMgaW5jcmVhc2UgZXhwb25lbnRpYWxseSB3aXRoIGNhcmF0IHdlaWdodCBiZWNhdXNlIHRoZSBsYXJnZXIgdGhlIGNhcmF0LCB0aGUgbW9yZSByYXJlIHRoZSBkaWFtb25kLiINCg0KVGhhdCBkb2Vzbid0IHNlZW1zIHRvIGJlIHRydWUgbG9va2luZyBhdCB0aGlzIHBsb3QhIA0KDQpUaGlzIGlzIGhhcHBlbmluZyBiZWNhdXNlIHRoZXJlIGlzIG5vIGNvbnRyb2wgZm9yIG90aGVyIHNwZWNpZmljIGNoYXJhY3RlcmlzdGljcyBvZiB0aGUgZGltYW9uZHMgbGlrZSBDdXQsIENvbG9yIGFuZCBDbGFyaXR5IChlLmcuIElkZWFsLCBELCBWUzIgLyA1NSBvYnNlcnZhdGlvbnMpLg0KDQpgYGB7ciBmaWcud2lkdGggPSA3LCBmaWcuaGVpZ2h0ID0gNSwgZHBpID0gMTQ0LCBvdXQud2lkdGggPSAnNzUlJ30NCnZpc3VhbGl6ZSgNCiAgZGYsIA0KICB4dmFyID0gImNhcmF0IiwgDQogIHl2YXIgPSAicHJpY2UiLCANCiAgdHlwZSA9ICJzY2F0dGVyIiwgDQogIG5yb2JzID0gMTAwMCwgDQogIGNoZWNrID0gImxvZXNzIiwgDQogIGRhdGFfZmlsdGVyID0gImNvbG9yPT0nRCcmY3V0PT0nSWRlYWwnJmNsYXJpdHk9PSdWUzInIiwgDQogIGN1c3RvbSA9IEZBTFNFDQopDQpgYGANCg0KVGhlIGZpbHRlcmVkIHBsb3QgYWJvdmUgc2hvd3MgdGhhdCBpbmRlZWQgdGhlIHByaWNlIGdyb3dzIGV4cG9uZW50aWFseSB3aXRoIHRoZSBpbmNyZWFzZSBvZiBjYXJhdCBzaXplIGZvciB0aGF0IHBhcnRpY3VsYXIgY29tYmluYXRpb24gb2YgY3V0LCBjb2xvciBhbmQgY2xhcml0eSAoSWRlYWwsIEQsIFZTMikuDQoNCkhvd2V2ZXIsIHRvIGdlbmVyYWxpemUgdGhpcyBmaW5kaW5nIHdlIG5lZWQgdG8gYnVpbGQgYSBsaW5lYXIgcmVncmVzc2lvbiB0byBjb250cm9sIGZvciBjdXQsIGNvbG9yIGFuZCBjbGFyaXR5Lg0KDQpBbnl3YXksIGl0IHdvdWxkIGJlIGJldHRlciB0byBmaW5kIGEgY2xlYXIgbGluZWFyIHJlbGF0aW9uc2hpcCBiZXR3ZWVuIHByaWNlIGFuZCBjYXJhdC4NClRoZSBsb2VzcyBsaW5lIGZvciBjYXJhdCBzZWVtcyB0byBoYXZlIHNvbWUgY3VydmF0dXJlIGFuZCB0aGUgcG9pbnRzIGRvIG5vdCBsb29rIHJhbmRvbWx5IHNjYXR0ZXJlZCBhcm91bmQgdGhhdCBsaW5lLg0KVXN1YWxseSwgYSBsaW5lYXIgcmVsYXRpb25zaGlwIGNhbiBiZSBmb3VuZCB3aGVuIGEgbG9nIHRyYW5zZm9ybWF0aW9uIGlzIGFwcGxpZWQgdG8gdmFyaWFibGVzIHdpdGggc2tld2VlZCBkaXN0cmlidXRpb25zLg0KDQpgYGB7ciBmaWcud2lkdGggPSA3LCBmaWcuaGVpZ2h0ID0gNSwgZHBpID0gMTQ0LCBvdXQud2lkdGggPSAnNzUlJ30NCnZpc3VhbGl6ZSgNCiAgZGlhbW9uZHMsIA0KICB4dmFyID0gImNhcmF0IiwgDQogIHl2YXIgPSAicHJpY2UiLCANCiAgdHlwZSA9ICJzY2F0dGVyIiwgDQogIG5yb2JzID0gMTAwMCwgDQogIGNoZWNrID0gImxpbmUiLCANCiAgYXhlcyA9IGMoImxvZ194IiwgImxvZ195IiksIA0KICBjdXN0b20gPSBGQUxTRQ0KKQ0KYGBgDQoNClllcywgaXQgd29ya2VkISBOb3cgdGhlIGxpbmVhciByZWxhdGlvbnNoaXAgaXMgbW9yZSBjbGVhciBhbmQgd2UgY2FuIGV4cGVjdCBsb2cgY2FyYXQgIHRvIGJlIGEgc3Ryb25nIHByZWRpY3RvciBvZiB0aGUgbG9nIG9mIGEgZGlhbW9uZCBwcmljZS4NCg0KIyMjIEN1dA0KDQohW2N1dF0oaW1hZ2VzL2RpYW1vbmRfY3V0LmpwZykNCg0KTm93LCBsZXQncyBjaGVjayBob3cgbG9nIHByaWNlIGlzIHJlbGF0ZWQgdG8gY3V0IHdpdGggYSBib3gtcGxvdDoNCg0KYGBge3IgZmlnLndpZHRoID0gNywgZmlnLmhlaWdodCA9IDUsIGRwaSA9IDE0NCwgb3V0LndpZHRoID0gJzc1JSd9DQp2aXN1YWxpemUoDQogIGRpYW1vbmRzLCANCiAgeHZhciA9ICJjdXQiLCANCiAgeXZhciA9ICJwcmljZSIsIA0KICB0eXBlID0gImJveCIsIA0KICBheGVzID0gImxvZ195IiwgDQogIGN1c3RvbSA9IEZBTFNFDQopDQpgYGANCg0KVGhlIGJveC1wbG90IHNob3dzIHRoYXQgdGhlIGhpZ2hlc3QgYXZlcmFnZSBtZWFuIHByaWNlIGNhbWVzIGZyb20gdGhlIHdvcnN0IHR5cGUgb2YgY3V0LiBUaGF0IGZpbmRpbmcgaXMgb3Bvc2l0ZSB0byBteSBwcmV2aW91cyBleHBlY3RhdGlvbi4gQWNjb3JkaW5nbHkgdG8gQmx1ZU5pbGVzLCBjdXQgd2FzIHN1cHBvc2VkIHRvIGJlIHRoZSBtb3N0IGltcG9ydGFudCBDIHNpbmNlIGl0IGFmZmVjdHMgdGhlIGRpYW1vbmQgc3BhcmtsaW5nLiANCg0KQWdhaW4sIHRoaXMgaXMgaGFwcGVuaW5nIGJlY2F1c2UgdGhlcmUgaXMgbm8gY29udHJvbCBmb3IgdGhlIG90aGVyIGRpYW1vbmRzIGNoYXJhdGVyaXN0aWNzIGxpa2UgQ2FyYXQvQ29sb3IvQ2xhcml0eS4gTGV0J3MgY2hlY2sgdGhlIHJlbGF0aW9uc2hpcCBiZXR3ZWVuIGN1dCBhbmQgY2FyYXQgd2l0aCBhbm90aGVyIGJveC1wbG90Og0KDQpgYGB7ciBmaWcud2lkdGggPSA3LCBmaWcuaGVpZ2h0ID0gNSwgZHBpID0gMTQ0LCBvdXQud2lkdGggPSAnNzUlJ30NCnZpc3VhbGl6ZSgNCiAgZGlhbW9uZHMsIA0KICB4dmFyID0gImN1dCIsIA0KICB5dmFyID0gImNhcmF0IiwgDQogIHR5cGUgPSAiYm94IiwgDQogIGF4ZXMgPSAibG9nX3kiLCANCiAgY3VzdG9tID0gRkFMU0UNCikNCmBgYA0KDQpJbmRlZWQsIHRoZSBGYWlyIGN1dCBoYXZlIHRoZSBoaWdoZXN0IG1lYW4gb2YgbG9nIGNhcmF0LiBUaGVyZWZvcmUsIGRpYW1vbmRzIHdpdGggYSBsb3dlciBjdXQgaW4gdGhpcyBkYXRhc2V0IG1pZ2h0IGhhdmUgYSBoaWdoZXIgcHJpY2Ugbm90IGJlY2F1c2Ugb2YgdGhlIGN1dCwgYnV0IGJlY2F1c2Ugb2YgdGhlIGhpZ2hlciBjYXJhdCBzaXplLg0KDQpOb3csIGxldCdzIHBlcmZvcm0gYSBDcm9zcy10YWJzIGFuYWx5c2lzIHdpdGggdGhlIGNhdGVnb3JpY2FsIHZhcmlhYmxlIGNvbG9yOg0KDQpgYGB7ciBmaWcud2lkdGggPSA3LCBmaWcuaGVpZ2h0ID0gNSwgZHBpID0gMTQ0LCBvdXQud2lkdGggPSAnNzUlJ30NCnJlc3VsdCA8LSBjcm9zc190YWJzKGRpYW1vbmRzLCB2YXIxID0gImN1dCIsIHZhcjIgPSAiY29sb3IiKQ0Kc3VtbWFyeShyZXN1bHQsIGNoZWNrID0gYygib2JzZXJ2ZWQiLCAiZXhwZWN0ZWQiKSkNCnBsb3QocmVzdWx0LCBjaGVjayA9IGMoIm9ic2VydmVkIiwgImV4cGVjdGVkIiksIGN1c3RvbSA9IEZBTFNFKQ0KYGBgDQoNCkluZGVlZCwgdGhlcmUgaXMgYW4gYXNzb2NpYXRpb24gd2l0aCBjdXQgYW5kIGNvbG9yLiBXZSBjYW4gbm90aWNlIHRoYXQgdGhlcmUgYXJlIGxlc3MgZGlhbW9uZHMgd2l0aCBhIGhpZ2hlciBjdXQgYW5kIGhpZ2hlciBjb2xvciBncmFkZSB0aGFuIGV4cGVjdGVkIChDb2xvciBncmFkZSBEIGlzIGJldHRlciB0aGFuIGNvbG9yIGdyYWRlIEopLg0KDQpGaW5hbGx5LCBsZXQncyBwZXJmb3JtIGEgQ3Jvc3MtdGFicyBhbmFseXNpcyB3aXRoIHRoZSBjYXRlZ29yaWNhbCB2YXJpYWJsZSBjbGFyaXR5Og0KDQpgYGB7ciBmaWcud2lkdGggPSA3LCBmaWcuaGVpZ2h0ID0gNSwgZHBpID0gMTQ0LCBvdXQud2lkdGggPSAnNzUlJ30NCnJlc3VsdCA8LSBjcm9zc190YWJzKGRpYW1vbmRzLCB2YXIxID0gImN1dCIsIHZhcjIgPSAiY2xhcml0eSIpDQpzdW1tYXJ5KHJlc3VsdCwgY2hlY2sgPSBjKCJvYnNlcnZlZCIsICJleHBlY3RlZCIpKQ0KcGxvdChyZXN1bHQsIGNoZWNrID0gYygib2JzZXJ2ZWQiLCAiZXhwZWN0ZWQiKSwgY3VzdG9tID0gRkFMU0UpDQpgYGANCg0KSW5kZWVkLCB0aGVyZSBpcyBhbiBhc3NvY2lhdGlvbiB3aXRoIGN1dCBhbmQgY2xhcml0eS4gV2UgY2FuIG5vdGljZSB0aGF0IHRoZXJlIGFyZSBsZXNzIGRpYW1vbmRzIHdpdGggYSBoaWdoZXIgY3V0IGFuZCBoaWdoZXIgY2xhcml0eSBncmFkZSB0aGFuIGV4cGVjdGVkIChDbGFyaXR5IElGIGlzIGJldHRlciB0aGFuIEkxKS4NCg0KSG93ZXZlciwgdG8gY2hlY2sgaWYgY3V0LCBjb2xvciBhbmQgY2xhcml0eSBhcmUgZ29vZCBwcmVkaWN0b3JzIG9mIGxvZyBwcmljZSBsaWtlIGNhcmF0IGxldCdzIGZpbHRlciBmb3IgYSBzcGVjaWZpYyBjYXJhdCByYW5nZSAoZS5nLiAxIHRvIDEuMjUpIHRvIGZpbmQgb3V0IGlmIGN1dCwgY29sb3IgYW5kIGNsYXJpdHkgY2FuIGJlIGdvb2QgcHJlZGljdG9ycyBvZiBsb2cgcHJpY2U6DQoNCmBgYHtyIGZpZy53aWR0aCA9IDcsIGZpZy5oZWlnaHQgPSA1LCBkcGkgPSAxNDQsIG91dC53aWR0aCA9ICc3NSUnfQ0KdmlzdWFsaXplKA0KICBkaWFtb25kcywgDQogIHh2YXIgPSBjKCJjbGFyaXR5IiwgImN1dCIsICJjb2xvciIpLCANCiAgeXZhciA9ICJwcmljZSIsIA0KICB0eXBlID0gImJhciIsIA0KICBheGVzID0gImxvZ195IiwgDQogIGRhdGFfZmlsdGVyID0gImNhcmF0Pj0xICYgY2FyYXQgPD0gMS4yNSIsIA0KICBjdXN0b20gPSBGQUxTRQ0KKQ0KYGBgDQoNCkluZGVlZCwgbm93IHdlIGNhbiBzZWUgYSBwb3NpdGl2ZSByZWxhdGlvbnNoaXAgYmV0d2VlbiB0aGVzZSB2YXJpYWJsZXMgYW5kIG1lYW4gbG9nIHByaWNlLiBIb3dldmVyLCBpdCBzZWVtcyB0aGF0IGNsYXJpdHkgaXMgdGhlIG1vc3QgaW1wb3J0YW50IG9mIHRoZSBDcyBhbmQgbm90IGN1dCBhcyBwb2ludGVkIG91dCBieSBCbHVlTmlsZXMuDQoNCiMjIyBDb2xvcg0KDQohW2NvbG9yXShpbWFnZXMvZGlhbW9uZF9jb2xvci5qcGcpDQoNCk5vdywgbGV0J3MgZXhwbG9yZSB0aGUgY29sb3IgcHJvcGVydGllOg0KDQpgYGB7ciBmaWcud2lkdGggPSA3LCBmaWcuaGVpZ2h0ID0gNSwgZHBpID0gMTQ0LCBvdXQud2lkdGggPSAnNzUlJ30NCnZpc3VhbGl6ZSgNCiAgZGlhbW9uZHMsIA0KICB4dmFyID0gImNvbG9yIiwgDQogIHl2YXIgPSAicHJpY2UiLCANCiAgdHlwZSA9ICJiYXIiLCANCiAgYXhlcyA9ICJsb2dfeSIsIA0KICBjdXN0b20gPSBGQUxTRQ0KKQ0KYGBgDQoNClNpbWlsYXIgdG8gY3V0LCBjb2xvciBncmFkZSBpcyBzaG93aW5nIGEgbmVnYXRpdmUgcmVsYXRpb25zaGlwIHdpdGggbWVhbiBsb2cgcHJpY2UuDQoNCiMjIyBDbGFyaXR5DQoNCiFbY2xhcml0eV0oaW1hZ2VzL2RpYW1vbmRfQ2xhcml0eS5qcGcpDQoNCk5vdywgbGV0J3MgZXhwbG9yZSB0aGUgY2xhcml0eSBwcm9wZXJ0aWU6DQoNCmBgYHtyIGZpZy53aWR0aCA9IDcsIGZpZy5oZWlnaHQgPSA1LCBkcGkgPSAxNDQsIG91dC53aWR0aCA9ICc3NSUnfQ0KdmlzdWFsaXplKA0KICBkaWFtb25kcywgDQogIHh2YXIgPSAiY2xhcml0eSIsIA0KICB5dmFyID0gInByaWNlIiwgDQogIHR5cGUgPSAiYmFyIiwgDQogIGF4ZXMgPSAibG9nX3kiLCANCiAgY3VzdG9tID0gRkFMU0UNCikNCmBgYA0KDQpTaW1pbGFyIHRvIGN1dCBhbmQgY29sb3IsIGNsYXJpdHkgZ3JhZGUgaXMgc2hvd2luZyBhIG5lZ2F0aXZlIHJlbGF0aW9uc2hpcCB3aXRoIG1lYW4gbG9nIHByaWNlLg0KDQojIyMgNENzIGNvcnJlbGF0aW9uDQoNCk5vdywgbGV0J3MgY2hlY2sgdGhlIGNvcnJlbGF0aW9uIGJldHdlZW4gdGhlIHByaWNlIGFuZCA0Q3MgdG8gaGF2ZSBhIGJldHRlciB1bmRlcnN0YW5kIGFib3V0IHRoZXNlIHZhcmlhYmxlczoNCg0KYGBge3IgZmlnLndpZHRoID0gOS45NiwgZmlnLmhlaWdodCA9IDkuOTYsIGRwaSA9IDE0NCwgb3V0LndpZHRoID0gJzc1JSd9DQpyZXN1bHQgPC0gY29ycmVsYXRpb24oDQogIGRmLCANCiAgdmFycyA9IGMoInByaWNlIiwiY2FyYXQiLCAiY3V0IiwgImNvbG9yIiwgImNsYXJpdHkiKQ0KKQ0Kc3VtbWFyeShyZXN1bHQpDQpwbG90KHJlc3VsdCwgbnJvYnMgPSAtMSkNCmBgYA0KDQpDYXJhdCBoYXZlIHNpZ25pZmljYXQgY29ycmVsYXRpb25zIHdpdGggYWxsIHRoZSBvdGhlciBDcy4gVGhlIGNvcnJlbGF0aW9uIHdpdGggY29sb3IgaXMgcG9zaXRpdmUgd2hpbGUgd2l0aCBjdXQgYW5kIGNsYXJpdHkgbmVnYXRpdmUuIEN1dCBhbmQgQ2xhcml0eSBhbHNvIGhhdmUgYSBzaWduaWZpY2FudCBwb3NpdGl2ZSBjb3JyZWxhdGlvbi4NCg0KIyMgT3RoZXJzDQoNCltkaW1lbnNpb25zXShpbWFnZXMvZGlhbW9uZF9hbmF0b215LmpwZykNCg0KV2UgYWxzbyBoYXZlIGF2YWlsYWJsZSBpbmZvcm1hdGlvbiBhYm91dCBkZXB0aCwgdGFibGUgYW5kIGRpYW1vbmQgZGltZW5zaW9ucy4gDQoNCkl0IGlzIHBvc3NpYmxlIHRvIG5vdGljZSB0aGF0IGRlcHRoIGFuZCB0YWJsZSBoYXZlIGEgbG93ZXIgdmFyaWF0aW9uIGFuZCBsb29rcyBtb3JlIGxpa2UgYSBub3JtYWwgZGlzdHJpYnV0aW9uIGlmIGNvbXBhcmVkIHRvIGNhcmF0Lg0KDQpgYGB7ciBmaWcud2lkdGggPSA3LCBmaWcuaGVpZ2h0ID0gNSwgZHBpID0gMTQ0LCBvdXQud2lkdGggPSAnNzUlJ30NCnZpc3VhbGl6ZSgNCiAgZGlhbW9uZHMsIA0KICB4dmFyID0gYygiZGVwdGgiLCAidGFibGUiLCAieCIsICJ5IiwgInoiKSwgDQogIHR5cGUgPSAiZGlzdCIsIA0KICBjdXN0b20gPSBGQUxTRQ0KKQ0KYGBgDQoNCk5vdywgbGV0J3MgY2hlY2sgaG93IHRoZXNlIHByb3BlcnRpZXMgYXJlIHJlbGF0ZWQgdG8gcHJpY2U6DQoNCmBgYHtyIGZpZy53aWR0aCA9IDcsIGZpZy5oZWlnaHQgPSA1LCBkcGkgPSAxNDQsIG91dC53aWR0aCA9ICc3NSUnfQ0KdmlzdWFsaXplKA0KICBkaWFtb25kcywgDQogIHh2YXIgPSBjKCJkZXB0aCIsICJ0YWJsZSIsICJ4IiwgInkiLCAieiIpLCANCiAgeXZhciA9ICJwcmljZSIsIA0KICB0eXBlID0gInNjYXR0ZXIiLCANCiAgbnJvYnMgPSAxMDAwLCANCiAgY2hlY2sgPSAibGluZSIsIA0KICBheGVzID0gImxvZ195IiwgDQogIGN1c3RvbSA9IEZBTFNFDQopDQpgYGANCg0KSXQgc2VlbXMgdGhhdCBkZXB0aCBhbmQgdGFibGUgYXJlIG5vdCBjb3JyZWxhdGVkIHdpdGggbG9nIHByaWNlLiBPbiB0aGUgb3RoZXIgaGFkLCBhcyBJIHdhcyBleHBlY3RpbmcgeCwgeSBhbmQgeiBoYXZlIGEgcG9zaXRpdmUgY29ycmVsYXRpb24gd2l0aCBsb2cgcHJpY2UuIA0KDQpJdCBtYWtlcyBzZW5zZSB0aGF0IHRoZSBkaWFtb25kcyBkaW1lbnNpb25zIGhhdmUgaW5mbHVlbmNlIGluIHRoZSBwcmljZSwgc3BlY2lhbGx5IGJlY2F1c2Ugd2UgZGlzY292ZXJlZCB0aGF0IGNhcmF0IChkaWFtb25kIHdlaWdodCkgcGxheXMgYW4gaW1wb3J0YW50IHJvbGUgaW4gdGhlIGRpYW1vbmQgcHJpY2UgYW5kIHdlaWdodCBpcyBjb3JyZWFsdGVkIHdpdGggdm9sdW1lLiANCg0KSG93ZXZlciwgd2UgbmVlZCB0byBiZSBjYXV0aW9ucyB3aXRoIHRoZXNlIHZhcmlhYmxlcyB3aGVuIGluY2x1ZGluZyB0aGVtIGluIGEgcHJlZGljdGl2ZSBtb2RlbCBvZiBwcmljZSBiZWNhdXNlIHRoZXkgYXJlIGdvaW5nIHRvIGJlIHZlcnkgY29ycmVsYXRlZCB3aXRoIGNhcmF0IGFzIHdlbGwuDQoNCmBgYHtyIGZpZy53aWR0aCA9IDkuOTYsIGZpZy5oZWlnaHQgPSA5Ljk2LCBkcGkgPSAxNDQsIG91dC53aWR0aCA9ICc3NSUnfQ0KcmVzdWx0IDwtIGNvcnJlbGF0aW9uKA0KICBkZiwgDQogIHZhcnMgPSBjKCJwcmljZSIsICJjYXJhdCIsICJkZXB0aCIsICJ0YWJsZSIsICJ4IiwgInkiLCAieiIpLCANCiAgZGF0YV9maWx0ZXIgPSAiY2FyYXQ+PTEgJiBjYXJhdCA8PSAxLjI1Ig0KKQ0Kc3VtbWFyeShyZXN1bHQpDQpwbG90KHJlc3VsdCwgbnJvYnMgPSAtMSkNCmBgYA0KDQpJbmRlZWQsIHRoZSBkaW1lbnNpb25zIG9mIGEgZGlhbW9uZCB4LCB5IGFuZCB6IGFyZSBoaWdobHkgY29ycmVsYXRlZCB3aXRoIGNhcmF0IGFuZCBhbW9uZyBlYWNoIG90aGVyLg0KDQpUaGF0IGNvbmNsdWRlcyB0aGUgZXhwbG9yYXRvcnkgZGF0YSBhbmFseXNpcyBhbmQgbm93IGl0IGlzIHBvc3NpYmxlIHRvIHByb2NlZWQgdG8gdGhlIGNvbnN0cnVjdGlvbiBvZiBhIHByZWRpY3RpdmUgbW9kZWwgb2YgdGhlIGxvZyBwcmljZSBvZiBhIGRpYW1vbmQgdXNpbmcgTGluZWFyIFJlZ3Jlc3Npb24uDQoNCiMgTGluZWFyIFJlZ3Jlc3Npb24NCg0KTGV0J3Mgc3RhcnQgdGhlIExpbmVhciBSZWdyZXNzaW9uIG1vZGVsIGFzIHNpbXBsZSBhcyBwb3NzaWJsZSB3aXRoIGp1c3QgcHJpY2UgYXMgdGhlIHJlc3BvbnNlIHZhcmlhYmxlIGFuZCBjYXJhdCBhcyB0aGUgZXhwbGFuYXRvcnkgdmFyaWFibGUuDQoNCmBgYHtyIGZpZy53aWR0aCA9IDcsIGZpZy5oZWlnaHQgPSA4LjA4LCBkcGkgPSAxNDQsIG91dC53aWR0aCA9ICc3NSUnfQ0KcmVzdWx0IDwtIHJlZ3Jlc3MoZGYsIHJ2YXIgPSAicHJpY2UiLCBldmFyID0gImNhcmF0IikNCnN1bW1hcnkocmVzdWx0LCBzdW1fY2hlY2sgPSAicm1zZSIpDQpwbG90KHJlc3VsdCwgcGxvdHMgPSAiZGFzaGJvYXJkIiwgbnJvYnMgPSAxMDAwLCBjdXN0b20gPSBGQUxTRSkNCmBgYA0KDQpgciAiVGhlIGNhcmF0IGNvZWZmaWNpZW50IG9mIHRoZSBsaW5lYXIgcmVncmVzc2lvbiBpbmRpY2F0ZXMgdGhhdCBpZiB5b3UgaW5jcmVhc2UgdGhlIGNhcmF0IHNpemUgb2YgYSBkaWFtb25kIGJ5IDEgdW5pdCB0aGUgcHJpY2UgaXMgZXhwZWN0ZWQgdG8gaW5jcmVhc2UsIG9uIGF2ZXJhZ2UsICQ3LDc0NC4gVGhlIEludGVyY2VwZXQgZG9lcyBub3QgaGF2ZSBhbiBpbnRlcnByZXRhdGlvbiBiZWNhdXNlIHRoZSBwcmljZSB3b3VsZCBuZXZlciBiZSBuZWdhdGl2ZS4gVGhpcyBtb2RlbCBhbHNvIGhhdmUgYSBoaWdoIFItc3F1YXJlZCAoLjg2KSJgDQoNCkhvd2V2ZXIsIHRvIGRyYXcgaW5mZXJlbmNlcyBmcm9tIHRoaXMgbGluZWFyIHJlZ3Jlc3Npb24gaXQgaXMgaW1wb3J0YW50IHRvIGNoZWNrIGlmIHRoZSBsaW5lYXIgbW9kZWwgYXNzdW1wdGlvbnMgYXJlIG1ldCB3aXRoIHRoZSBjaGFydHMgYWJvdmUuDQoNClVuZm9ydHVuYXRlbHksIHRoZSByZXNpZHVhbHMgYXJlIG5vdCBub3JtYWxseSBkaXN0cmlidXRlZCBhbmQgdGhlIHJlc2lkdWFsIHZzIGZpdHRlZCBwbG90IHNob3dzIHRoYXQgd2UgaGF2ZSBoZXRlcm9zY2VkYXN0aWNpdHkuDQoNCkFzIGV4cGVjdGVkIGJlZm9yZSB3aGVuIHRoZSBzY2F0dGVyIHBsb3Qgd2FzIGNyZWF0ZWQgdGhlIGxvZy10cmFuc2Zvcm1hdGlvbiBpcyBnb2luZyB0byBpbXByb3ZlIG91ciByZXN1bHRzOg0KDQpgYGB7cn0NCiMjIHRyYW5zZm9ybSB2YXJpYWJsZQ0KZGYgPC0gbXV0YXRlX2V4dChkaWFtb25kcywgLnZhcnMgPSB2YXJzKHByaWNlLCBjYXJhdCksIC5mdW5zID0gbG9nLCAuZXh0ID0gIl9sbiIpDQpyZXN1bHQgPC0gcmVncmVzcyhkZiwgcnZhciA9ICJwcmljZV9sbiIsIGV2YXIgPSAiY2FyYXRfbG4iKQ0Kc3VtbWFyeShyZXN1bHQsIHN1bV9jaGVjayA9ICJybXNlIikNCnBsb3QocmVzdWx0LCBwbG90cyA9ICJkYXNoYm9hcmQiLCBucm9icyA9IDEwMDAsIGN1c3RvbSA9IEZBTFNFKQ0KYGBgDQoNCkFzIGV4cGVjdGVkIHRoZSBsb2cgdHJhbnNmb3JtYXRpb24gd29ya2VkISBOb3csIHRoZSBlcnJvcnMgZGlzdHJpYnV0aW9uIGFyZSBjbG9zZXIgdG8gYSBub3JtYWwgZGlzdHJpYnV0aW9uIGFuZCB0aGUgcmVzaWR1YWwgdnMgZml0dGVkIHBsb3QgZG9lc24ndCBzZWVtIHRvIGhhdmUgaGV0ZXJvc2NlZGFzdGljaXR5Lg0KDQpUaGUgUi1zcXVhcmVkIGFsc28gd2VudCB1cCB0byAuOTMuDQoNCk5vdywgdGhlIGludGVycHJldGF0aW9uIG9mIHRoZSBjb2VmZmljaWVudCBjaGFuZ2Ugd2l0aCB0aGUgbG9nLWxvZyB0cmFuc2Zvcm1hdGlvbi4NCg0KRm9yIGEgMSUgaW5jcmVhc2UgaW4gY2FyYXRzIHdlIGV4cGVjdCwgb24gYXZlcmFnZSwgdG8gc2VlIGEgMS42NzIlIGluY3JlYXNlIGluIHRoZSBwcmljZSBvZiBhIGRpYW1vbmQuDQoNCmByICJGb3IgZXhhbXBsZSwgdGhlIGF2ZXJhZ2UgcHJpY2UgZm9yIGEgY2FyYXQgc2l6ZSBvZiAxIGluIHRoaXMgZGF0YXNldCB3b3VsZCBiZSAkNSwwOTAgYW5kIG91ciBwcmVkaWN0aW9uIHdvdWxkIGJlICQ0LDY3NS4iYA0KDQpIb3dldmVyLCBpZiB3ZSBsb29rIGF0IHRoZSBwcmljZSBkaXN0cmlidXRpb24gZm9yIGNhcmF0PT0xIHRoZXJlIGlzIHN0aWxsIGEgbG90IG9mIHZhcmlhYmlsaXR5Og0KDQpgYGB7ciBmaWcud2lkdGggPSA3LCBmaWcuaGVpZ2h0ID0gNywgZHBpID0gMTQ0fQ0KdmlzdWFsaXplKA0KICBkZiwgDQogIHh2YXIgPSAicHJpY2UiLCANCiAgdHlwZSA9ICJkaXN0IiwgDQogIGRhdGFfZmlsdGVyID0gImNhcmF0PT0xIiwgDQogIGN1c3RvbSA9IEZBTFNFDQopDQpgYGANCg0KTGV0J3MgY2hlY2sgaWYgd2UgY2FuIGRvIGV2ZW4gYmV0dGVyIGJ5IGFkZGluZyB0aGUgb3RoZXIgQ3MgdG8gdGhlIG1vZGVsLg0KDQpgYGB7cn0NCiMjIHRyYW5zZm9ybSB2YXJpYWJsZQ0KZGYgPC0gbXV0YXRlX2V4dChkaWFtb25kcywgLnZhcnMgPSB2YXJzKHByaWNlLCBjYXJhdCksIC5mdW5zID0gbG9nLCAuZXh0ID0gIl9sbiIpDQpyZXN1bHQgPC0gcmVncmVzcyhkZiwgcnZhciA9ICJwcmljZV9sbiIsIGV2YXIgPSBjKCJjYXJhdF9sbiIsImN1dCIsImNvbG9yIiwiY2xhcml0eSIpKQ0Kc3VtbWFyeShyZXN1bHQsIHN1bV9jaGVjayA9IGMoInJtc2UiLCAidmlmIiwgImNvbmZpbnQiKSkNCnBsb3QocmVzdWx0LCBwbG90cyA9ICJkYXNoYm9hcmQiLCBucm9icyA9IDEwMDAsIGN1c3RvbSA9IEZBTFNFKQ0KYGBgDQoNClRoZSBtb2RlbCBpcyBpbmRlZWQgYmV0dGVyISBUaGUgYXNzdW1wdGlvbnMgb2YgdGhlIGxpbmVhciBtb2RlbCBhcmUgc3RpbGwgc2F0aXNmaWVkIGFuZCB0aGUgUiBTcXVhcmVkIGlzIC45ODMuIE5vdywgdGhhdCB3ZSBoYXZlIGFkZGVkIG1vcmUgdmFyaWFibGVzIGl0IGlzIGltcG9ydGFudCB0byBjaGVjayB0aGUgVmFyaWFuY2UgSW5mbGF0aW9uIEZhY3RvciAoVklGKSwgc3BlY2lhbGx5IGJlY2F1c2Ugd2UgYWRkZWQgdmFyaWFibGVzIHRoYXQgYXJlIGNvcnJlbGF0ZWQgYXMgc2hvd24gcHJldmlvdXNseSBpbiB0aGUgRURBLiBIb3dldmVyLCB0aGUgVklGcyBhcmUgc3RpbGwgYWNjZXB0YWJsZSAoPDQgYXMgYSBydWxlIGZvIHRodW1iKS4NCg0KV2UgY2FuIG1ha2UgdGhlIGZvbGxvd2luZyBpbnRlcnByZXRhdGlvbnMgb2YgdGhlIGNvZWZmaWNpZW50czoNCg0KRm9yIGEgMSUgaW5jcmVhc2UgaW4gY2FyYXRzIHdlIGV4cGVjdCwgb24gYXZlcmFnZSwgdG8gc2VlIGEgMS44ODIlIGluY3JlYXNlIGluIHRoZSBwcmljZSBvZiBhIGRpYW1vbmQuDQoNCkNvbXBhcmVkIHRvIGEgZGlhbW9uZCBvZiBjbGFyaXR5IEkxIHdlIGV4cGVjdCwgb24gYXZlcmFnZSwgdG8gcGF5IDEwMHgoZXhwKDEuMTAyKS0xKSA9IDIwMSUgbW9yZSBmb3IgYSBkaWFtb25kIG9mIGNsYXJpdHkgSUYsIGtlZXBpbmcgYWxsIG90aGVyIHZhcmlhYmxlcyBpbiB0aGUgbW9kZWwgY29uc3RhbnQuDQoNClRoZSBjb2VmZmljaWVudHMgZm9yIGVhY2ggb2YgdGhlIGxldmVscyBvZiBjbGFyaXR5IGltcGx5IHRoYXQgYW4gaW5jcmVhc2UgaW4gY2xhcml0eSB3aWxsIGluY3JlYXNlIHRoZSBwcmljZSBvZiBkaWFtb25kLiBXaHkgdGhlbiBkaWQgdGhlIGJveC1wbG90IG9mIGNsYXJpdHkgdmVyc3VzIHByaWNlIHNob3cgcHJpY2UgZGVjcmVhc2luZyB3aXRoIGNsYXJpdHk/IEFzIGNvbW1lbnRlZCBiZWZvcmUgd2hlbiB3ZSBsb29rIGF0IHRoZSBib3ggcGxvdCB3ZSBhcmUgcmVhbGx5IHNlZWluZyB0aGUgZWZmZWN0IG9mIG5vdCBvbmx5IGltcHJvdmluZyBjbGFyaXR5IG9uIHByaWNlIGJ1dCBhbHNvIHRoZSBlZmZlY3Qgb2YgdGhlIG90aGVyIGRpYW1vbmQgY2hhcmFjdGVyaXN0aWNzLg0KDQpUaGUgc2FtZSBhcHBsaWVzIHRvIGNvbG9yIGFuZCBjdXQ6DQoNCkNvbXBhcmVkIHRvIGEgZGlhbW9uZCBvZiBmYWlyIGN1dCB3ZSBleHBlY3QsIG9uIGF2ZXJhZ2UsIHRvIHBheSAxMDB4KGV4cCgwLjE2NyktMSkgPSAxOCUgbW9yZSBmb3IgYSBkaWFtb25kIG9mIGlkZWFsIGN1dCwga2VlcGluZyBhbGwgb3RoZXIgdmFyaWFibGVzIGluIHRoZSBtb2RlbCBjb25zdGFudC4NCg0KQ29tcGFyZWQgdG8gYSBkaWFtb25kIG9mIGNvbG9yIEQgd2UgZXhwZWN0LCBvbiBhdmVyYWdlLCB0byBwYXkgMTAweChleHAoLTAuNDg5KS0xKSA9IDM4LjclIGxlc3MgZm9yIGEgZGlhbW9uZCBvZiBjbGFyaXR5IEosIGtlZXBpbmcgYWxsIG90aGVyIHZhcmlhYmxlcyBpbiB0aGUgbW9kZWwgY29uc3RhbnQuDQoNCkFjY29yZGluZ2x5IHRvIEJsdWVOaWxlIGN1dCBpcyB0aGUgbW9zdCBpbXBvcnRhbnQgb2YgdGhlIDRDcywgYnV0IGl0IGRvZXNuJ3Qgc3BlY2lmeSBpbXBvcnRhbnQgZm9yIHdoYXQuLi4gDQoNClRoZSBsaW5lYXIgcmVncmVzc2lvbiBtb2RlbCBzaG93cyB0aGF0IGF0IGxlYXN0IGZvciBwcmljZSBjdXQgaXMgbm90IHRoZSBtb3N0IGltcG9ydGFudCBvZiB0aGUgNENzIGFuZCByZW1vdmluZyBjYXJhdCB0aGF0IGlzIGEgbnVtZXJpY2FsIHZhcmlhYmxlIHRoZSBjYXRlZ29yaWNhbCB2YXJpYWJsZXMgb3JkZXIgb2YgaW1wb3J0YW5jZSBjb3VsZCBiZSBkZWZpbmVkIHVzaW5nIHRoZSBwZXJjZW50YWdlIHZhcmlhdGlvbiByYW5nZSBvbiBwcmljZSAoY2xhcml0eSA+IGNvbG9yID4gY3V0KS4NCg0KYHIgIldpdGggdGhpcyBmaW5hbCBtb2RlbCB0aGUgcHJlZGljdGVkIHRoZSBwcmljZSBmb3IgYSBkaWFtb25kIG9mIDEgY2FyYXQsIGN1dCA9IElkZWFsLCBjb2xvciA9IEUgYW5kIGNsYXJpdHkgPSBWUzIgd291bGQgYmUgJDgsNzEwLiBXZSBqdXN0IGhhdmUgMSBkaWFtb25kIHdpdGggdGhlc2UgNENzIGNoYXJhY3RlcmlzdGljcyBhbmQgaXQgaGFzIGEgcHJpY2Ugb2YgJDYsMDQzLiBCdXlpbmcgdGhpcyBkaWFtb25kIHdvdWxkIGJlIGEgZ3JlYXQgZGVhbCBzaW5jZSB0aGUgZXhwZWN0ZWQgcHJpY2UgaXMgbW9yZSB0aGFuICQyLDAwMCBtb3JlLiJgIg0KDQojIEJ1eWluZyBhbiBlbmdhZ2VtZW50IHJpbmcNCg0KIVtNeVByb3Bvc2FsMV0oaW1hZ2VzL215UHJvcG9zYWwxLmpwZykNCg0KSWYgeW91IGFscmVhZHkgZGVjaWRlZCB0byBwcm9wb3NlIHRvIHlvdXIgc3BlY2lhbCBvbmUgdGhlIG5hdHVyYWwgbmV4dCBzdGVwIHNob3VsZCBiZSBmaWd1cmUgb3V0IHdoaWNoIGVuZ2FnZW1lbnQgcmluZyB0byBidXkuIFRoaXMgZGVjaXNpb24gaXMgYm90aCBlbW90aW9uYWwgYW5kIHJhdGlvbmFsLiBCYXNpY2FseSB5b3UgaGF2ZSB0d28gbWFqb3IgY29uc2lkZXJhdGlvbnM6IHlvdXIgc3BlY2lhbCBvbmUgZXhwZWN0YXRpb25zIGFuZCB5b3VyIGZpbmFuY2lhbCBzaXR1dGF0aW9uLg0KDQpUaGUgcHJldmlvdXMgYW5hbHlzaXMgYW5kIG1vZGVsIGNhbiBkZWZpbmV0ZWx5IGhlbHAgeW91IHdpdGggZmluZGluZyB0aGUgYmVzdCB0cmFkZS1vZmYgYmV0d2VlbiBwcmljZSBhbmQgcXVhbGl0eSBhcyB3ZWxsIGV2YWx1YXRlIGdvb2QgZGVhbHMgYXZhaWxhYmxlIG9uIHRoZSBtYXJrZXQuIEl0IGlzIGltcG9ydGFudCB0byBoYXZlIGluIG1pbmQgdGhhdCB5b3VyIHNwZWNpYWwgb25lIHdpbGwgbG92ZSBhbmQgYXBwcmVjaWF0ZSB0aGUgZmFjdCB0aGF0IHlvdSBzcGVudCB0aGUgZWZmb3J0IHRvIGZpbmQgdGhlIHBlcmZlY3QgcmluZy4gTW9zdCB3b21lbiBhcmUgbm90IGxvb2tpbmcgdG8gYmFua3J1cHQgeW91IHdpdGggdW5yZWFsaXN0aWMgcmVxdWlyZW1lbnRzLg0KDQpKdXN0IG1ha2Ugc3VyZSB0byBnZXQgc29tZSBndWlkYW5jZSBmcm9tIGZyaWVuZHMgYW5kIGdvIG9uLWxpbmUgdG8gZmluZCBvdXQgbW9yZSBhYm91dCBpdC4gVGhlIG1vc3QgaW1wb3J0YW50IGFzcGVjdCBpcyB0aGUgc3VycHJpc2UgdGhhdCB5b3UgYXJlIGdvaW5nIHRvIG1ha2UgYW5kIGhvdyBldmVyeXRoaW5nIHdpbGwgYmUgc2V0IHVwLiBHb29kIGx1Y2shDQoNCiFbTXlQcm9wb3NhbDJdKGltYWdlcy9teVByb3Bvc2FsMi5qcGcpDQo=</div>



</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.header').parent('thead').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
