<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">

<head>

<meta charset="utf-8" />
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="pandoc" />




<title>Diamonds and the 4Cs</title>

<script src="site_libs/jquery-1.11.3/jquery.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/spacelab.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<script src="site_libs/navigation-1.1/codefolding.js"></script>
<script src="site_libs/navigation-1.1/sourceembed.js"></script>
<link href="site_libs/highlightjs-9.12.0/textmate.css" rel="stylesheet" />
<script src="site_libs/highlightjs-9.12.0/highlight.js"></script>
<link href="site_libs/pagedtable-1.1/css/pagedtable.css" rel="stylesheet" />
<script src="site_libs/pagedtable-1.1/js/pagedtable.js"></script>
<link href="site_libs/font-awesome-5.0.13/css/fa-svg-with-js.css" rel="stylesheet" />
<script src="site_libs/font-awesome-5.0.13/js/fontawesome-all.min.js"></script>
<script src="site_libs/font-awesome-5.0.13/js/fa-v4-shims.min.js"></script>

<style type="text/css">code{white-space: pre;}</style>
<style type="text/css">
  pre:not([class]) {
    background-color: white;
  }
</style>
<script type="text/javascript">
if (window.hljs) {
  hljs.configure({languages: []});
  hljs.initHighlightingOnLoad();
  if (document.readyState && document.readyState === "complete") {
    window.setTimeout(function() { hljs.initHighlighting(); }, 0);
  }
}
</script>



<style type="text/css">
h1 {
  font-size: 34px;
}
h1.title {
  font-size: 38px;
}
h2 {
  font-size: 30px;
}
h3 {
  font-size: 24px;
}
h4 {
  font-size: 18px;
}
h5 {
  font-size: 16px;
}
h6 {
  font-size: 12px;
}
.table th:not([align]) {
  text-align: left;
}
#rmd-source-code {
  display: none;
}
</style>

<link rel="stylesheet" href="styles.css" type="text/css" />

</head>

<body>

<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
code {
  color: inherit;
  background-color: rgba(0, 0, 0, 0.04);
}
img {
  max-width:100%;
  height: auto;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
</style>


<style type="text/css">
/* padding for bootstrap navbar */
body {
  padding-top: 52px;
  padding-bottom: 40px;
}
/* offset scroll position for anchor links (for fixed navbar)  */
.section h1 {
  padding-top: 57px;
  margin-top: -57px;
}

.section h2 {
  padding-top: 57px;
  margin-top: -57px;
}
.section h3 {
  padding-top: 57px;
  margin-top: -57px;
}
.section h4 {
  padding-top: 57px;
  margin-top: -57px;
}
.section h5 {
  padding-top: 57px;
  margin-top: -57px;
}
.section h6 {
  padding-top: 57px;
  margin-top: -57px;
}
</style>

<script>
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark it active
  menuAnchor.parent().addClass('active');

  // if it's got a parent navbar menu mark it active as well
  menuAnchor.closest('li.dropdown').addClass('active');
});
</script>


<div class="container-fluid main-container">

<!-- tabsets -->
<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});
</script>

<!-- code folding -->
<style type="text/css">
.code-folding-btn { margin-bottom: 4px; }
</style>
<script>
$(document).ready(function () {
  window.initializeSourceEmbed("diamonds.Rmd");
  window.initializeCodeFolding("hide" === "show");
});
</script>






<div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">Renan Sallai Iwayama</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="diamonds.html">Diamonds and 4Cs (OLS)</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="contact.html">
    <span class="fa fa-envelope fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="http://github.com/rsallaii">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="https://www.linkedin.com/in/rsallaii">
    <span class="fa fa-linkedin fa-lg"></span>
     
  </a>
</li>
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div class="fluid-row" id="header">

<div class="btn-group pull-right">
<button type="button" class="btn btn-default btn-xs dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><span>Code</span> <span class="caret"></span></button>
<ul class="dropdown-menu" style="min-width: 50px;">
<li><a id="rmd-show-all-code" href="#">Show All Code</a></li>
<li><a id="rmd-hide-all-code" href="#">Hide All Code</a></li>
<li role="separator" class="divider"></li>
<li><a id="rmd-download-source" href="#">Download Rmd</a></li>
</ul>
</div>



<h1 class="title toc-ignore">Diamonds and the 4Cs</h1>

</div>

<div id="TOC">
<ul>
<li><a href="#exploratory-data-analysis">Exploratory Data Analysis</a><ul>
<li><a href="#variables">Variables</a></li>
<li><a href="#price">Price</a></li>
<li><a href="#cs">4Cs</a><ul>
<li><a href="#carat">Carat</a></li>
<li><a href="#cut">Cut</a></li>
<li><a href="#color">Color</a></li>
<li><a href="#clarity">Clarity</a></li>
</ul></li>
<li><a href="#others">Others</a></li>
</ul></li>
<li><a href="#linear-regression">Linear Regression</a></li>
<li><a href="#buying-an-engagement-ring">Buying an engagement ring</a></li>
</ul>
</div>

<ul>
<li>Name: Renan Sallai Iwayama</li>
<li>GitHub id: “rsallaii”</li>
</ul>
<style>
.table {
  width: auto;
}
ul, ol {
  padding-left: 18px;
}
pre, code, pre code {
  overflow: auto;
  white-space: pre;
  word-wrap: normal;
  background-color: #ffffff;
}
</style>
<div id="exploratory-data-analysis" class="section level1">
<h1>Exploratory Data Analysis</h1>
<p>Let’s do an Exploratory Data Analysis using the Diamond dataset available in the radiant package.</p>
<p>Diamond dataset contain the prices and other attributes of a sample of 3000 diamonds. The following analysis can be very helpful to understand which diamond properties drive diamond price.</p>
<p>But, what exactly a diamond is?</p>
<p><img src="images/diamonds.jpg" width="50%" /></p>
<p>Diamond is a solid form of the element carbon with its atoms arranged in a crystal structure called diamond cubic. Diamonds are very rare and can only be created under conditions of high temperature and pressure over time. This extreme condition create a clear and colourless crystalline form of the pure carbon. Because of that, they acquire such a hardness that they can only be scratched only by other diamonds.</p>
<p>obs. Unfortunately, this dataset does not contain information about the country, brand and shape of the diamond that plays an important role in its price. Let’s assume that all diamonds are from the same country, same brand and have the same shape.</p>
<pre class="r"><code>## loading the data.
df &lt;- radiant.data::diamonds</code></pre>
<p>To start let’s explore the data structure and variable types using the function glimpse from dplyr:</p>
<pre class="r"><code>glimpse(df)</code></pre>
<pre><code>Observations: 3,000
Variables: 11
$ price   &lt;int&gt; 580, 650, 630, 706, 1080, 3082, 3328, 4229, 1895, 3546, 752, 13003, 814, 6115, 645, 3749, 2926, 765, 1140, 1158, 521, 6122, 5096, 9465, 3225, 743, 1273, 3830, 16386, 1866, 709, 8167, 658, 4502, 1970, 596, 15938, 18080, 802, 545, ...
$ carat   &lt;dbl&gt; 0.32, 0.34, 0.30, 0.35, 0.40, 0.60, 0.88, 0.93, 0.51, 1.01, 0.30, 2.01, 0.30, 1.00, 0.32, 1.01, 0.81, 0.40, 0.31, 0.40, 0.31, 1.04, 1.21, 1.04, 0.68, 0.33, 0.55, 1.14, 2.02, 0.59, 0.30, 1.22, 0.30, 0.90, 0.61, 0.34, 2.06, 2.32, 0...
$ clarity &lt;fct&gt; VS1, SI1, VS2, VVS2, VS2, VVS1, SI1, SI1, VVS2, SI2, VVS2, VS2, VVS2, VS2, VS1, SI2, SI2, SI1, VVS1, VVS2, SI1, VS2, VS2, VVS2, VVS1, SI1, SI2, SI2, SI1, IF, SI1, VS1, VS2, SI1, VVS2, VS2, SI2, SI1, VS2, VS1, SI1, VS2, SI1, VS2, ...
$ cut     &lt;fct&gt; Ideal, Very Good, Very Good, Ideal, Premium, Ideal, Ideal, Premium, Very Good, Good, Good, Premium, Ideal, Very Good, Premium, Premium, Good, Ideal, Ideal, Ideal, Good, Premium, Premium, Ideal, Good, Premium, Ideal, Premium, Fair...
$ color   &lt;fct&gt; H, G, G, H, F, E, I, E, G, E, D, I, D, D, G, I, D, I, F, E, H, G, J, G, G, E, E, H, D, I, D, H, E, E, H, G, G, H, F, H, F, I, H, E, F, G, I, D, E, H, F, G, F, F, D, G, G, F, G, I, G, H, F, F, G, E, E, E, G, I, E, J, H, G, D, F, D...
$ depth   &lt;dbl&gt; 61.0, 63.4, 63.1, 59.2, 62.6, 62.5, 61.7, 61.4, 63.4, 63.9, 63.6, 59.5, 62.4, 63.4, 61.4, 61.7, 63.6, 61.6, 60.6, 61.7, 64.0, 60.0, 61.9, 61.7, 61.9, 60.2, 62.0, 62.2, 65.0, 61.2, 62.2, 62.6, 61.8, 62.3, 60.5, 61.8, 59.0, 62.6, 6...
$ table   &lt;dbl&gt; 56.0, 57.0, 58.0, 56.0, 58.0, 53.7, 56.0, 57.0, 57.0, 58.0, 55.0, 60.0, 54.0, 57.0, 58.0, 60.0, 55.0, 56.0, 56.0, 55.0, 54.0, 58.0, 59.0, 56.0, 55.0, 58.0, 56.0, 61.0, 55.0, 58.0, 56.0, 56.0, 58.0, 56.0, 57.0, 56.0, 58.0, 57.0, 5...
$ x       &lt;dbl&gt; 4.43, 4.45, 4.27, 4.60, 4.72, 5.35, 6.14, 6.34, 5.09, 6.31, 4.25, 8.26, 4.30, 6.36, 4.36, 6.34, 5.91, 4.74, 4.44, 4.74, 4.31, 6.62, 6.84, 6.50, 5.63, 4.55, 5.27, 6.72, 7.94, 5.38, 4.30, 6.83, 4.26, 6.21, 5.52, 4.48, 8.30, 8.46, 4...
$ y       &lt;dbl&gt; 4.45, 4.42, 4.23, 4.65, 4.68, 5.43, 6.18, 6.23, 5.06, 6.37, 4.31, 8.21, 4.32, 6.32, 4.40, 6.40, 5.86, 4.68, 4.41, 4.76, 4.29, 6.54, 6.77, 6.54, 5.68, 4.49, 5.22, 6.64, 7.84, 5.41, 4.25, 6.87, 4.28, 6.14, 5.54, 4.52, 8.38, 8.52, 4...
$ z       &lt;dbl&gt; 2.71, 2.81, 2.68, 2.74, 2.94, 3.38, 3.80, 3.86, 3.22, 4.05, 2.72, 4.90, 2.69, 4.02, 2.69, 3.93, 3.74, 2.90, 2.68, 2.93, 2.75, 3.95, 4.21, 4.02, 3.50, 2.72, 3.25, 4.16, 5.13, 3.30, 2.66, 4.29, 2.64, 3.85, 3.35, 2.78, 4.92, 5.32, 2...
$ date    &lt;date&gt; 2012-02-26, 2012-02-26, 2012-02-26, 2012-02-26, 2012-02-26, 2012-02-26, 2012-02-26, 2012-02-26, 2012-02-26, 2012-02-26, 2012-02-26, 2012-02-26, 2012-02-26, 2012-02-26, 2012-02-26, 2012-02-26, 2012-02-26, 2012-02-26, 2012-02-26, ...</code></pre>
<div id="variables" class="section level2">
<h2>Variables</h2>
<p>price = price in US dollars ($338-$18,791)</p>
<p>carat = weight of the diamond (0.2-3.00)</p>
<p>clarity = a measurement of how clear the diamond is (I1 (worst), SI2, SI1, VS2, VS1, VVS2, VVS1, IF (best))</p>
<p>cut = quality of the cut (Fair, Good, Very Good, Premium, Ideal)</p>
<p>color = diamond color, from J (worst) to D (best)</p>
<p>depth = total depth percentage = z / mean(x, y) = 2 * z / (x + y) (54.2-70.80)</p>
<p>table = width of top of diamond relative to widest point (50-69)</p>
<p>x = length in mm (3.73-9.42)</p>
<p>y = width in mm (3.71-9.29)</p>
<p>z = depth in mm (2.33-5.58)</p>
<p>date = shipment date</p>
<pre class="r"><code>df &lt;- df %&gt;%
  mutate(year = year(date), month = month(date)) %&gt;%
  mutate(year=as.factor(year),month=as.factor(month))</code></pre>
<p>First, let’s look at the shipment date of the diamonds to understand how many diamonds per month are shipped:</p>
<pre class="r"><code>df %&gt;%
  group_by(year, month) %&gt;%
  summarize(qty=n()) %&gt;%
  ggplot(aes(x=month,y=qty,group=year)) + 
  geom_point(size=3) + 
  geom_line(size=0.5) + 
  facet_wrap(~year,nrow=1) + 
  theme(legend.position=&quot;none&quot;)</code></pre>
<p><img src="diamonds_files/figure-html/unnamed-chunk-5-1.png" width="75%" /></p>
<p>From this plot we can notice that there is not continuos shippment of diamonds and the quantities over the years/months vary a lot.</p>
<p>Now, let’s create some visualization and statistical analysis to understand how diamond properties affect price.</p>
</div>
<div id="price" class="section level2">
<h2>Price</h2>
<p>The distribution plot of the price shows that the price of diamonds is highly skweed to the right and most of them have a price bellow $5,000.</p>
<pre class="r"><code>visualize(
  df, 
  xvar = &quot;price&quot;,
  type = &quot;dist&quot;, 
  custom = FALSE
)</code></pre>
<p><img src="diamonds_files/figure-html/unnamed-chunk-6-1.png" width="75%" /></p>
</div>
<div id="cs" class="section level2">
<h2>4Cs</h2>
<p>Accordingly to <a href="https://www.bluenile.com/education/diamonds?track=NavEdu4c">BlueNile</a>, the 4 main properties of a diamond are Carat, Cut, Color and Clarity (4Cs):</p>
<ul>
<li><p>The term <a href="https://www.bluenile.com/education/diamonds/carat-weight">carat</a> actually refers to the diamond’s total weight and not its size.</p></li>
<li><p>The most important of the 4Cs is <a href="https://www.bluenile.com/education/diamonds/cut">cut</a> because it has the greatest influence on a diamond’s sparkle.</p></li>
<li><p>The second most important of the 4Cs is <a href="https://www.bluenile.com/education/diamonds/color">color</a>, which refers to a diamond’s lack of color. The less color, the higher the grade.</p></li>
<li><p>The least important of the 4Cs is usually <a href="https://www.bluenile.com/education/diamonds/clarity">clarity</a> because the tiny imperfections are often microscopic.</p></li>
</ul>
<pre class="r"><code>visualize(
  df, 
  xvar = c(&quot;carat&quot;, &quot;cut&quot;, &quot;color&quot;, &quot;clarity&quot;), 
  type = &quot;dist&quot;, 
  custom = FALSE
)</code></pre>
<p><img src="diamonds_files/figure-html/unnamed-chunk-7-1.png" width="75%" /></p>
<p>We can see in all the plots that the diamond properties are not evenly distributed. Specially, the carat plot is also very right skweed.</p>
<p>From the sellers perspective it is key to have the optimal range of diamonds that clients are looking forward to buy.</p>
<p>There is a clear trade-off in this decision because the inventory cost of a diamond is very expensive, but at the same time you want to offer as many combinations as possible of the 4Cs to the consumers.</p>
<p>That is one reason that companies like BlueNiles are growing fast with e-commerce.</p>
<div id="carat" class="section level3">
<h3>Carat</h3>
<p><img src="images/diamond_carat.jpg" width="50%" /></p>
<p>Now, let’s check how price is related to carat with a scatter plot:</p>
<pre class="r"><code>visualize(
  diamonds, 
  xvar = &quot;carat&quot;, 
  yvar = &quot;price&quot;, 
  type = &quot;scatter&quot;, 
  nrobs = 1000, 
  check = c(&quot;line&quot;, &quot;loess&quot;), 
  custom = FALSE
)</code></pre>
<p><img src="diamonds_files/figure-html/unnamed-chunk-9-1.png" width="75%" /></p>
<p>There is a clear positive correlation between price and carat.</p>
<p>However, accordingly to BlueNile educational website “diamond prices increase exponentially with carat weight because the larger the carat, the more rare the diamond.”</p>
<p>That doesn’t seems to be true looking at this plot!</p>
<p>This is happening because there is no control for other specific characteristics of the dimaonds like Cut, Color and Clarity (e.g. Ideal, D, VS2 / 55 observations).</p>
<pre class="r"><code>visualize(
  df, 
  xvar = &quot;carat&quot;, 
  yvar = &quot;price&quot;, 
  type = &quot;scatter&quot;, 
  nrobs = 1000, 
  check = &quot;loess&quot;, 
  data_filter = &quot;color==&#39;D&#39;&amp;cut==&#39;Ideal&#39;&amp;clarity==&#39;VS2&#39;&quot;, 
  custom = FALSE
)</code></pre>
<p><img src="diamonds_files/figure-html/unnamed-chunk-10-1.png" width="75%" /></p>
<p>The filtered plot above shows that indeed the price grows exponentialy with the increase of carat size for that particular combination of cut, color and clarity (Ideal, D, VS2).</p>
<p>However, to generalize this finding we need to build a linear regression to control for cut, color and clarity. If we don’t consider this other characteristics we might cause an “omitted variable” bias.</p>
<p>Anyway, it would be better to find a clear linear relationship between price and carat. The loess line for carat seems to have some curvature and the points do not look randomly scattered around that line. Usually, a linear relationship can be found when a log transformation is applied to variables with skeweed distributions.</p>
<pre class="r"><code>visualize(
  diamonds, 
  xvar = &quot;carat&quot;, 
  yvar = &quot;price&quot;, 
  type = &quot;scatter&quot;, 
  nrobs = 1000, 
  check = &quot;line&quot;, 
  axes = c(&quot;log_x&quot;, &quot;log_y&quot;), 
  custom = FALSE
)</code></pre>
<p><img src="diamonds_files/figure-html/unnamed-chunk-11-1.png" width="75%" /></p>
<p>Yes, it worked! Now the linear relationship is more clear and we can expect log carat to be a strong predictor of the log of a diamond price.</p>
</div>
<div id="cut" class="section level3">
<h3>Cut</h3>
<p><img src="images/diamond_cut.jpg" width="50%" /></p>
<p>Now, let’s check how log price is related to cut with a box-plot:</p>
<pre class="r"><code>visualize(
  diamonds, 
  xvar = &quot;cut&quot;, 
  yvar = &quot;price&quot;, 
  type = &quot;box&quot;, 
  axes = &quot;log_y&quot;, 
  custom = FALSE
)</code></pre>
<p><img src="diamonds_files/figure-html/unnamed-chunk-13-1.png" width="50%" /></p>
<p>The box-plot shows that the highest average mean price cames from the worst type of cut. That finding is oposite to common intuition.</p>
<p>Again, this is happening because there is no control for the other diamonds charateristics like Carat/Color/Clarity. Let’s check the relationship between cut and carat with a linear regression:</p>
<pre class="r"><code>result &lt;- regress(df, rvar = &quot;carat&quot;, evar = &quot;cut&quot;)
summary(result)</code></pre>
<pre><code>Linear regression (OLS)
Data     : df 
Response variable    : carat 
Explanatory variables: cut 
Null hyp.: the effect of cut on carat is zero
Alt. hyp.: the effect of cut on carat is not zero

               coefficient std.error t.value p.value    
 (Intercept)         1.043     0.046  22.490  &lt; .001 ***
 cut|Good           -0.173     0.054  -3.185   0.001 ** 
 cut|Very Good      -0.237     0.050  -4.759  &lt; .001 ***
 cut|Premium        -0.174     0.049  -3.535  &lt; .001 ***
 cut|Ideal          -0.343     0.048  -7.108  &lt; .001 ***

Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1

R-squared: 0.034,  Adjusted R-squared: 0.033 
F-statistic: 26.199 df(4,2995), p.value &lt; .001
Nr obs: 3,000 </code></pre>
<p>The linear regression coefficients can be interpreted as following:</p>
<p>Compared to a diamond of Fair cut, on average, a diamond with Ideal cut is expected to have -0.343 carats.</p>
<p>Therefore, because of this negative ralationship between carat and cut we cannot see the price growing as the quality of the cut increases because we are not controling for the carat characteristic.</p>
</div>
<div id="color" class="section level3">
<h3>Color</h3>
<p><img src="images/diamond_color.jpg" width="75%" /></p>
<p>Now, let’s explore color:</p>
<pre class="r"><code>visualize(
  diamonds, 
  xvar = &quot;color&quot;, 
  yvar = &quot;price&quot;, 
  type = &quot;bar&quot;, 
  axes = &quot;log_y&quot;, 
  custom = FALSE
)</code></pre>
<p><img src="diamonds_files/figure-html/unnamed-chunk-16-1.png" width="75%" /></p>
<p>Similar to cut, color grade is showing a negative relationship with mean log price.</p>
<p>Again, this is happening because there is no control for the other diamonds charateristics like Carat/Cut/Clarity. Let’s check the relationship between color and carat with a linear regression:</p>
<pre class="r"><code>result &lt;- regress(df, rvar = &quot;carat&quot;, evar = &quot;color&quot;)
summary(result)</code></pre>
<pre><code>Linear regression (OLS)
Data     : df 
Response variable    : carat 
Explanatory variables: color 
Null hyp.: the effect of color on carat is zero
Alt. hyp.: the effect of color on carat is not zero

             coefficient std.error t.value p.value    
 (Intercept)       0.665     0.023  28.680  &lt; .001 ***
 color|E           0.014     0.030   0.459   0.646    
 color|F           0.063     0.030   2.083   0.037 *  
 color|G           0.108     0.030   3.642  &lt; .001 ***
 color|H           0.214     0.031   6.810  &lt; .001 ***
 color|I           0.335     0.036   9.438  &lt; .001 ***
 color|J           0.527     0.042  12.457  &lt; .001 ***

Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1

R-squared: 0.086,  Adjusted R-squared: 0.084 
F-statistic: 46.913 df(6,2993), p.value &lt; .001
Nr obs: 3,000 </code></pre>
<p>The linear regression coefficients can be interpreted as following:</p>
<p>Compared to a diamond of color D, on average, a diamond with color J is expected to have +0.527 carats.</p>
<p>Therefore, because of this negative ralationship between carat and color we cannot see the price reducing as the quality of the color decreases because we are not controling for the carat characteristic.</p>
</div>
<div id="clarity" class="section level3">
<h3>Clarity</h3>
<p><img src="images/diamond_clarity.jpg" width="50%" /></p>
<p>Now, let’s explore clarity:</p>
<pre class="r"><code>visualize(
  diamonds, 
  xvar = &quot;clarity&quot;, 
  yvar = &quot;price&quot;, 
  type = &quot;bar&quot;, 
  axes = &quot;log_y&quot;, 
  custom = FALSE
)</code></pre>
<p><img src="diamonds_files/figure-html/unnamed-chunk-19-1.png" width="75%" /></p>
<p>Similar to cut and color, clarity grade is showing a negative relationship with mean log price.</p>
<p>Again, this is happening because there is no control for the other diamonds charateristics like Carat/Color/Cut Let’s check the relationship between clarity and carat with a linear regression:</p>
<pre class="r"><code>result &lt;- regress(df, rvar = &quot;carat&quot;, evar = &quot;clarity&quot;)
summary(result)</code></pre>
<pre><code>Linear regression (OLS)
Data     : df 
Response variable    : carat 
Explanatory variables: clarity 
Null hyp.: the effect of clarity on carat is zero
Alt. hyp.: the effect of clarity on carat is not zero

              coefficient std.error t.value p.value    
 (Intercept)        1.301     0.069  18.754  &lt; .001 ***
 clarity|SI2       -0.223     0.072  -3.106   0.002 ** 
 clarity|SI1       -0.451     0.071  -6.328  &lt; .001 ***
 clarity|VS2       -0.548     0.071  -7.668  &lt; .001 ***
 clarity|VS1       -0.577     0.072  -7.964  &lt; .001 ***
 clarity|VVS2      -0.707     0.074  -9.544  &lt; .001 ***
 clarity|VVS1      -0.784     0.075 -10.410  &lt; .001 ***
 clarity|IF        -0.835     0.082 -10.163  &lt; .001 ***

Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1

R-squared: 0.145,  Adjusted R-squared: 0.143 
F-statistic: 72.415 df(7,2992), p.value &lt; .001
Nr obs: 3,000 </code></pre>
<p>The linear regression coefficients can be interpreted as following:</p>
<p>Compared to a diamond of I1 clarity, on average, a diamond with IF clarity is expected to have -0.835 carats.</p>
<p>Therefore, because of this negative ralationship between carat and cut we cannot see the price growing as the quality of the cut increases because we are not controling for the carat characteristic.</p>
</div>
</div>
<div id="others" class="section level2">
<h2>Others</h2>
<p><img src="images/diamond_anatomy.jpg" width="50%" /></p>
<p>We also have available information about depth, table and diamond dimensions.</p>
<p>It is possible to notice that depth and table have a lower variation and looks more like a normal distribution if compared to carat.</p>
<pre class="r"><code>visualize(
  diamonds, 
  xvar = c(&quot;depth&quot;, &quot;table&quot;, &quot;x&quot;, &quot;y&quot;, &quot;z&quot;), 
  type = &quot;dist&quot;, 
  custom = FALSE
)</code></pre>
<p><img src="diamonds_files/figure-html/unnamed-chunk-22-1.png" width="75%" /></p>
<p>Now, let’s check how these properties are related to price:</p>
<pre class="r"><code>visualize(
  diamonds, 
  xvar = c(&quot;depth&quot;, &quot;table&quot;, &quot;x&quot;, &quot;y&quot;, &quot;z&quot;), 
  yvar = &quot;price&quot;, 
  type = &quot;scatter&quot;, 
  nrobs = 1000, 
  check = &quot;line&quot;, 
  axes = &quot;log_y&quot;, 
  custom = FALSE
)</code></pre>
<p><img src="diamonds_files/figure-html/unnamed-chunk-23-1.png" width="75%" /></p>
<p>It seems that depth and table are not correlated with log price. On the other had, as I was expecting x, y and z have a positive correlation with log price.</p>
<p>It makes sense that the diamonds dimensions have influence in the price, specially because we discovered that carat (diamond weight) plays an important role in the diamond price and weight is correalted with volume.</p>
<p>However, we need to be cautions with these variables when including them in a predictive model of price because they are going to be very correlated with carat as well.</p>
<pre class="r"><code>result &lt;- correlation(
  df, 
  vars = c(&quot;price&quot;, &quot;carat&quot;, &quot;depth&quot;, &quot;table&quot;, &quot;x&quot;, &quot;y&quot;, &quot;z&quot;), 
  data_filter = &quot;carat&gt;=1 &amp; carat &lt;= 1.25&quot;
)
summary(result)</code></pre>
<pre><code>Correlation
Data     : df 
Method   : pearson 
Filter   : carat&gt;=1 &amp; carat &lt;= 1.25 
Variables: price, carat, depth, table, x, y, z 
Null hyp.: variables x and y are not correlated
Alt. hyp.: variables x and y are correlated

Correlation matrix:
      price carat depth table x     y    
carat  0.27                              
depth -0.11 -0.07                        
table -0.27 -0.11 -0.31                  
x      0.28  0.88 -0.46 -0.07            
y      0.35  0.88 -0.46 -0.09  0.95      
z      0.23  0.85  0.42 -0.36  0.61  0.60

p.values:
      price carat depth table x     y    
carat  0.00                              
depth  0.01  0.07                        
table  0.00  0.01  0.00                  
x      0.00  0.00  0.00  0.08            
y      0.00  0.00  0.00  0.02 -0.00      
z      0.00  0.00  0.00  0.00  0.00  0.00</code></pre>
<pre class="r"><code>plot(result, nrobs = -1)</code></pre>
<p><img src="diamonds_files/figure-html/unnamed-chunk-24-1.png" width="50%" /></p>
<p>Indeed, the dimensions of a diamond x, y and z are highly correlated with carat and among each other.</p>
<p>That concludes the exploratory data analysis and now it is possible to proceed to the construction of a predictive model of the log price of a diamond using Linear Regression.</p>
</div>
</div>
<div id="linear-regression" class="section level1">
<h1>Linear Regression</h1>
<p>Let’s start the Linear Regression model as simple as possible with just price as the response variable and carat as the explanatory variable.</p>
<pre class="r"><code>result &lt;- regress(df, rvar = &quot;price&quot;, evar = &quot;carat&quot;)
summary(result, sum_check = &quot;rmse&quot;)</code></pre>
<pre><code>Linear regression (OLS)
Data     : df 
Response variable    : price 
Explanatory variables: carat 
Null hyp.: the effect of carat on price is zero
Alt. hyp.: the effect of carat on price is not zero

             coefficient std.error t.value p.value    
 (Intercept)   -2243.850    52.788 -42.507  &lt; .001 ***
 carat          7744.134    57.078 135.675  &lt; .001 ***

Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1

R-squared: 0.86,  Adjusted R-squared: 0.86 
F-statistic: 18407.84 df(1,2998), p.value &lt; .001
Nr obs: 3,000 

Prediction error (RMSE):  1480.587 
Residual st.dev   (RSD):  1481.081 </code></pre>
<pre class="r"><code>plot(result, plots = &quot;dashboard&quot;, nrobs = 1000, custom = FALSE)</code></pre>
<p><img src="diamonds_files/figure-html/unnamed-chunk-25-1.png" width="50%" /></p>
<p>The carat coefficient of the linear regression indicates that if you increase the carat size of a diamond by 1 unit the price is expected to increase, on average, $7,744. The Intercepet does not have an interpretation because the price would never be negative. This model also have a high R-squared (.86)</p>
<p>However, to draw inferences from this linear regression it is important to check if the linear model assumptions are met with the charts above.</p>
<p>Unfortunately, the residuals are not normally distributed and the residual vs fitted plot shows that we have heteroscedasticity.</p>
<p>As expected before when the scatter plot was created the log-transformation is going to improve our results:</p>
<pre class="r"><code>## transform variable
df &lt;- mutate_ext(diamonds, .vars = vars(price, carat), .funs = log, .ext = &quot;_ln&quot;)
result &lt;- regress(df, rvar = &quot;price_ln&quot;, evar = &quot;carat_ln&quot;)
summary(result, sum_check = &quot;rmse&quot;)</code></pre>
<pre><code>Linear regression (OLS)
Data     : df 
Response variable    : price_ln 
Explanatory variables: carat_ln 
Null hyp.: the effect of carat_ln on price_ln is zero
Alt. hyp.: the effect of carat_ln on price_ln is not zero

             coefficient std.error  t.value p.value    
 (Intercept)       8.450     0.006 1457.046  &lt; .001 ***
 carat_ln          1.672     0.008  205.008  &lt; .001 ***

Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1

R-squared: 0.933,  Adjusted R-squared: 0.933 
F-statistic: 42028.29 df(1,2998), p.value &lt; .001
Nr obs: 3,000 

Prediction error (RMSE):  0.262 
Residual st.dev   (RSD):  0.262 </code></pre>
<pre class="r"><code>plot(result, plots = &quot;dashboard&quot;, nrobs = 1000, custom = FALSE)</code></pre>
<p><img src="diamonds_files/figure-html/unnamed-chunk-26-1.png" width="50%" /></p>
<p>As expected the log transformation worked! Now, the errors distribution are closer to a normal distribution and the residual vs fitted plot doesn’t seem to have heteroscedasticity.</p>
<p>The R-squared also went up to .93.</p>
<p>Now, the interpretation of the coefficient change with the log-log transformation.</p>
<p>For a 1% increase in carats we expect, on average, to see a 1.672% increase in the price of a diamond.</p>
<p>For example, the average price for a carat size of 1 in this dataset would be $5,090 and our prediction would be $4,675.</p>
<p>However, if we look at the price distribution for carat==1 there is still a lot of variability:</p>
<pre class="r"><code>visualize(
  df, 
  xvar = &quot;price&quot;, 
  type = &quot;dist&quot;, 
  data_filter = &quot;carat==1&quot;, 
  custom = FALSE
)</code></pre>
<p><img src="diamonds_files/figure-html/unnamed-chunk-27-1.png" width="40%" /></p>
<p>Let’s check if we can do even better by adding the other Cs to the model.</p>
<pre class="r"><code>## transform variable
df &lt;- mutate_ext(diamonds, .vars = vars(price, carat), .funs = log, .ext = &quot;_ln&quot;)
result &lt;- regress(df, rvar = &quot;price_ln&quot;, evar = c(&quot;carat_ln&quot;,&quot;cut&quot;,&quot;color&quot;,&quot;clarity&quot;))
summary(result, sum_check = c(&quot;rmse&quot;, &quot;vif&quot;, &quot;confint&quot;))</code></pre>
<pre><code>Linear regression (OLS)
Data     : df 
Response variable    : price_ln 
Explanatory variables: carat_ln, cut, color, clarity 
Null hyp.: the effect of x on price_ln is zero
Alt. hyp.: the effect of x on price_ln is not zero

               coefficient std.error t.value p.value    
 (Intercept)         7.861     0.024 329.199  &lt; .001 ***
 carat_ln            1.882     0.005 400.444  &lt; .001 ***
 cut|Good            0.096     0.016   6.146  &lt; .001 ***
 cut|Very Good       0.124     0.014   8.628  &lt; .001 ***
 cut|Premium         0.149     0.014  10.473  &lt; .001 ***
 cut|Ideal           0.167     0.014  11.864  &lt; .001 ***
 color|E            -0.049     0.009  -5.539  &lt; .001 ***
 color|F            -0.090     0.009 -10.250  &lt; .001 ***
 color|G            -0.161     0.009 -18.291  &lt; .001 ***
 color|H            -0.243     0.009 -26.193  &lt; .001 ***
 color|I            -0.377     0.011 -35.836  &lt; .001 ***
 color|J            -0.489     0.013 -38.828  &lt; .001 ***
 clarity|SI2         0.414     0.022  18.833  &lt; .001 ***
 clarity|SI1         0.579     0.022  26.455  &lt; .001 ***
 clarity|VS2         0.730     0.022  33.135  &lt; .001 ***
 clarity|VS1         0.798     0.022  35.708  &lt; .001 ***
 clarity|VVS2        0.926     0.023  40.141  &lt; .001 ***
 clarity|VVS1        1.011     0.024  43.008  &lt; .001 ***
 clarity|IF          1.102     0.026  43.079  &lt; .001 ***

Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1

R-squared: 0.983,  Adjusted R-squared: 0.983 
F-statistic: 9702.019 df(18,2981), p.value &lt; .001
Nr obs: 3,000 

Prediction error (RMSE):  0.132 
Residual st.dev   (RSD):  0.132 

Variance Inflation Factors
    clarity carat_ln color   cut
VIF   1.341    1.310 1.138 1.114
Rsq   0.254    0.236 0.121 0.103

              coefficient   2.5%  97.5%   +/-
(Intercept)         7.861  7.814  7.908 0.047
carat_ln            1.882  1.872  1.891 0.009
cut|Good            0.096  0.065  0.126 0.031
cut|Very Good       0.124  0.096  0.152 0.028
cut|Premium         0.149  0.121  0.176 0.028
cut|Ideal           0.167  0.139  0.195 0.028
color|E            -0.049 -0.066 -0.032 0.017
color|F            -0.090 -0.108 -0.073 0.017
color|G            -0.161 -0.178 -0.143 0.017
color|H            -0.243 -0.261 -0.225 0.018
color|I            -0.377 -0.398 -0.357 0.021
color|J            -0.489 -0.514 -0.464 0.025
clarity|SI2         0.414  0.371  0.457 0.043
clarity|SI1         0.579  0.536  0.622 0.043
clarity|VS2         0.730  0.687  0.774 0.043
clarity|VS1         0.798  0.754  0.842 0.044
clarity|VVS2        0.926  0.880  0.971 0.045
clarity|VVS1        1.011  0.965  1.057 0.046
clarity|IF          1.102  1.052  1.153 0.050</code></pre>
<pre class="r"><code>plot(result, plots = &quot;dashboard&quot;, nrobs = 1000, custom = FALSE)</code></pre>
<p><img src="diamonds_files/figure-html/unnamed-chunk-28-1.png" width="50%" /></p>
<p>The model is indeed better! The assumptions of the linear model are still satisfied and the R Squared is .983. Now, that we have added more variables it is important to check the Variance Inflation Factor (VIF), specially because we added variables that are correlated as shown previously in the EDA. However, the VIFs are still acceptable (&lt;5 as a rule fo thumb).</p>
<p>We can make the following interpretations of the coefficients:</p>
<p>For a 1% increase in carats we expect, on average, to see a 1.882% increase in the price of a diamond.</p>
<pre class="r"><code>pred &lt;- predict(result, pred_cmd = &quot;carat_ln=c(0,.1,.2,.3,.4,.5,.6,.7,.8,.9,1,1.25,1.5)&quot;)
pred &lt;- pred %&gt;%
  mutate(Prediction=exp(Prediction),carat=exp(carat_ln))
visualize(
  pred, 
  xvar = &quot;carat&quot;, 
  yvar = &quot;Prediction&quot;, 
  type = &quot;scatter&quot;, 
  nrobs = 1000, 
  check = c(&quot;loess&quot;), 
  custom = FALSE
)</code></pre>
<p><img src="diamonds_files/figure-html/unnamed-chunk-29-1.png" width="40%" /></p>
<p>Indeed, as stated by BlueNIle the price of the diamond increase exponentially with the carat size. Keeping all other diamond characteristics the same.</p>
<p>Compared to a diamond of clarity I1 we expect, on average, to pay 100x(exp(1.102)-1) = 201% more for a diamond of clarity IF, keeping all other variables in the model constant.</p>
<p>The coefficients for each of the levels of clarity imply that an increase in clarity will increase the price of diamond. Why then did the box-plot of clarity versus price show price decreasing with clarity? As commented before when we look at the box plot we are really seeing the effect of not only improving clarity on price but also the effect of the other diamond characteristics.</p>
<p>The same applies to color and cut:</p>
<p>Compared to a diamond of fair cut we expect, on average, to pay 100x(exp(0.167)-1) = 18% more for a diamond of ideal cut, keeping all other variables in the model constant.</p>
<p>Compared to a diamond of color D we expect, on average, to pay 100x(exp(-0.489)-1) = 38.7% less for a diamond of clarity J, keeping all other variables in the model constant.</p>
<p>Accordingly to BlueNile cut is the most important of the 4Cs because it is related to the dimaond sparkle.</p>
<p>However, the linear regression model shows that at least for price cut is not the most important of the 4Cs and removing carat that is a numerical variable the categorical variables order of importance could be defined using the percentage variation range on price (clarity &gt; color &gt; cut).</p>
<p>With this final model the predicted the price for a diamond of 1 carat, cut = Ideal, color = E and clarity = VS2 would be $8,710. We just have 1 diamond with these 4Cs characteristics and it has a price of $6,043. Buying this diamond would be a great deal since the expected price is more than $2,000 more.&quot;</p>
</div>
<div id="buying-an-engagement-ring" class="section level1">
<h1>Buying an engagement ring</h1>
<p><img src="images/myProposal1.jpg" width="25%" /></p>
<p>If you already decided to propose to your special one the natural next step should be figure out which engagement ring to buy. This decision is both emotional and rational. Basicaly you have two major considerations: your special one expectations and your financial situtation.</p>
<p>The previous analysis and model can definetely help you with finding the best trade-off between price and quality as well evaluate good deals available on the market. It is important to have in mind that your special one will love and appreciate the fact that you spent the effort to find the perfect ring. Most women are not looking to bankrupt you with unrealistic requirements.</p>
<p>Just make sure to get some guidance from friends and go on-line to find out more about it. The most important aspect is the surprise that you are going to make and how everything will be set up. Good luck!</p>
<p><img src="images/myProposal2.jpg" width="25%" /></p>
</div>

<div id="rmd-source-code">LS0tDQp0aXRsZTogIkRpYW1vbmRzIGFuZCB0aGUgNENzIg0Kb3V0cHV0Og0KICBodG1sX2RvY3VtZW50Og0KICAgIGhpZ2hsaWdodDogdGV4dG1hdGUNCiAgICB0aGVtZTogc3BhY2VsYWINCiAgICBkZl9wcmludDogcGFnZWQNCiAgICB0b2M6IHllcw0KICAgIGNvZGVfZm9sZGluZzogaGlkZQ0KICAgIGNvZGVfZG93bmxvYWQ6IHRydWUNCi0tLQ0KDQoqIE5hbWU6IFJlbmFuIFNhbGxhaSBJd2F5YW1hDQoqIEdpdEh1YiBpZDogInJzYWxsYWlpIg0KDQpgYGB7ciByX3NldHVwLCBpbmNsdWRlID0gRkFMU0V9DQojIyBpbml0aWFsIHNldHRpbmdzDQprbml0cjo6b3B0c19jaHVuayRzZXQoDQogIGNvbW1lbnQgPSBOQSwNCiAgZWNobyA9IFRSVUUsDQogIGVycm9yID0gVFJVRSwNCiAgY2FjaGUgPSBGQUxTRSwNCiAgbWVzc2FnZSA9IEZBTFNFLA0KICBkcGkgPSA5NiwNCiAgd2FybmluZyA9IEZBTFNFDQopDQoNCiMjIHdpZHRoIHRvIHVzZSB3aGVuIHByaW50aW5nIHRhYmxlcyBldGMuDQpvcHRpb25zKA0KICB3aWR0aCA9IDI1MCwNCiAgc2NpcGVuID0gMTAwLA0KICBtYXgucHJpbnQgPSA1MDAwLA0KICBzdHJpbmdzQXNGYWN0b3JzID0gRkFMU0UNCikNCg0KIyMgbG9hZCByYWRpYW50IHBhY2thZ2VzIGlmIG5lZWRlZA0KaWYgKCFleGlzdHMoInJfZW52aXJvbm1lbnQiKSkgbGlicmFyeShyYWRpYW50KQ0KYGBgDQoNCjxzdHlsZT4NCi50YWJsZSB7DQogIHdpZHRoOiBhdXRvOw0KfQ0KdWwsIG9sIHsNCiAgcGFkZGluZy1sZWZ0OiAxOHB4Ow0KfQ0KcHJlLCBjb2RlLCBwcmUgY29kZSB7DQogIG92ZXJmbG93OiBhdXRvOw0KICB3aGl0ZS1zcGFjZTogcHJlOw0KICB3b3JkLXdyYXA6IG5vcm1hbDsNCiAgYmFja2dyb3VuZC1jb2xvcjogI2ZmZmZmZjsNCn0NCjwvc3R5bGU+DQoNCiMgRXhwbG9yYXRvcnkgRGF0YSBBbmFseXNpcw0KDQpMZXQncyBkbyBhbiBFeHBsb3JhdG9yeSBEYXRhIEFuYWx5c2lzIHVzaW5nIHRoZSBEaWFtb25kIGRhdGFzZXQgYXZhaWxhYmxlIGluIHRoZSByYWRpYW50IHBhY2thZ2UuDQoNCkRpYW1vbmQgZGF0YXNldCBjb250YWluIHRoZSBwcmljZXMgYW5kIG90aGVyIGF0dHJpYnV0ZXMgb2YgYSBzYW1wbGUgb2YgMzAwMCBkaWFtb25kcy4gDQpUaGUgZm9sbG93aW5nIGFuYWx5c2lzIGNhbiBiZSB2ZXJ5IGhlbHBmdWwgdG8gdW5kZXJzdGFuZCB3aGljaCBkaWFtb25kIHByb3BlcnRpZXMgZHJpdmUgZGlhbW9uZCBwcmljZS4NCg0KQnV0LCB3aGF0IGV4YWN0bHkgYSBkaWFtb25kIGlzPw0KDQpgYGB7ciAsIGVjaG89RkFMU0UsIG91dC53aWR0aCA9ICc1MCUnfQ0Ka25pdHI6OmluY2x1ZGVfZ3JhcGhpY3MoImltYWdlcy9kaWFtb25kcy5qcGciKQ0KYGBgDQoNCkRpYW1vbmQgaXMgYSBzb2xpZCBmb3JtIG9mIHRoZSBlbGVtZW50IGNhcmJvbiB3aXRoIGl0cyBhdG9tcyBhcnJhbmdlZCBpbiBhIGNyeXN0YWwgc3RydWN0dXJlIGNhbGxlZCBkaWFtb25kIGN1YmljLiBEaWFtb25kcyBhcmUgdmVyeSByYXJlIGFuZCBjYW4gb25seSBiZSBjcmVhdGVkIHVuZGVyIGNvbmRpdGlvbnMgb2YgaGlnaCB0ZW1wZXJhdHVyZSBhbmQgcHJlc3N1cmUgb3ZlciB0aW1lLiBUaGlzIGV4dHJlbWUgY29uZGl0aW9uIGNyZWF0ZSBhIGNsZWFyIGFuZCBjb2xvdXJsZXNzIGNyeXN0YWxsaW5lIGZvcm0gb2YgdGhlIHB1cmUgY2FyYm9uLiBCZWNhdXNlIG9mIHRoYXQsIHRoZXkgYWNxdWlyZSBzdWNoIGEgaGFyZG5lc3MgdGhhdCB0aGV5IGNhbiBvbmx5IGJlIHNjcmF0Y2hlZCBvbmx5IGJ5IG90aGVyIGRpYW1vbmRzLg0KDQpvYnMuIFVuZm9ydHVuYXRlbHksIHRoaXMgZGF0YXNldCBkb2VzIG5vdCBjb250YWluIGluZm9ybWF0aW9uIGFib3V0IHRoZSBjb3VudHJ5LCBicmFuZCBhbmQgc2hhcGUgb2YgdGhlIGRpYW1vbmQgdGhhdCBwbGF5cyBhbiBpbXBvcnRhbnQgcm9sZSBpbiBpdHMgcHJpY2UuIExldCdzIGFzc3VtZSB0aGF0IGFsbCBkaWFtb25kcyBhcmUgZnJvbSB0aGUgc2FtZSBjb3VudHJ5LCBzYW1lIGJyYW5kIGFuZCBoYXZlIHRoZSBzYW1lIHNoYXBlLg0KDQpgYGB7cn0NCiMjIGxvYWRpbmcgdGhlIGRhdGEuDQpkZiA8LSByYWRpYW50LmRhdGE6OmRpYW1vbmRzDQpgYGANCg0KVG8gc3RhcnQgbGV0J3MgZXhwbG9yZSB0aGUgZGF0YSBzdHJ1Y3R1cmUgYW5kIHZhcmlhYmxlIHR5cGVzIHVzaW5nIHRoZSBmdW5jdGlvbiBnbGltcHNlIGZyb20gZHBseXI6DQoNCmBgYHtyfQ0KZ2xpbXBzZShkZikNCmBgYA0KIyMgVmFyaWFibGVzDQoNCnByaWNlID0gcHJpY2UgaW4gVVMgZG9sbGFycyAoYHIgIiQzMzgtJDE4LDc5MSJgKQ0KDQpjYXJhdCA9IHdlaWdodCBvZiB0aGUgZGlhbW9uZCAoMC4yLTMuMDApDQoNCmNsYXJpdHkgPSBhIG1lYXN1cmVtZW50IG9mIGhvdyBjbGVhciB0aGUgZGlhbW9uZCBpcyAoSTEgKHdvcnN0KSwgU0kyLCBTSTEsIFZTMiwgVlMxLCBWVlMyLCBWVlMxLCBJRiAoYmVzdCkpDQoNCmN1dCA9IHF1YWxpdHkgb2YgdGhlIGN1dCAoRmFpciwgR29vZCwgVmVyeSBHb29kLCBQcmVtaXVtLCBJZGVhbCkNCg0KY29sb3IgPSBkaWFtb25kIGNvbG9yLCBmcm9tIEogKHdvcnN0KSB0byBEIChiZXN0KQ0KDQpkZXB0aCA9IHRvdGFsIGRlcHRoIHBlcmNlbnRhZ2UgPSB6IC8gbWVhbih4LCB5KSA9IDIgKiB6IC8gKHggKyB5KSAoNTQuMi03MC44MCkNCg0KdGFibGUgPSB3aWR0aCBvZiB0b3Agb2YgZGlhbW9uZCByZWxhdGl2ZSB0byB3aWRlc3QgcG9pbnQgKDUwLTY5KQ0KDQp4ID0gbGVuZ3RoIGluIG1tICgzLjczLTkuNDIpDQoNCnkgPSB3aWR0aCBpbiBtbSAoMy43MS05LjI5KQ0KDQp6ID0gZGVwdGggaW4gbW0gKDIuMzMtNS41OCkNCg0KZGF0ZSA9IHNoaXBtZW50IGRhdGUNCg0KYGBge3J9DQpkZiA8LSBkZiAlPiUNCiAgbXV0YXRlKHllYXIgPSB5ZWFyKGRhdGUpLCBtb250aCA9IG1vbnRoKGRhdGUpKSAlPiUNCiAgbXV0YXRlKHllYXI9YXMuZmFjdG9yKHllYXIpLG1vbnRoPWFzLmZhY3Rvcihtb250aCkpDQpgYGANCg0KRmlyc3QsIGxldCdzIGxvb2sgYXQgdGhlIHNoaXBtZW50IGRhdGUgb2YgdGhlIGRpYW1vbmRzIHRvIHVuZGVyc3RhbmQgaG93IG1hbnkgZGlhbW9uZHMgcGVyIG1vbnRoIGFyZSBzaGlwcGVkOg0KDQpgYGB7ciBmaWcud2lkdGggPSA3LCBmaWcuaGVpZ2h0ID0gNSwgZHBpID0gMTQ0LCBvdXQud2lkdGggPSAnNzUlJ30NCmRmICU+JQ0KICBncm91cF9ieSh5ZWFyLCBtb250aCkgJT4lDQogIHN1bW1hcml6ZShxdHk9bigpKSAlPiUNCiAgZ2dwbG90KGFlcyh4PW1vbnRoLHk9cXR5LGdyb3VwPXllYXIpKSArIA0KICBnZW9tX3BvaW50KHNpemU9MykgKyANCiAgZ2VvbV9saW5lKHNpemU9MC41KSArIA0KICBmYWNldF93cmFwKH55ZWFyLG5yb3c9MSkgKyANCiAgdGhlbWUobGVnZW5kLnBvc2l0aW9uPSJub25lIikNCg0KYGBgDQoNCkZyb20gdGhpcyBwbG90IHdlIGNhbiBub3RpY2UgdGhhdCB0aGVyZSBpcyBub3QgY29udGludW9zIHNoaXBwbWVudCBvZiBkaWFtb25kcyBhbmQgdGhlIHF1YW50aXRpZXMgb3ZlciB0aGUgeWVhcnMvbW9udGhzIHZhcnkgYSBsb3QuDQoNCk5vdywgbGV0J3MgY3JlYXRlIHNvbWUgdmlzdWFsaXphdGlvbiBhbmQgc3RhdGlzdGljYWwgYW5hbHlzaXMgdG8gdW5kZXJzdGFuZCBob3cgZGlhbW9uZCBwcm9wZXJ0aWVzIGFmZmVjdCBwcmljZS4NCg0KIyMgUHJpY2UNCg0KVGhlIGRpc3RyaWJ1dGlvbiBwbG90IG9mIHRoZSBwcmljZSBzaG93cyB0aGF0IHRoZSBwcmljZSBvZiBkaWFtb25kcyBpcyBoaWdobHkgc2t3ZWVkIHRvIHRoZSByaWdodCBhbmQgbW9zdCBvZiB0aGVtIGhhdmUgYSBwcmljZSBiZWxsb3cgJDUsMDAwLg0KDQpgYGB7ciBmaWcud2lkdGggPSA3LCBmaWcuaGVpZ2h0ID0gNSwgZHBpID0gMTQ0LCBvdXQud2lkdGggPSAnNzUlJ30NCnZpc3VhbGl6ZSgNCiAgZGYsIA0KICB4dmFyID0gInByaWNlIiwNCiAgdHlwZSA9ICJkaXN0IiwgDQogIGN1c3RvbSA9IEZBTFNFDQopDQpgYGANCg0KIyMgNENzDQoNCkFjY29yZGluZ2x5IHRvIFtCbHVlTmlsZV0oaHR0cHM6Ly93d3cuYmx1ZW5pbGUuY29tL2VkdWNhdGlvbi9kaWFtb25kcz90cmFjaz1OYXZFZHU0YyksIHRoZSA0IG1haW4gcHJvcGVydGllcyBvZiBhIGRpYW1vbmQgYXJlIENhcmF0LCBDdXQsIENvbG9yIGFuZCBDbGFyaXR5ICg0Q3MpOg0KDQotIFRoZSB0ZXJtIFtjYXJhdF0oaHR0cHM6Ly93d3cuYmx1ZW5pbGUuY29tL2VkdWNhdGlvbi9kaWFtb25kcy9jYXJhdC13ZWlnaHQpIGFjdHVhbGx5IHJlZmVycyB0byB0aGUgZGlhbW9uZCdzIHRvdGFsIHdlaWdodCBhbmQgbm90IGl0cyBzaXplLg0KDQotIFRoZSBtb3N0IGltcG9ydGFudCBvZiB0aGUgNENzIGlzIFtjdXRdKGh0dHBzOi8vd3d3LmJsdWVuaWxlLmNvbS9lZHVjYXRpb24vZGlhbW9uZHMvY3V0KSBiZWNhdXNlIGl0IGhhcyB0aGUgZ3JlYXRlc3QgaW5mbHVlbmNlIG9uIGEgZGlhbW9uZCdzIHNwYXJrbGUuDQoNCi0gVGhlIHNlY29uZCBtb3N0IGltcG9ydGFudCBvZiB0aGUgNENzIGlzIFtjb2xvcl0oaHR0cHM6Ly93d3cuYmx1ZW5pbGUuY29tL2VkdWNhdGlvbi9kaWFtb25kcy9jb2xvciksIHdoaWNoIHJlZmVycyB0byBhIGRpYW1vbmQncyBsYWNrIG9mIGNvbG9yLiBUaGUgbGVzcyBjb2xvciwgdGhlIGhpZ2hlciB0aGUgZ3JhZGUuDQoNCi0gVGhlIGxlYXN0IGltcG9ydGFudCBvZiB0aGUgNENzIGlzIHVzdWFsbHkgW2NsYXJpdHldKGh0dHBzOi8vd3d3LmJsdWVuaWxlLmNvbS9lZHVjYXRpb24vZGlhbW9uZHMvY2xhcml0eSkgYmVjYXVzZSB0aGUgdGlueSBpbXBlcmZlY3Rpb25zIGFyZSBvZnRlbiBtaWNyb3Njb3BpYy4NCg0KYGBge3IgZmlnLndpZHRoID0gNywgZmlnLmhlaWdodCA9IDUsIGRwaSA9IDE0NCwgb3V0LndpZHRoID0gJzc1JSd9DQp2aXN1YWxpemUoDQogIGRmLCANCiAgeHZhciA9IGMoImNhcmF0IiwgImN1dCIsICJjb2xvciIsICJjbGFyaXR5IiksIA0KICB0eXBlID0gImRpc3QiLCANCiAgY3VzdG9tID0gRkFMU0UNCikNCmBgYA0KDQpXZSBjYW4gc2VlIGluIGFsbCB0aGUgcGxvdHMgdGhhdCB0aGUgZGlhbW9uZCBwcm9wZXJ0aWVzIGFyZSBub3QgZXZlbmx5IGRpc3RyaWJ1dGVkLiBTcGVjaWFsbHksIHRoZSBjYXJhdCBwbG90IGlzIGFsc28gdmVyeSByaWdodCBza3dlZWQuDQoNCkZyb20gdGhlIHNlbGxlcnMgcGVyc3BlY3RpdmUgaXQgaXMga2V5IHRvIGhhdmUgdGhlIG9wdGltYWwgcmFuZ2Ugb2YgZGlhbW9uZHMgdGhhdCBjbGllbnRzIGFyZSBsb29raW5nIGZvcndhcmQgdG8gYnV5LiANCg0KVGhlcmUgaXMgYSBjbGVhciB0cmFkZS1vZmYgaW4gdGhpcyBkZWNpc2lvbiBiZWNhdXNlIHRoZSBpbnZlbnRvcnkgY29zdCBvZiBhIGRpYW1vbmQgaXMgdmVyeSBleHBlbnNpdmUsIGJ1dCBhdCB0aGUgc2FtZSB0aW1lIHlvdSB3YW50IHRvIG9mZmVyIGFzIG1hbnkgY29tYmluYXRpb25zIGFzIHBvc3NpYmxlIG9mIHRoZSA0Q3MgdG8gdGhlIGNvbnN1bWVycy4gDQoNClRoYXQgaXMgb25lIHJlYXNvbiB0aGF0IGNvbXBhbmllcyBsaWtlIEJsdWVOaWxlcyBhcmUgZ3Jvd2luZyBmYXN0IHdpdGggZS1jb21tZXJjZS4NCg0KIyMjIENhcmF0DQoNCmBgYHtyICwgZWNobz1GQUxTRSwgb3V0LndpZHRoID0gJzUwJSd9DQprbml0cjo6aW5jbHVkZV9ncmFwaGljcygiaW1hZ2VzL2RpYW1vbmRfY2FyYXQuanBnIikNCmBgYA0KDQoNCk5vdywgbGV0J3MgY2hlY2sgaG93IHByaWNlIGlzIHJlbGF0ZWQgdG8gY2FyYXQgd2l0aCBhIHNjYXR0ZXIgcGxvdDoNCg0KYGBge3IgZmlnLndpZHRoID0gNywgZmlnLmhlaWdodCA9IDUsIGRwaSA9IDE0NCwgb3V0LndpZHRoID0gJzc1JSd9DQp2aXN1YWxpemUoDQogIGRpYW1vbmRzLCANCiAgeHZhciA9ICJjYXJhdCIsIA0KICB5dmFyID0gInByaWNlIiwgDQogIHR5cGUgPSAic2NhdHRlciIsIA0KICBucm9icyA9IDEwMDAsIA0KICBjaGVjayA9IGMoImxpbmUiLCAibG9lc3MiKSwgDQogIGN1c3RvbSA9IEZBTFNFDQopDQpgYGANCg0KVGhlcmUgaXMgYSBjbGVhciBwb3NpdGl2ZSBjb3JyZWxhdGlvbiBiZXR3ZWVuIHByaWNlIGFuZCBjYXJhdC4NCg0KSG93ZXZlciwgYWNjb3JkaW5nbHkgdG8gQmx1ZU5pbGUgZWR1Y2F0aW9uYWwgd2Vic2l0ZSAiZGlhbW9uZCBwcmljZXMgaW5jcmVhc2UgZXhwb25lbnRpYWxseSB3aXRoIGNhcmF0IHdlaWdodCBiZWNhdXNlIHRoZSBsYXJnZXIgdGhlIGNhcmF0LCB0aGUgbW9yZSByYXJlIHRoZSBkaWFtb25kLiINCg0KVGhhdCBkb2Vzbid0IHNlZW1zIHRvIGJlIHRydWUgbG9va2luZyBhdCB0aGlzIHBsb3QhIA0KDQpUaGlzIGlzIGhhcHBlbmluZyBiZWNhdXNlIHRoZXJlIGlzIG5vIGNvbnRyb2wgZm9yIG90aGVyIHNwZWNpZmljIGNoYXJhY3RlcmlzdGljcyBvZiB0aGUgZGltYW9uZHMgbGlrZSBDdXQsIENvbG9yIGFuZCBDbGFyaXR5IChlLmcuIElkZWFsLCBELCBWUzIgLyA1NSBvYnNlcnZhdGlvbnMpLg0KDQpgYGB7ciBmaWcud2lkdGggPSA3LCBmaWcuaGVpZ2h0ID0gNSwgZHBpID0gMTQ0LCBvdXQud2lkdGggPSAnNzUlJ30NCnZpc3VhbGl6ZSgNCiAgZGYsIA0KICB4dmFyID0gImNhcmF0IiwgDQogIHl2YXIgPSAicHJpY2UiLCANCiAgdHlwZSA9ICJzY2F0dGVyIiwgDQogIG5yb2JzID0gMTAwMCwgDQogIGNoZWNrID0gImxvZXNzIiwgDQogIGRhdGFfZmlsdGVyID0gImNvbG9yPT0nRCcmY3V0PT0nSWRlYWwnJmNsYXJpdHk9PSdWUzInIiwgDQogIGN1c3RvbSA9IEZBTFNFDQopDQpgYGANCg0KVGhlIGZpbHRlcmVkIHBsb3QgYWJvdmUgc2hvd3MgdGhhdCBpbmRlZWQgdGhlIHByaWNlIGdyb3dzIGV4cG9uZW50aWFseSB3aXRoIHRoZSBpbmNyZWFzZSBvZiBjYXJhdCBzaXplIGZvciB0aGF0IHBhcnRpY3VsYXIgY29tYmluYXRpb24gb2YgY3V0LCBjb2xvciBhbmQgY2xhcml0eSAoSWRlYWwsIEQsIFZTMikuDQoNCkhvd2V2ZXIsIHRvIGdlbmVyYWxpemUgdGhpcyBmaW5kaW5nIHdlIG5lZWQgdG8gYnVpbGQgYSBsaW5lYXIgcmVncmVzc2lvbiB0byBjb250cm9sIGZvciBjdXQsIGNvbG9yIGFuZCBjbGFyaXR5LiBJZiB3ZSBkb24ndCBjb25zaWRlciB0aGlzIG90aGVyIGNoYXJhY3RlcmlzdGljcyB3ZSBtaWdodCBjYXVzZSBhbiAib21pdHRlZCB2YXJpYWJsZSIgYmlhcy4NCg0KQW55d2F5LCBpdCB3b3VsZCBiZSBiZXR0ZXIgdG8gZmluZCBhIGNsZWFyIGxpbmVhciByZWxhdGlvbnNoaXAgYmV0d2VlbiBwcmljZSBhbmQgY2FyYXQuDQpUaGUgbG9lc3MgbGluZSBmb3IgY2FyYXQgc2VlbXMgdG8gaGF2ZSBzb21lIGN1cnZhdHVyZSBhbmQgdGhlIHBvaW50cyBkbyBub3QgbG9vayByYW5kb21seSBzY2F0dGVyZWQgYXJvdW5kIHRoYXQgbGluZS4NClVzdWFsbHksIGEgbGluZWFyIHJlbGF0aW9uc2hpcCBjYW4gYmUgZm91bmQgd2hlbiBhIGxvZyB0cmFuc2Zvcm1hdGlvbiBpcyBhcHBsaWVkIHRvIHZhcmlhYmxlcyB3aXRoIHNrZXdlZWQgZGlzdHJpYnV0aW9ucy4NCg0KYGBge3IgZmlnLndpZHRoID0gNywgZmlnLmhlaWdodCA9IDUsIGRwaSA9IDE0NCwgb3V0LndpZHRoID0gJzc1JSd9DQp2aXN1YWxpemUoDQogIGRpYW1vbmRzLCANCiAgeHZhciA9ICJjYXJhdCIsIA0KICB5dmFyID0gInByaWNlIiwgDQogIHR5cGUgPSAic2NhdHRlciIsIA0KICBucm9icyA9IDEwMDAsIA0KICBjaGVjayA9ICJsaW5lIiwgDQogIGF4ZXMgPSBjKCJsb2dfeCIsICJsb2dfeSIpLCANCiAgY3VzdG9tID0gRkFMU0UNCikNCmBgYA0KDQpZZXMsIGl0IHdvcmtlZCEgTm93IHRoZSBsaW5lYXIgcmVsYXRpb25zaGlwIGlzIG1vcmUgY2xlYXIgYW5kIHdlIGNhbiBleHBlY3QgbG9nIGNhcmF0ICB0byBiZSBhIHN0cm9uZyBwcmVkaWN0b3Igb2YgdGhlIGxvZyBvZiBhIGRpYW1vbmQgcHJpY2UuDQoNCiMjIyBDdXQNCg0KYGBge3IgLCBlY2hvPUZBTFNFLCBvdXQud2lkdGggPSAnNTAlJ30NCmtuaXRyOjppbmNsdWRlX2dyYXBoaWNzKCJpbWFnZXMvZGlhbW9uZF9jdXQuanBnIikNCmBgYA0KDQpOb3csIGxldCdzIGNoZWNrIGhvdyBsb2cgcHJpY2UgaXMgcmVsYXRlZCB0byBjdXQgd2l0aCBhIGJveC1wbG90Og0KDQpgYGB7ciBmaWcud2lkdGggPSA3LCBmaWcuaGVpZ2h0ID0gNSwgZHBpID0gMTQ0LCBvdXQud2lkdGggPSAnNTAlJ30NCnZpc3VhbGl6ZSgNCiAgZGlhbW9uZHMsIA0KICB4dmFyID0gImN1dCIsIA0KICB5dmFyID0gInByaWNlIiwgDQogIHR5cGUgPSAiYm94IiwgDQogIGF4ZXMgPSAibG9nX3kiLCANCiAgY3VzdG9tID0gRkFMU0UNCikNCmBgYA0KDQpUaGUgYm94LXBsb3Qgc2hvd3MgdGhhdCB0aGUgaGlnaGVzdCBhdmVyYWdlIG1lYW4gcHJpY2UgY2FtZXMgZnJvbSB0aGUgd29yc3QgdHlwZSBvZiBjdXQuIFRoYXQgZmluZGluZyBpcyBvcG9zaXRlIHRvIGNvbW1vbiBpbnR1aXRpb24uDQoNCkFnYWluLCB0aGlzIGlzIGhhcHBlbmluZyBiZWNhdXNlIHRoZXJlIGlzIG5vIGNvbnRyb2wgZm9yIHRoZSBvdGhlciBkaWFtb25kcyBjaGFyYXRlcmlzdGljcyBsaWtlIENhcmF0L0NvbG9yL0NsYXJpdHkuIExldCdzIGNoZWNrIHRoZSByZWxhdGlvbnNoaXAgYmV0d2VlbiBjdXQgYW5kIGNhcmF0IHdpdGggYSBsaW5lYXIgcmVncmVzc2lvbjoNCg0KYGBge3J9DQpyZXN1bHQgPC0gcmVncmVzcyhkZiwgcnZhciA9ICJjYXJhdCIsIGV2YXIgPSAiY3V0IikNCnN1bW1hcnkocmVzdWx0KQ0KYGBgDQoNClRoZSBsaW5lYXIgcmVncmVzc2lvbiBjb2VmZmljaWVudHMgY2FuIGJlIGludGVycHJldGVkIGFzIGZvbGxvd2luZzoNCg0KQ29tcGFyZWQgdG8gYSBkaWFtb25kIG9mIEZhaXIgY3V0LCBvbiBhdmVyYWdlLCBhIGRpYW1vbmQgd2l0aCBJZGVhbCBjdXQgaXMgZXhwZWN0ZWQgdG8gaGF2ZSAtMC4zNDMgY2FyYXRzLg0KDQpUaGVyZWZvcmUsIGJlY2F1c2Ugb2YgdGhpcyBuZWdhdGl2ZSByYWxhdGlvbnNoaXAgYmV0d2VlbiBjYXJhdCBhbmQgY3V0IHdlIGNhbm5vdCBzZWUgdGhlIHByaWNlIGdyb3dpbmcgYXMgdGhlIHF1YWxpdHkgb2YgdGhlIGN1dCBpbmNyZWFzZXMgYmVjYXVzZSB3ZSBhcmUgbm90IGNvbnRyb2xpbmcgZm9yIHRoZSBjYXJhdCBjaGFyYWN0ZXJpc3RpYy4NCg0KIyMjIENvbG9yDQoNCmBgYHtyICwgZWNobz1GQUxTRSwgb3V0LndpZHRoID0gJzc1JSd9DQprbml0cjo6aW5jbHVkZV9ncmFwaGljcygiaW1hZ2VzL2RpYW1vbmRfY29sb3IuanBnIikNCmBgYA0KDQpOb3csIGxldCdzIGV4cGxvcmUgY29sb3I6DQoNCmBgYHtyIGZpZy53aWR0aCA9IDcsIGZpZy5oZWlnaHQgPSA1LCBkcGkgPSAxNDQsIG91dC53aWR0aCA9ICc3NSUnfQ0KdmlzdWFsaXplKA0KICBkaWFtb25kcywgDQogIHh2YXIgPSAiY29sb3IiLCANCiAgeXZhciA9ICJwcmljZSIsIA0KICB0eXBlID0gImJhciIsIA0KICBheGVzID0gImxvZ195IiwgDQogIGN1c3RvbSA9IEZBTFNFDQopDQpgYGANCg0KU2ltaWxhciB0byBjdXQsIGNvbG9yIGdyYWRlIGlzIHNob3dpbmcgYSBuZWdhdGl2ZSByZWxhdGlvbnNoaXAgd2l0aCBtZWFuIGxvZyBwcmljZS4NCg0KQWdhaW4sIHRoaXMgaXMgaGFwcGVuaW5nIGJlY2F1c2UgdGhlcmUgaXMgbm8gY29udHJvbCBmb3IgdGhlIG90aGVyIGRpYW1vbmRzIGNoYXJhdGVyaXN0aWNzIGxpa2UgQ2FyYXQvQ3V0L0NsYXJpdHkuIExldCdzIGNoZWNrIHRoZSByZWxhdGlvbnNoaXAgYmV0d2VlbiBjb2xvciBhbmQgY2FyYXQgd2l0aCBhIGxpbmVhciByZWdyZXNzaW9uOg0KDQpgYGB7cn0NCnJlc3VsdCA8LSByZWdyZXNzKGRmLCBydmFyID0gImNhcmF0IiwgZXZhciA9ICJjb2xvciIpDQpzdW1tYXJ5KHJlc3VsdCkNCmBgYA0KDQpUaGUgbGluZWFyIHJlZ3Jlc3Npb24gY29lZmZpY2llbnRzIGNhbiBiZSBpbnRlcnByZXRlZCBhcyBmb2xsb3dpbmc6DQoNCkNvbXBhcmVkIHRvIGEgZGlhbW9uZCBvZiBjb2xvciBELCBvbiBhdmVyYWdlLCBhIGRpYW1vbmQgd2l0aCBjb2xvciBKIGlzIGV4cGVjdGVkIHRvIGhhdmUgKzAuNTI3IGNhcmF0cy4NCg0KVGhlcmVmb3JlLCBiZWNhdXNlIG9mIHRoaXMgbmVnYXRpdmUgcmFsYXRpb25zaGlwIGJldHdlZW4gY2FyYXQgYW5kIGNvbG9yIHdlIGNhbm5vdCBzZWUgdGhlIHByaWNlIHJlZHVjaW5nIGFzIHRoZSBxdWFsaXR5IG9mIHRoZSBjb2xvciBkZWNyZWFzZXMgYmVjYXVzZSB3ZSBhcmUgbm90IGNvbnRyb2xpbmcgZm9yIHRoZSBjYXJhdCBjaGFyYWN0ZXJpc3RpYy4NCg0KIyMjIENsYXJpdHkNCg0KYGBge3IgLCBlY2hvPUZBTFNFLCBvdXQud2lkdGggPSAnNTAlJ30NCmtuaXRyOjppbmNsdWRlX2dyYXBoaWNzKCJpbWFnZXMvZGlhbW9uZF9jbGFyaXR5LmpwZyIpDQpgYGANCg0KTm93LCBsZXQncyBleHBsb3JlIGNsYXJpdHk6DQoNCmBgYHtyIGZpZy53aWR0aCA9IDcsIGZpZy5oZWlnaHQgPSA1LCBkcGkgPSAxNDQsIG91dC53aWR0aCA9ICc3NSUnfQ0KdmlzdWFsaXplKA0KICBkaWFtb25kcywgDQogIHh2YXIgPSAiY2xhcml0eSIsIA0KICB5dmFyID0gInByaWNlIiwgDQogIHR5cGUgPSAiYmFyIiwgDQogIGF4ZXMgPSAibG9nX3kiLCANCiAgY3VzdG9tID0gRkFMU0UNCikNCmBgYA0KDQpTaW1pbGFyIHRvIGN1dCBhbmQgY29sb3IsIGNsYXJpdHkgZ3JhZGUgaXMgc2hvd2luZyBhIG5lZ2F0aXZlIHJlbGF0aW9uc2hpcCB3aXRoIG1lYW4gbG9nIHByaWNlLg0KDQpBZ2FpbiwgdGhpcyBpcyBoYXBwZW5pbmcgYmVjYXVzZSB0aGVyZSBpcyBubyBjb250cm9sIGZvciB0aGUgb3RoZXIgZGlhbW9uZHMgY2hhcmF0ZXJpc3RpY3MgbGlrZSBDYXJhdC9Db2xvci9DdXQgTGV0J3MgY2hlY2sgdGhlIHJlbGF0aW9uc2hpcCBiZXR3ZWVuIGNsYXJpdHkgYW5kIGNhcmF0IHdpdGggYSBsaW5lYXIgcmVncmVzc2lvbjoNCg0KYGBge3J9DQpyZXN1bHQgPC0gcmVncmVzcyhkZiwgcnZhciA9ICJjYXJhdCIsIGV2YXIgPSAiY2xhcml0eSIpDQpzdW1tYXJ5KHJlc3VsdCkNCmBgYA0KDQpUaGUgbGluZWFyIHJlZ3Jlc3Npb24gY29lZmZpY2llbnRzIGNhbiBiZSBpbnRlcnByZXRlZCBhcyBmb2xsb3dpbmc6DQoNCkNvbXBhcmVkIHRvIGEgZGlhbW9uZCBvZiBJMSBjbGFyaXR5LCBvbiBhdmVyYWdlLCBhIGRpYW1vbmQgd2l0aCBJRiBjbGFyaXR5IGlzIGV4cGVjdGVkIHRvIGhhdmUgLTAuODM1IGNhcmF0cy4NCg0KVGhlcmVmb3JlLCBiZWNhdXNlIG9mIHRoaXMgbmVnYXRpdmUgcmFsYXRpb25zaGlwIGJldHdlZW4gY2FyYXQgYW5kIGN1dCB3ZSBjYW5ub3Qgc2VlIHRoZSBwcmljZSBncm93aW5nIGFzIHRoZSBxdWFsaXR5IG9mIHRoZSBjdXQgaW5jcmVhc2VzIGJlY2F1c2Ugd2UgYXJlIG5vdCBjb250cm9saW5nIGZvciB0aGUgY2FyYXQgY2hhcmFjdGVyaXN0aWMuDQoNCiMjIE90aGVycw0KDQpgYGB7ciAsIGVjaG89RkFMU0UsIG91dC53aWR0aCA9ICc1MCUnfQ0Ka25pdHI6OmluY2x1ZGVfZ3JhcGhpY3MoImltYWdlcy9kaWFtb25kX2FuYXRvbXkuanBnIikNCmBgYA0KDQpXZSBhbHNvIGhhdmUgYXZhaWxhYmxlIGluZm9ybWF0aW9uIGFib3V0IGRlcHRoLCB0YWJsZSBhbmQgZGlhbW9uZCBkaW1lbnNpb25zLiANCg0KSXQgaXMgcG9zc2libGUgdG8gbm90aWNlIHRoYXQgZGVwdGggYW5kIHRhYmxlIGhhdmUgYSBsb3dlciB2YXJpYXRpb24gYW5kIGxvb2tzIG1vcmUgbGlrZSBhIG5vcm1hbCBkaXN0cmlidXRpb24gaWYgY29tcGFyZWQgdG8gY2FyYXQuDQoNCmBgYHtyIGZpZy53aWR0aCA9IDcsIGZpZy5oZWlnaHQgPSA1LCBkcGkgPSAxNDQsIG91dC53aWR0aCA9ICc3NSUnfQ0KdmlzdWFsaXplKA0KICBkaWFtb25kcywgDQogIHh2YXIgPSBjKCJkZXB0aCIsICJ0YWJsZSIsICJ4IiwgInkiLCAieiIpLCANCiAgdHlwZSA9ICJkaXN0IiwgDQogIGN1c3RvbSA9IEZBTFNFDQopDQpgYGANCg0KTm93LCBsZXQncyBjaGVjayBob3cgdGhlc2UgcHJvcGVydGllcyBhcmUgcmVsYXRlZCB0byBwcmljZToNCg0KYGBge3IgZmlnLndpZHRoID0gNywgZmlnLmhlaWdodCA9IDUsIGRwaSA9IDE0NCwgb3V0LndpZHRoID0gJzc1JSd9DQp2aXN1YWxpemUoDQogIGRpYW1vbmRzLCANCiAgeHZhciA9IGMoImRlcHRoIiwgInRhYmxlIiwgIngiLCAieSIsICJ6IiksIA0KICB5dmFyID0gInByaWNlIiwgDQogIHR5cGUgPSAic2NhdHRlciIsIA0KICBucm9icyA9IDEwMDAsIA0KICBjaGVjayA9ICJsaW5lIiwgDQogIGF4ZXMgPSAibG9nX3kiLCANCiAgY3VzdG9tID0gRkFMU0UNCikNCmBgYA0KDQpJdCBzZWVtcyB0aGF0IGRlcHRoIGFuZCB0YWJsZSBhcmUgbm90IGNvcnJlbGF0ZWQgd2l0aCBsb2cgcHJpY2UuIE9uIHRoZSBvdGhlciBoYWQsIGFzIEkgd2FzIGV4cGVjdGluZyB4LCB5IGFuZCB6IGhhdmUgYSBwb3NpdGl2ZSBjb3JyZWxhdGlvbiB3aXRoIGxvZyBwcmljZS4gDQoNCkl0IG1ha2VzIHNlbnNlIHRoYXQgdGhlIGRpYW1vbmRzIGRpbWVuc2lvbnMgaGF2ZSBpbmZsdWVuY2UgaW4gdGhlIHByaWNlLCBzcGVjaWFsbHkgYmVjYXVzZSB3ZSBkaXNjb3ZlcmVkIHRoYXQgY2FyYXQgKGRpYW1vbmQgd2VpZ2h0KSBwbGF5cyBhbiBpbXBvcnRhbnQgcm9sZSBpbiB0aGUgZGlhbW9uZCBwcmljZSBhbmQgd2VpZ2h0IGlzIGNvcnJlYWx0ZWQgd2l0aCB2b2x1bWUuIA0KDQpIb3dldmVyLCB3ZSBuZWVkIHRvIGJlIGNhdXRpb25zIHdpdGggdGhlc2UgdmFyaWFibGVzIHdoZW4gaW5jbHVkaW5nIHRoZW0gaW4gYSBwcmVkaWN0aXZlIG1vZGVsIG9mIHByaWNlIGJlY2F1c2UgdGhleSBhcmUgZ29pbmcgdG8gYmUgdmVyeSBjb3JyZWxhdGVkIHdpdGggY2FyYXQgYXMgd2VsbC4NCg0KYGBge3IgZmlnLndpZHRoID0gOS45NiwgZmlnLmhlaWdodCA9IDkuOTYsIGRwaSA9IDE0NCwgb3V0LndpZHRoID0gJzUwJSd9DQpyZXN1bHQgPC0gY29ycmVsYXRpb24oDQogIGRmLCANCiAgdmFycyA9IGMoInByaWNlIiwgImNhcmF0IiwgImRlcHRoIiwgInRhYmxlIiwgIngiLCAieSIsICJ6IiksIA0KICBkYXRhX2ZpbHRlciA9ICJjYXJhdD49MSAmIGNhcmF0IDw9IDEuMjUiDQopDQpzdW1tYXJ5KHJlc3VsdCkNCnBsb3QocmVzdWx0LCBucm9icyA9IC0xKQ0KYGBgDQoNCkluZGVlZCwgdGhlIGRpbWVuc2lvbnMgb2YgYSBkaWFtb25kIHgsIHkgYW5kIHogYXJlIGhpZ2hseSBjb3JyZWxhdGVkIHdpdGggY2FyYXQgYW5kIGFtb25nIGVhY2ggb3RoZXIuDQoNClRoYXQgY29uY2x1ZGVzIHRoZSBleHBsb3JhdG9yeSBkYXRhIGFuYWx5c2lzIGFuZCBub3cgaXQgaXMgcG9zc2libGUgdG8gcHJvY2VlZCB0byB0aGUgY29uc3RydWN0aW9uIG9mIGEgcHJlZGljdGl2ZSBtb2RlbCBvZiB0aGUgbG9nIHByaWNlIG9mIGEgZGlhbW9uZCB1c2luZyBMaW5lYXIgUmVncmVzc2lvbi4NCg0KIyBMaW5lYXIgUmVncmVzc2lvbg0KDQpMZXQncyBzdGFydCB0aGUgTGluZWFyIFJlZ3Jlc3Npb24gbW9kZWwgYXMgc2ltcGxlIGFzIHBvc3NpYmxlIHdpdGgganVzdCBwcmljZSBhcyB0aGUgcmVzcG9uc2UgdmFyaWFibGUgYW5kIGNhcmF0IGFzIHRoZSBleHBsYW5hdG9yeSB2YXJpYWJsZS4NCg0KYGBge3IgZmlnLndpZHRoID0gNywgZmlnLmhlaWdodCA9IDguMDgsIGRwaSA9IDE0NCwgb3V0LndpZHRoID0gJzUwJSd9DQpyZXN1bHQgPC0gcmVncmVzcyhkZiwgcnZhciA9ICJwcmljZSIsIGV2YXIgPSAiY2FyYXQiKQ0Kc3VtbWFyeShyZXN1bHQsIHN1bV9jaGVjayA9ICJybXNlIikNCnBsb3QocmVzdWx0LCBwbG90cyA9ICJkYXNoYm9hcmQiLCBucm9icyA9IDEwMDAsIGN1c3RvbSA9IEZBTFNFKQ0KYGBgDQoNCmByICJUaGUgY2FyYXQgY29lZmZpY2llbnQgb2YgdGhlIGxpbmVhciByZWdyZXNzaW9uIGluZGljYXRlcyB0aGF0IGlmIHlvdSBpbmNyZWFzZSB0aGUgY2FyYXQgc2l6ZSBvZiBhIGRpYW1vbmQgYnkgMSB1bml0IHRoZSBwcmljZSBpcyBleHBlY3RlZCB0byBpbmNyZWFzZSwgb24gYXZlcmFnZSwgJDcsNzQ0LiBUaGUgSW50ZXJjZXBldCBkb2VzIG5vdCBoYXZlIGFuIGludGVycHJldGF0aW9uIGJlY2F1c2UgdGhlIHByaWNlIHdvdWxkIG5ldmVyIGJlIG5lZ2F0aXZlLiBUaGlzIG1vZGVsIGFsc28gaGF2ZSBhIGhpZ2ggUi1zcXVhcmVkICguODYpImANCg0KSG93ZXZlciwgdG8gZHJhdyBpbmZlcmVuY2VzIGZyb20gdGhpcyBsaW5lYXIgcmVncmVzc2lvbiBpdCBpcyBpbXBvcnRhbnQgdG8gY2hlY2sgaWYgdGhlIGxpbmVhciBtb2RlbCBhc3N1bXB0aW9ucyBhcmUgbWV0IHdpdGggdGhlIGNoYXJ0cyBhYm92ZS4NCg0KVW5mb3J0dW5hdGVseSwgdGhlIHJlc2lkdWFscyBhcmUgbm90IG5vcm1hbGx5IGRpc3RyaWJ1dGVkIGFuZCB0aGUgcmVzaWR1YWwgdnMgZml0dGVkIHBsb3Qgc2hvd3MgdGhhdCB3ZSBoYXZlIGhldGVyb3NjZWRhc3RpY2l0eS4NCg0KQXMgZXhwZWN0ZWQgYmVmb3JlIHdoZW4gdGhlIHNjYXR0ZXIgcGxvdCB3YXMgY3JlYXRlZCB0aGUgbG9nLXRyYW5zZm9ybWF0aW9uIGlzIGdvaW5nIHRvIGltcHJvdmUgb3VyIHJlc3VsdHM6DQoNCmBgYHtyIGZpZy53aWR0aCA9IDcsIGZpZy5oZWlnaHQgPSA4LjA4LCBkcGkgPSAxNDQsIG91dC53aWR0aCA9ICc1MCUnfQ0KIyMgdHJhbnNmb3JtIHZhcmlhYmxlDQpkZiA8LSBtdXRhdGVfZXh0KGRpYW1vbmRzLCAudmFycyA9IHZhcnMocHJpY2UsIGNhcmF0KSwgLmZ1bnMgPSBsb2csIC5leHQgPSAiX2xuIikNCnJlc3VsdCA8LSByZWdyZXNzKGRmLCBydmFyID0gInByaWNlX2xuIiwgZXZhciA9ICJjYXJhdF9sbiIpDQpzdW1tYXJ5KHJlc3VsdCwgc3VtX2NoZWNrID0gInJtc2UiKQ0KcGxvdChyZXN1bHQsIHBsb3RzID0gImRhc2hib2FyZCIsIG5yb2JzID0gMTAwMCwgY3VzdG9tID0gRkFMU0UpDQpgYGANCg0KQXMgZXhwZWN0ZWQgdGhlIGxvZyB0cmFuc2Zvcm1hdGlvbiB3b3JrZWQhIE5vdywgdGhlIGVycm9ycyBkaXN0cmlidXRpb24gYXJlIGNsb3NlciB0byBhIG5vcm1hbCBkaXN0cmlidXRpb24gYW5kIHRoZSByZXNpZHVhbCB2cyBmaXR0ZWQgcGxvdCBkb2Vzbid0IHNlZW0gdG8gaGF2ZSBoZXRlcm9zY2VkYXN0aWNpdHkuDQoNClRoZSBSLXNxdWFyZWQgYWxzbyB3ZW50IHVwIHRvIC45My4NCg0KTm93LCB0aGUgaW50ZXJwcmV0YXRpb24gb2YgdGhlIGNvZWZmaWNpZW50IGNoYW5nZSB3aXRoIHRoZSBsb2ctbG9nIHRyYW5zZm9ybWF0aW9uLg0KDQpGb3IgYSAxJSBpbmNyZWFzZSBpbiBjYXJhdHMgd2UgZXhwZWN0LCBvbiBhdmVyYWdlLCB0byBzZWUgYSAxLjY3MiUgaW5jcmVhc2UgaW4gdGhlIHByaWNlIG9mIGEgZGlhbW9uZC4NCg0KYHIgIkZvciBleGFtcGxlLCB0aGUgYXZlcmFnZSBwcmljZSBmb3IgYSBjYXJhdCBzaXplIG9mIDEgaW4gdGhpcyBkYXRhc2V0IHdvdWxkIGJlICQ1LDA5MCBhbmQgb3VyIHByZWRpY3Rpb24gd291bGQgYmUgJDQsNjc1LiJgDQoNCkhvd2V2ZXIsIGlmIHdlIGxvb2sgYXQgdGhlIHByaWNlIGRpc3RyaWJ1dGlvbiBmb3IgY2FyYXQ9PTEgdGhlcmUgaXMgc3RpbGwgYSBsb3Qgb2YgdmFyaWFiaWxpdHk6DQoNCmBgYHtyIGZpZy53aWR0aCA9IDcsIGZpZy5oZWlnaHQgPSA4LjA4LCBkcGkgPSAxNDQsIG91dC53aWR0aCA9ICc0MCUnfQ0KdmlzdWFsaXplKA0KICBkZiwgDQogIHh2YXIgPSAicHJpY2UiLCANCiAgdHlwZSA9ICJkaXN0IiwgDQogIGRhdGFfZmlsdGVyID0gImNhcmF0PT0xIiwgDQogIGN1c3RvbSA9IEZBTFNFDQopDQpgYGANCg0KTGV0J3MgY2hlY2sgaWYgd2UgY2FuIGRvIGV2ZW4gYmV0dGVyIGJ5IGFkZGluZyB0aGUgb3RoZXIgQ3MgdG8gdGhlIG1vZGVsLg0KDQpgYGB7ciBmaWcud2lkdGggPSA3LCBmaWcuaGVpZ2h0ID0gOC4wOCwgZHBpID0gMTQ0LCBvdXQud2lkdGggPSAnNTAlJ30NCiMjIHRyYW5zZm9ybSB2YXJpYWJsZQ0KZGYgPC0gbXV0YXRlX2V4dChkaWFtb25kcywgLnZhcnMgPSB2YXJzKHByaWNlLCBjYXJhdCksIC5mdW5zID0gbG9nLCAuZXh0ID0gIl9sbiIpDQpyZXN1bHQgPC0gcmVncmVzcyhkZiwgcnZhciA9ICJwcmljZV9sbiIsIGV2YXIgPSBjKCJjYXJhdF9sbiIsImN1dCIsImNvbG9yIiwiY2xhcml0eSIpKQ0Kc3VtbWFyeShyZXN1bHQsIHN1bV9jaGVjayA9IGMoInJtc2UiLCAidmlmIiwgImNvbmZpbnQiKSkNCnBsb3QocmVzdWx0LCBwbG90cyA9ICJkYXNoYm9hcmQiLCBucm9icyA9IDEwMDAsIGN1c3RvbSA9IEZBTFNFKQ0KYGBgDQoNClRoZSBtb2RlbCBpcyBpbmRlZWQgYmV0dGVyISBUaGUgYXNzdW1wdGlvbnMgb2YgdGhlIGxpbmVhciBtb2RlbCBhcmUgc3RpbGwgc2F0aXNmaWVkIGFuZCB0aGUgUiBTcXVhcmVkIGlzIC45ODMuIE5vdywgdGhhdCB3ZSBoYXZlIGFkZGVkIG1vcmUgdmFyaWFibGVzIGl0IGlzIGltcG9ydGFudCB0byBjaGVjayB0aGUgVmFyaWFuY2UgSW5mbGF0aW9uIEZhY3RvciAoVklGKSwgc3BlY2lhbGx5IGJlY2F1c2Ugd2UgYWRkZWQgdmFyaWFibGVzIHRoYXQgYXJlIGNvcnJlbGF0ZWQgYXMgc2hvd24gcHJldmlvdXNseSBpbiB0aGUgRURBLiBIb3dldmVyLCB0aGUgVklGcyBhcmUgc3RpbGwgYWNjZXB0YWJsZSAoPDUgYXMgYSBydWxlIGZvIHRodW1iKS4NCg0KV2UgY2FuIG1ha2UgdGhlIGZvbGxvd2luZyBpbnRlcnByZXRhdGlvbnMgb2YgdGhlIGNvZWZmaWNpZW50czoNCg0KRm9yIGEgMSUgaW5jcmVhc2UgaW4gY2FyYXRzIHdlIGV4cGVjdCwgb24gYXZlcmFnZSwgdG8gc2VlIGEgMS44ODIlIGluY3JlYXNlIGluIHRoZSBwcmljZSBvZiBhIGRpYW1vbmQuDQoNCmBgYHtyIGZpZy53aWR0aCA9IDcsIGZpZy5oZWlnaHQgPSA4LjA4LCBkcGkgPSAxNDQsIG91dC53aWR0aCA9ICc0MCUnfQ0KcHJlZCA8LSBwcmVkaWN0KHJlc3VsdCwgcHJlZF9jbWQgPSAiY2FyYXRfbG49YygwLC4xLC4yLC4zLC40LC41LC42LC43LC44LC45LDEsMS4yNSwxLjUpIikNCnByZWQgPC0gcHJlZCAlPiUNCiAgbXV0YXRlKFByZWRpY3Rpb249ZXhwKFByZWRpY3Rpb24pLGNhcmF0PWV4cChjYXJhdF9sbikpDQp2aXN1YWxpemUoDQogIHByZWQsIA0KICB4dmFyID0gImNhcmF0IiwgDQogIHl2YXIgPSAiUHJlZGljdGlvbiIsIA0KICB0eXBlID0gInNjYXR0ZXIiLCANCiAgbnJvYnMgPSAxMDAwLCANCiAgY2hlY2sgPSBjKCJsb2VzcyIpLCANCiAgY3VzdG9tID0gRkFMU0UNCikNCmBgYA0KDQpJbmRlZWQsIGFzIHN0YXRlZCBieSBCbHVlTklsZSB0aGUgcHJpY2Ugb2YgdGhlIGRpYW1vbmQgaW5jcmVhc2UgZXhwb25lbnRpYWxseSB3aXRoIHRoZSBjYXJhdCBzaXplLiBLZWVwaW5nIGFsbCBvdGhlciBkaWFtb25kIGNoYXJhY3RlcmlzdGljcyB0aGUgc2FtZS4NCg0KQ29tcGFyZWQgdG8gYSBkaWFtb25kIG9mIGNsYXJpdHkgSTEgd2UgZXhwZWN0LCBvbiBhdmVyYWdlLCB0byBwYXkgMTAweChleHAoMS4xMDIpLTEpID0gMjAxJSBtb3JlIGZvciBhIGRpYW1vbmQgb2YgY2xhcml0eSBJRiwga2VlcGluZyBhbGwgb3RoZXIgdmFyaWFibGVzIGluIHRoZSBtb2RlbCBjb25zdGFudC4NCg0KVGhlIGNvZWZmaWNpZW50cyBmb3IgZWFjaCBvZiB0aGUgbGV2ZWxzIG9mIGNsYXJpdHkgaW1wbHkgdGhhdCBhbiBpbmNyZWFzZSBpbiBjbGFyaXR5IHdpbGwgaW5jcmVhc2UgdGhlIHByaWNlIG9mIGRpYW1vbmQuIFdoeSB0aGVuIGRpZCB0aGUgYm94LXBsb3Qgb2YgY2xhcml0eSB2ZXJzdXMgcHJpY2Ugc2hvdyBwcmljZSBkZWNyZWFzaW5nIHdpdGggY2xhcml0eT8gQXMgY29tbWVudGVkIGJlZm9yZSB3aGVuIHdlIGxvb2sgYXQgdGhlIGJveCBwbG90IHdlIGFyZSByZWFsbHkgc2VlaW5nIHRoZSBlZmZlY3Qgb2Ygbm90IG9ubHkgaW1wcm92aW5nIGNsYXJpdHkgb24gcHJpY2UgYnV0IGFsc28gdGhlIGVmZmVjdCBvZiB0aGUgb3RoZXIgZGlhbW9uZCBjaGFyYWN0ZXJpc3RpY3MuDQoNClRoZSBzYW1lIGFwcGxpZXMgdG8gY29sb3IgYW5kIGN1dDoNCg0KQ29tcGFyZWQgdG8gYSBkaWFtb25kIG9mIGZhaXIgY3V0IHdlIGV4cGVjdCwgb24gYXZlcmFnZSwgdG8gcGF5IDEwMHgoZXhwKDAuMTY3KS0xKSA9IDE4JSBtb3JlIGZvciBhIGRpYW1vbmQgb2YgaWRlYWwgY3V0LCBrZWVwaW5nIGFsbCBvdGhlciB2YXJpYWJsZXMgaW4gdGhlIG1vZGVsIGNvbnN0YW50Lg0KDQpDb21wYXJlZCB0byBhIGRpYW1vbmQgb2YgY29sb3IgRCB3ZSBleHBlY3QsIG9uIGF2ZXJhZ2UsIHRvIHBheSAxMDB4KGV4cCgtMC40ODkpLTEpID0gMzguNyUgbGVzcyBmb3IgYSBkaWFtb25kIG9mIGNsYXJpdHkgSiwga2VlcGluZyBhbGwgb3RoZXIgdmFyaWFibGVzIGluIHRoZSBtb2RlbCBjb25zdGFudC4NCg0KQWNjb3JkaW5nbHkgdG8gQmx1ZU5pbGUgY3V0IGlzIHRoZSBtb3N0IGltcG9ydGFudCBvZiB0aGUgNENzIGJlY2F1c2UgaXQgaXMgcmVsYXRlZCB0byB0aGUgZGltYW9uZCBzcGFya2xlLg0KDQpIb3dldmVyLCB0aGUgbGluZWFyIHJlZ3Jlc3Npb24gbW9kZWwgc2hvd3MgdGhhdCBhdCBsZWFzdCBmb3IgcHJpY2UgY3V0IGlzIG5vdCB0aGUgbW9zdCBpbXBvcnRhbnQgb2YgdGhlIDRDcyBhbmQgcmVtb3ZpbmcgY2FyYXQgdGhhdCBpcyBhIG51bWVyaWNhbCB2YXJpYWJsZSB0aGUgY2F0ZWdvcmljYWwgdmFyaWFibGVzIG9yZGVyIG9mIGltcG9ydGFuY2UgY291bGQgYmUgZGVmaW5lZCB1c2luZyB0aGUgcGVyY2VudGFnZSB2YXJpYXRpb24gcmFuZ2Ugb24gcHJpY2UgKGNsYXJpdHkgPiBjb2xvciA+IGN1dCkuDQoNCmByICJXaXRoIHRoaXMgZmluYWwgbW9kZWwgdGhlIHByZWRpY3RlZCB0aGUgcHJpY2UgZm9yIGEgZGlhbW9uZCBvZiAxIGNhcmF0LCBjdXQgPSBJZGVhbCwgY29sb3IgPSBFIGFuZCBjbGFyaXR5ID0gVlMyIHdvdWxkIGJlICQ4LDcxMC4gV2UganVzdCBoYXZlIDEgZGlhbW9uZCB3aXRoIHRoZXNlIDRDcyBjaGFyYWN0ZXJpc3RpY3MgYW5kIGl0IGhhcyBhIHByaWNlIG9mICQ2LDA0My4gQnV5aW5nIHRoaXMgZGlhbW9uZCB3b3VsZCBiZSBhIGdyZWF0IGRlYWwgc2luY2UgdGhlIGV4cGVjdGVkIHByaWNlIGlzIG1vcmUgdGhhbiAkMiwwMDAgbW9yZS4iYCINCg0KIyBCdXlpbmcgYW4gZW5nYWdlbWVudCByaW5nDQoNCmBgYHtyICwgZWNobz1GQUxTRSwgb3V0LndpZHRoID0gJzI1JSd9DQprbml0cjo6aW5jbHVkZV9ncmFwaGljcygiaW1hZ2VzL215UHJvcG9zYWwxLmpwZyIpDQpgYGANCg0KSWYgeW91IGFscmVhZHkgZGVjaWRlZCB0byBwcm9wb3NlIHRvIHlvdXIgc3BlY2lhbCBvbmUgdGhlIG5hdHVyYWwgbmV4dCBzdGVwIHNob3VsZCBiZSBmaWd1cmUgb3V0IHdoaWNoIGVuZ2FnZW1lbnQgcmluZyB0byBidXkuIFRoaXMgZGVjaXNpb24gaXMgYm90aCBlbW90aW9uYWwgYW5kIHJhdGlvbmFsLiBCYXNpY2FseSB5b3UgaGF2ZSB0d28gbWFqb3IgY29uc2lkZXJhdGlvbnM6IHlvdXIgc3BlY2lhbCBvbmUgZXhwZWN0YXRpb25zIGFuZCB5b3VyIGZpbmFuY2lhbCBzaXR1dGF0aW9uLg0KDQpUaGUgcHJldmlvdXMgYW5hbHlzaXMgYW5kIG1vZGVsIGNhbiBkZWZpbmV0ZWx5IGhlbHAgeW91IHdpdGggZmluZGluZyB0aGUgYmVzdCB0cmFkZS1vZmYgYmV0d2VlbiBwcmljZSBhbmQgcXVhbGl0eSBhcyB3ZWxsIGV2YWx1YXRlIGdvb2QgZGVhbHMgYXZhaWxhYmxlIG9uIHRoZSBtYXJrZXQuIEl0IGlzIGltcG9ydGFudCB0byBoYXZlIGluIG1pbmQgdGhhdCB5b3VyIHNwZWNpYWwgb25lIHdpbGwgbG92ZSBhbmQgYXBwcmVjaWF0ZSB0aGUgZmFjdCB0aGF0IHlvdSBzcGVudCB0aGUgZWZmb3J0IHRvIGZpbmQgdGhlIHBlcmZlY3QgcmluZy4gTW9zdCB3b21lbiBhcmUgbm90IGxvb2tpbmcgdG8gYmFua3J1cHQgeW91IHdpdGggdW5yZWFsaXN0aWMgcmVxdWlyZW1lbnRzLg0KDQpKdXN0IG1ha2Ugc3VyZSB0byBnZXQgc29tZSBndWlkYW5jZSBmcm9tIGZyaWVuZHMgYW5kIGdvIG9uLWxpbmUgdG8gZmluZCBvdXQgbW9yZSBhYm91dCBpdC4gVGhlIG1vc3QgaW1wb3J0YW50IGFzcGVjdCBpcyB0aGUgc3VycHJpc2UgdGhhdCB5b3UgYXJlIGdvaW5nIHRvIG1ha2UgYW5kIGhvdyBldmVyeXRoaW5nIHdpbGwgYmUgc2V0IHVwLiBHb29kIGx1Y2shDQoNCmBgYHtyICwgZWNobz1GQUxTRSwgb3V0LndpZHRoID0gJzI1JSd9DQprbml0cjo6aW5jbHVkZV9ncmFwaGljcygiaW1hZ2VzL215UHJvcG9zYWwyLmpwZyIpDQpgYGANCg0KDQo=</div>



</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.header').parent('thead').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
